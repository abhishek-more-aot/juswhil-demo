{"remainingRequest":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/babel-loader/lib/index.js!/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/vue-loader/lib/loaders/templateLoader.js??ref--6!/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/algoocean/Desktop/AOT-Project/myvarni-admin/src/views/user/list.vue?vue&type=template&id=7a6bb0ea&scoped=true&","dependencies":[{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/src/views/user/list.vue","mtime":1668755890995},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/babel.config.js","mtime":1668754947334},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/cache-loader/dist/cjs.js","mtime":1655274288430},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/cache-loader/dist/cjs.js","mtime":1655274288430},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/babel-loader/lib/index.js","mtime":1668596430903},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/vue-loader/lib/loaders/templateLoader.js","mtime":1668596436320},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/cache-loader/dist/cjs.js","mtime":1655274288430},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/vue-loader/lib/index.js","mtime":1668596436320}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnN0YXRpY1JlbmRlckZucyA9IGV4cG9ydHMucmVuZGVyID0gdm9pZCAwOwp2YXIgcmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkgewogIHZhciBfdm0gPSB0aGlzLAogICAgX2MgPSBfdm0uX3NlbGYuX2MsCiAgICBfc2V0dXAgPSBfdm0uX3NlbGYuX3NldHVwUHJveHk7CiAgcmV0dXJuIF9jKCdkaXYnLCB7CiAgICBzdGF0aWNDbGFzczogImFwcC1jb250YWluZXIiCiAgfSwgW19jKCdkaXYnLCB7CiAgICBzdGF0aWNDbGFzczogImZpbHRlci1jb250YWluZXIiCiAgfSwgW19jKCdlbC1pbnB1dCcsIHsKICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgc3RhdGljU3R5bGU6IHsKICAgICAgIndpZHRoIjogIjE3MHB4IgogICAgfSwKICAgIGF0dHJzOiB7CiAgICAgICJwbGFjZWhvbGRlciI6ICJOYW1lIiwKICAgICAgImNsZWFyYWJsZSI6ICIiCiAgICB9LAogICAgb246IHsKICAgICAgImlucHV0IjogX3ZtLmhhbmRsZUZpbHRlcgogICAgfSwKICAgIG1vZGVsOiB7CiAgICAgIHZhbHVlOiBfdm0ubGlzdFF1ZXJ5LmZ1bGxOYW1lLAogICAgICBjYWxsYmFjazogZnVuY3Rpb24gKCQkdikgewogICAgICAgIF92bS4kc2V0KF92bS5saXN0UXVlcnksICJmdWxsTmFtZSIsICQkdik7CiAgICAgIH0sCiAgICAgIGV4cHJlc3Npb246ICJsaXN0UXVlcnkuZnVsbE5hbWUiCiAgICB9CiAgfSksIF9jKCdlbC1pbnB1dCcsIHsKICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgc3RhdGljU3R5bGU6IHsKICAgICAgIndpZHRoIjogIjE3MHB4IgogICAgfSwKICAgIGF0dHJzOiB7CiAgICAgICJwbGFjZWhvbGRlciI6ICJFbWFpbCIsCiAgICAgICJjbGVhcmFibGUiOiAiIgogICAgfSwKICAgIG9uOiB7CiAgICAgICJpbnB1dCI6IF92bS5oYW5kbGVGaWx0ZXIKICAgIH0sCiAgICBtb2RlbDogewogICAgICB2YWx1ZTogX3ZtLmxpc3RRdWVyeS5lbWFpbCwKICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgkJHYpIHsKICAgICAgICBfdm0uJHNldChfdm0ubGlzdFF1ZXJ5LCAiZW1haWwiLCAkJHYpOwogICAgICB9LAogICAgICBleHByZXNzaW9uOiAibGlzdFF1ZXJ5LmVtYWlsIgogICAgfQogIH0pLCBfYygnZWwtaW5wdXQnLCB7CiAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgIHN0YXRpY1N0eWxlOiB7CiAgICAgICJ3aWR0aCI6ICIxNzBweCIKICAgIH0sCiAgICBhdHRyczogewogICAgICAicGxhY2Vob2xkZXIiOiAiQ29udGFjdCBudW1iZXIiLAogICAgICAiY2xlYXJhYmxlIjogIiIsCiAgICAgICJtYXhsZW5ndGgiOiAiMTAiCiAgICB9LAogICAgb246IHsKICAgICAgImlucHV0IjogX3ZtLmhhbmRsZUZpbHRlcgogICAgfSwKICAgIG1vZGVsOiB7CiAgICAgIHZhbHVlOiBfdm0ubGlzdFF1ZXJ5Wyd1c2VyQ29udGFjdC5jb250YWN0TnVtYmVyJ10sCiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoJCR2KSB7CiAgICAgICAgX3ZtLiRzZXQoX3ZtLmxpc3RRdWVyeSwgJ3VzZXJDb250YWN0LmNvbnRhY3ROdW1iZXInLCAkJHYpOwogICAgICB9LAogICAgICBleHByZXNzaW9uOiAibGlzdFF1ZXJ5Wyd1c2VyQ29udGFjdC5jb250YWN0TnVtYmVyJ10iCiAgICB9CiAgfSksIF9jKCdlbC1pbnB1dCcsIHsKICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgc3RhdGljU3R5bGU6IHsKICAgICAgIndpZHRoIjogIjE3MHB4IgogICAgfSwKICAgIGF0dHJzOiB7CiAgICAgICJwbGFjZWhvbGRlciI6ICJQaW5jb2RlIiwKICAgICAgImNsZWFyYWJsZSI6ICIiCiAgICB9LAogICAgb246IHsKICAgICAgImlucHV0IjogX3ZtLmhhbmRsZUZpbHRlcgogICAgfSwKICAgIG1vZGVsOiB7CiAgICAgIHZhbHVlOiBfdm0ubGlzdFF1ZXJ5LnBpbmNvZGUsCiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoJCR2KSB7CiAgICAgICAgX3ZtLiRzZXQoX3ZtLmxpc3RRdWVyeSwgInBpbmNvZGUiLCAkJHYpOwogICAgICB9LAogICAgICBleHByZXNzaW9uOiAibGlzdFF1ZXJ5LnBpbmNvZGUiCiAgICB9CiAgfSksIF9jKCdlbC1zZWxlY3QnLCB7CiAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgIHN0YXRpY1N0eWxlOiB7CiAgICAgICJ3aWR0aCI6ICIxNDBweCIKICAgIH0sCiAgICBvbjogewogICAgICAiY2hhbmdlIjogX3ZtLmhhbmRsZUZpbHRlcgogICAgfSwKICAgIG1vZGVsOiB7CiAgICAgIHZhbHVlOiBfdm0ubGlzdFF1ZXJ5LnNvcnQsCiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoJCR2KSB7CiAgICAgICAgX3ZtLiRzZXQoX3ZtLmxpc3RRdWVyeSwgInNvcnQiLCAkJHYpOwogICAgICB9LAogICAgICBleHByZXNzaW9uOiAibGlzdFF1ZXJ5LnNvcnQiCiAgICB9CiAgfSwgX3ZtLl9sKF92bS5zb3J0T3B0aW9ucywgZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHJldHVybiBfYygnZWwtb3B0aW9uJywgewogICAgICBrZXk6IGl0ZW0ua2V5LAogICAgICBhdHRyczogewogICAgICAgICJsYWJlbCI6IGl0ZW0ubGFiZWwsCiAgICAgICAgInZhbHVlIjogaXRlbS5rZXkKICAgICAgfQogICAgfSk7CiAgfSksIDEpLCBfYygnZWwtYnV0dG9uJywgewogICAgZGlyZWN0aXZlczogW3sKICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICB9XSwKICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgYXR0cnM6IHsKICAgICAgInR5cGUiOiAicHJpbWFyeSIsCiAgICAgICJpY29uIjogImVsLWljb24tc2VhcmNoIgogICAgfSwKICAgIG9uOiB7CiAgICAgICJjbGljayI6IF92bS5oYW5kbGVGaWx0ZXIKICAgIH0KICB9LCBbX3ZtLl92KCIgIiArIF92bS5fcyhfdm0uJHQoInRhYmxlLnNlYXJjaCIpKSArICIgIildKSwgX2MoJ3JvdXRlci1saW5rJywgewogICAgc3RhdGljQ2xhc3M6ICJtYXJnaW4taG9yaXpvbnRhbCIsCiAgICBhdHRyczogewogICAgICAidG8iOiAnL3VzZXIvYWRkJwogICAgfQogIH0sIFtfYygnZWwtYnV0dG9uJywgewogICAgZGlyZWN0aXZlczogW3sKICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICB9XSwKICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgYXR0cnM6IHsKICAgICAgInR5cGUiOiAicHJpbWFyeSIsCiAgICAgICJpY29uIjogImVsLWljb24tcGx1cyIKICAgIH0KICB9LCBbX3ZtLl92KCIgQWRkIERpc3RyaWJ1dG9yICIpXSldLCAxKSwgX2MoJ2VsLWJ1dHRvbicsIHsKICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgIG5hbWU6ICJ3YXZlcyIsCiAgICAgIHJhd05hbWU6ICJ2LXdhdmVzIgogICAgfV0sCiAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgIGF0dHJzOiB7CiAgICAgICJsb2FkaW5nIjogX3ZtLmRvd25sb2FkTG9hZGluZywKICAgICAgInR5cGUiOiAicHJpbWFyeSIsCiAgICAgICJpY29uIjogImVsLWljb24tZG93bmxvYWQiCiAgICB9LAogICAgb246IHsKICAgICAgImNsaWNrIjogX3ZtLmhhbmRsZURvd25sb2FkCiAgICB9CiAgfSwgW192bS5fdigiICIgKyBfdm0uX3MoX3ZtLiR0KCJ0YWJsZS5leHBvcnQiKSkgKyAiICIpXSksIF9jKCdlbC1idXR0b24nLCB7CiAgICBhdHRyczogewogICAgICAiZGlzYWJsZWQiOiBfdm0ubXVsdGlwbGVTZWxlY3Rpb24ubGVuZ3RoIDw9IDAsCiAgICAgICJ0eXBlIjogImRhbmdlciIsCiAgICAgICJpY29uIjogImVsLWljb24tZGVsZXRlIiwKICAgICAgInJvdW5kIjogIiIKICAgIH0sCiAgICBvbjogewogICAgICAiY2xpY2siOiBfdm0uaGFuZGxlTXVsdGlwbGVEZWxldGUKICAgIH0KICB9LCBbX3ZtLl92KCIgRGVsZXRlICIpXSksIF9jKCdlbC1jaGVja2JveCcsIHsKICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgc3RhdGljU3R5bGU6IHsKICAgICAgIm1hcmdpbi1sZWZ0IjogIjE1cHgiCiAgICB9LAogICAgb246IHsKICAgICAgImNoYW5nZSI6IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICBfdm0udGFibGVLZXkgPSBfdm0udGFibGVLZXkgKyAxOwogICAgICB9CiAgICB9LAogICAgbW9kZWw6IHsKICAgICAgdmFsdWU6IF92bS5zaG93Q3JlYXRlZERhdGUsCiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoJCR2KSB7CiAgICAgICAgX3ZtLnNob3dDcmVhdGVkRGF0ZSA9ICQkdjsKICAgICAgfSwKICAgICAgZXhwcmVzc2lvbjogInNob3dDcmVhdGVkRGF0ZSIKICAgIH0KICB9LCBbX3ZtLl92KCIgIiArIF92bS5fcyhfdm0uJHQoInRhYmxlLmNyZWF0ZWREYXRlIikpICsgIiAiKV0pXSwgMSksIF9jKCdlbC10YWJzJywgewogICAgYXR0cnM6IHsKICAgICAgInR5cGUiOiAiYm9yZGVyLWNhcmQiLAogICAgICAidmFsdWUiOiAiY25mIgogICAgfSwKICAgIG9uOiB7CiAgICAgICJ0YWItY2xpY2siOiBfdm0uaGFuZGxlQ2xpY2sKICAgIH0KICB9LCBbX2MoJ2VsLXRhYi1wYW5lJywgewogICAgYXR0cnM6IHsKICAgICAgImxhYmVsIjogIkNORiIsCiAgICAgICJuYW1lIjogImNuZiIKICAgIH0KICB9LCBbX2MoJ2VsLXRhYmxlJywgewogICAgZGlyZWN0aXZlczogW3sKICAgICAgbmFtZTogImxvYWRpbmciLAogICAgICByYXdOYW1lOiAidi1sb2FkaW5nIiwKICAgICAgdmFsdWU6IF92bS5saXN0TG9hZGluZywKICAgICAgZXhwcmVzc2lvbjogImxpc3RMb2FkaW5nIgogICAgfV0sCiAgICBrZXk6IF92bS50YWJsZUtleSwKICAgIHN0YXRpY1N0eWxlOiB7CiAgICAgICJ3aWR0aCI6ICIxMDAlIgogICAgfSwKICAgIGF0dHJzOiB7CiAgICAgICJkYXRhIjogX3ZtLmxpc3QsCiAgICAgICJib3JkZXIiOiAiIiwKICAgICAgImZpdCI6ICIiLAogICAgICAiaGlnaGxpZ2h0LWN1cnJlbnQtcm93IjogIiIKICAgIH0sCiAgICBvbjogewogICAgICAic29ydC1jaGFuZ2UiOiBfdm0uc29ydENoYW5nZQogICAgfQogIH0sIFtfYygnZWwtdGFibGUtY29sdW1uJywgewogICAgYXR0cnM6IHsKICAgICAgInNvcnRhYmxlIjogImN1c3RvbSIsCiAgICAgICJ3aWR0aCI6ICIxMDBweCIsCiAgICAgICJhbGlnbiI6ICJjZW50ZXIiLAogICAgICAibGFiZWwiOiBfdm0uJHQoJ3RhYmxlLmlkJyksCiAgICAgICJwcm9wIjogImlkIiwKICAgICAgImNsYXNzLW5hbWUiOiBfdm0uZ2V0U29ydENsYXNzKCdpZCcpCiAgICB9CiAgfSksIF9jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAid2lkdGgiOiAiOTAiLAogICAgICAiYWxpZ24iOiAiY2VudGVyIiwKICAgICAgImxhYmVsIjogIkVuYWJsZS9EaXNhYmxlIiwKICAgICAgInByb3AiOiAiIgogICAgfSwKICAgIHNjb3BlZFNsb3RzOiBfdm0uX3UoW3sKICAgICAga2V5OiAiZGVmYXVsdCIsCiAgICAgIGZuOiBmdW5jdGlvbiAoc2NvcGUpIHsKICAgICAgICByZXR1cm4gW19jKCdlbmFibGVkJywgewogICAgICAgICAga2V5OiBzY29wZS5yb3cuaWQsCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidXJsIjogJy91c2Vycy8nICsgc2NvcGUucm93LmlkCiAgICAgICAgICB9LAogICAgICAgICAgbW9kZWw6IHsKICAgICAgICAgICAgdmFsdWU6IHNjb3BlLnJvdy5lbmFibGVkLAogICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKCQkdikgewogICAgICAgICAgICAgIF92bS4kc2V0KHNjb3BlLnJvdywgImVuYWJsZWQiLCAkJHYpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBleHByZXNzaW9uOiAic2NvcGUucm93LmVuYWJsZWQiCiAgICAgICAgICB9CiAgICAgICAgfSldOwogICAgICB9CiAgICB9XSkKICB9KSwgX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJsYWJlbCI6ICJEaXN0cmlidXRvciBEZXRhaWxzIiwKICAgICAgIndpZHRoIjogIjM1MHB4IgogICAgfSwKICAgIHNjb3BlZFNsb3RzOiBfdm0uX3UoW3sKICAgICAga2V5OiAiZGVmYXVsdCIsCiAgICAgIGZuOiBmdW5jdGlvbiAoc2NvcGUpIHsKICAgICAgICByZXR1cm4gW19jKCdlbC1yb3cnLCB7CiAgICAgICAgICBzdGF0aWNTdHlsZTogewogICAgICAgICAgICAidGV4dC1hbGlnbiI6ICJsZWZ0IgogICAgICAgICAgfSwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogImZsZXgiLAogICAgICAgICAgICAianVzdGlmeSI6ICIiLAogICAgICAgICAgICAic3BhbiI6IDI0LAogICAgICAgICAgICAiZ3V0dGVyIjogMjAKICAgICAgICAgIH0KICAgICAgICB9LCBbX2MoJ2VsLWNvbCcsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJzcGFuIjogMTIKICAgICAgICAgIH0KICAgICAgICB9LCBbX2MoJ2InLCBbX3ZtLl92KCJOYW1lOiIpXSksIF92bS5fdigiwqDCoCIpLCBfYygnc3BhbicsIFtfdm0uX3YoX3ZtLl9zKHNjb3BlLnJvdy5mdWxsTmFtZSkpXSksIF9jKCdicicpLCBfYygnYnInKSwgX2MoJ2InLCBbX3ZtLl92KCJDb21wYW55IE5hbWU6IildKSwgX3ZtLl92KCLCoMKgIiksIF9jKCdzcGFuJywgW192bS5fdihfdm0uX3Moc2NvcGUucm93LmNvbXBhbnlOYW1lKSldKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfYygnYicsIFtfdm0uX3YoIkVtYWlsIEFkZHJlc3M6IildKSwgX3ZtLl92KCLCoMKgIiksIF9jKCdzcGFuJywgW192bS5fdihfdm0uX3Moc2NvcGUucm93LmVtYWlsKSldKSwgX2MoJ2JyJyksIF9jKCdicicpXSksIF9jKCdlbC1jb2wnLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAic3BhbiI6IDEyCiAgICAgICAgICB9CiAgICAgICAgfSwgW19jKCdiJywgW192bS5fdigiUGluY29kZSBOdW1iZXI6IildKSwgX3ZtLl92KCLCoMKgIiksIF9jKCdzcGFuJywgW192bS5fdihfdm0uX3Moc2NvcGUucm93LnBpbmNvZGUpKV0pLCBfYygnYnInKSwgX2MoJ2JyJyksIF9jKCdiJywgW192bS5fdigiQ2l0eSBOYW1lOiIpXSksIF92bS5fdigiwqDCoCIpLCBfYygnc3BhbicsIFtfdm0uX3YoX3ZtLl9zKHNjb3BlLnJvdy5jaXR5KSldKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfYygnYicsIFtfdm0uX3YoIlJlZ2lzdGVyZWQgTnVtYmVyOiIpXSksIF92bS5fdigiwqDCoCIpLCBfdm0uX2woc2NvcGUucm93LnVzZXJDb250YWN0LCBmdW5jdGlvbiAoY29udGFjdCkgewogICAgICAgICAgcmV0dXJuIF9jKCdzcGFuJywgewogICAgICAgICAgICBrZXk6IGNvbnRhY3QuaWQKICAgICAgICAgIH0sIFtfdm0uX3YoIiAiICsgX3ZtLl9zKGNvbnRhY3QuY29udGFjdE51bWJlcikpLCBfYygnYnInKSwgX2MoJ2JyJyldKTsKICAgICAgICB9KV0sIDIpXSwgMSldOwogICAgICB9CiAgICB9XSkKICB9KSwgX3ZtLnNob3dDcmVhdGVkRGF0ZSA/IF9jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAibGFiZWwiOiBfdm0uJHQoJ3RhYmxlLmNyZWF0ZWREYXRlJyksCiAgICAgICJ3aWR0aCI6ICIxNTBweCIsCiAgICAgICJhbGlnbiI6ICJjZW50ZXIiCiAgICB9LAogICAgc2NvcGVkU2xvdHM6IF92bS5fdShbewogICAgICBrZXk6ICJkZWZhdWx0IiwKICAgICAgZm46IGZ1bmN0aW9uIChzY29wZSkgewogICAgICAgIHJldHVybiBbX2MoJ3NwYW4nLCB7CiAgICAgICAgICBzdGF0aWNTdHlsZTogewogICAgICAgICAgICAiY29sb3IiOiAicmVkIgogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoX3ZtLl9zKF92bS5fZigibW9tZW50Iikoc2NvcGUucm93LmNyZWF0ZWRUaW1lc3RhbXAsICJmcm9tIikpKV0pXTsKICAgICAgfQogICAgfV0sIG51bGwsIGZhbHNlLCA5MTI1MjY4NzApCiAgfSkgOiBfdm0uX2UoKSwgdGhpcy5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgPyBfYygnZWwtdGFibGUtY29sdW1uJywgewogICAgYXR0cnM6IHsKICAgICAgImFsaWduIjogImNlbnRlciIsCiAgICAgICJsYWJlbCI6ICJDb252ZXJ0IiwKICAgICAgIndpZHRoIjogIjIyMCIKICAgIH0sCiAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgIGtleTogImRlZmF1bHQiLAogICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgcmV0dXJuIFtfYygnZWwtc2VsZWN0JywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInBsYWNlaG9sZGVyIjogIlNlbGVjdCIKICAgICAgICAgIH0sCiAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICB2YWx1ZTogc2NvcGUucm93LnN0YXR1cywKICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgkJHYpIHsKICAgICAgICAgICAgICBfdm0uJHNldChzY29wZS5yb3csICJzdGF0dXMiLCAkJHYpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBleHByZXNzaW9uOiAic2NvcGUucm93LnN0YXR1cyIKICAgICAgICAgIH0KICAgICAgICB9LCBfdm0uX2woX3ZtLnVzZXJMaXN0LCBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIF9jKCdlbC1vcHRpb24nLCB7CiAgICAgICAgICAgIGtleTogaXRlbS52YWx1ZSwKICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAibGFiZWwiOiBpdGVtLmxhYmVsLAogICAgICAgICAgICAgICJ2YWx1ZSI6IGl0ZW0udmFsdWUKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSksIDEpLCBfYygnYnInKSwgX2MoJ2JyJyksIF9jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAid2F2ZXMiLAogICAgICAgICAgICByYXdOYW1lOiAidi13YXZlcyIKICAgICAgICAgIH1dLAogICAgICAgICAgc3RhdGljQ2xhc3M6ICJmaWx0ZXItaXRlbSIsCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidHlwZSI6ICJzdWNjZXNzIgogICAgICAgICAgfSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICJjbGljayI6IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX3ZtLnVwZGF0ZURpc3RyaWJ1dG9yKHNjb3BlLnJvdyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBbX3ZtLl92KCIgQ29udmVydCAiKV0pXTsKICAgICAgfQogICAgfV0sIG51bGwsIGZhbHNlLCAxMjI4MjAxOTE5KQogIH0pIDogX3ZtLl9lKCksIF9jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAiYWxpZ24iOiAiY2VudGVyIiwKICAgICAgImxhYmVsIjogIkFzbSIsCiAgICAgICJ3aWR0aCI6ICIyMjAiCiAgICB9LAogICAgc2NvcGVkU2xvdHM6IF92bS5fdShbewogICAgICBrZXk6ICJkZWZhdWx0IiwKICAgICAgZm46IGZ1bmN0aW9uIChzY29wZSkgewogICAgICAgIHJldHVybiBbX2MoJ2VsLXNlbGVjdCcsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJwbGFjZWhvbGRlciI6ICJTZWxlY3QiCiAgICAgICAgICB9LAogICAgICAgICAgbW9kZWw6IHsKICAgICAgICAgICAgdmFsdWU6IHNjb3BlLnJvdy5zdXBlckFkbWluSWQsCiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoJCR2KSB7CiAgICAgICAgICAgICAgX3ZtLiRzZXQoc2NvcGUucm93LCAic3VwZXJBZG1pbklkIiwgJCR2KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXhwcmVzc2lvbjogInNjb3BlLnJvdy5zdXBlckFkbWluSWQiCiAgICAgICAgICB9CiAgICAgICAgfSwgX3ZtLl9sKF92bS5hc21MaXN0LCBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIF9jKCdlbC1vcHRpb24nLCB7CiAgICAgICAgICAgIGtleTogaXRlbS5pZCwKICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAibGFiZWwiOiBpdGVtLmZ1bGxOYW1lLAogICAgICAgICAgICAgICJ2YWx1ZSI6IGl0ZW0uaWQKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSksIDEpLCBfYygnYnInKSwgX2MoJ2JyJyksIF92bS5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgPyBfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICAgICAgICB9XSwKICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAic3VjY2VzcyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS51cGRhdGVBc20oc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBBc3NpZ24gQXNtICIpXSkgOiBfdm0uX2UoKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfdm0ucm9sZU5hbWUgPT0gJ3N1cGVyYWRtaW4nID8gX2MoJ2VsLWJ1dHRvbicsIHsKICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJ3YXZlcyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LXdhdmVzIgogICAgICAgICAgfV0sCiAgICAgICAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogInN1Y2Nlc3MiCiAgICAgICAgICB9LAogICAgICAgICAgb246IHsKICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiBfdm0ucmVtb3ZlQXNtKHNjb3BlLnJvdyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBbX3ZtLl92KCIgUmVtb3ZlIEFTTSAiKV0pIDogX3ZtLl9lKCldOwogICAgICB9CiAgICB9XSkKICB9KSwgdGhpcy5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgfHwgdGhpcy5yb2xlTmFtZSA9PSAnUlNNJyB8fCB0aGlzLnJvbGVOYW1lID09ICdab25hbCBIZWFkJyA/IF9jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAiYWxpZ24iOiAiY2VudGVyIiwKICAgICAgImxhYmVsIjogIlJzbSIsCiAgICAgICJ3aWR0aCI6ICIyMjAiCiAgICB9LAogICAgc2NvcGVkU2xvdHM6IF92bS5fdShbewogICAgICBrZXk6ICJkZWZhdWx0IiwKICAgICAgZm46IGZ1bmN0aW9uIChzY29wZSkgewogICAgICAgIHJldHVybiBbX2MoJ2VsLXNlbGVjdCcsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJwbGFjZWhvbGRlciI6ICJTZWxlY3QiCiAgICAgICAgICB9LAogICAgICAgICAgbW9kZWw6IHsKICAgICAgICAgICAgdmFsdWU6IHNjb3BlLnJvdy5yc21JZCwKICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgkJHYpIHsKICAgICAgICAgICAgICBfdm0uJHNldChzY29wZS5yb3csICJyc21JZCIsICQkdik7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGV4cHJlc3Npb246ICJzY29wZS5yb3cucnNtSWQiCiAgICAgICAgICB9CiAgICAgICAgfSwgX3ZtLl9sKF92bS5yc21MaXN0LCBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIF9jKCdlbC1vcHRpb24nLCB7CiAgICAgICAgICAgIGtleTogaXRlbS5pZCwKICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAibGFiZWwiOiBpdGVtLmZ1bGxOYW1lLAogICAgICAgICAgICAgICJ2YWx1ZSI6IGl0ZW0uaWQKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSksIDEpLCBfYygnYnInKSwgX2MoJ2JyJyksIF92bS5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgPyBfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICAgICAgICB9XSwKICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAic3VjY2VzcyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS51cGRhdGVSc20oc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBBc3NpZ24gUlNNICIpXSkgOiBfdm0uX2UoKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfdm0ucm9sZU5hbWUgPT0gJ3N1cGVyYWRtaW4nID8gX2MoJ2VsLWJ1dHRvbicsIHsKICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJ3YXZlcyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LXdhdmVzIgogICAgICAgICAgfV0sCiAgICAgICAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogInN1Y2Nlc3MiCiAgICAgICAgICB9LAogICAgICAgICAgb246IHsKICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiBfdm0ucmVtb3ZlUnNtKHNjb3BlLnJvdyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBbX3ZtLl92KCIgUmVtb3ZlIFJTTSAiKV0pIDogX3ZtLl9lKCldOwogICAgICB9CiAgICB9XSwgbnVsbCwgZmFsc2UsIDMwMjc5OTI2MzgpCiAgfSkgOiBfdm0uX2UoKSwgdGhpcy5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgfHwgdGhpcy5yb2xlTmFtZSA9PSAnWm9uYWwgSGVhZCcgPyBfYygnZWwtdGFibGUtY29sdW1uJywgewogICAgYXR0cnM6IHsKICAgICAgImFsaWduIjogImNlbnRlciIsCiAgICAgICJsYWJlbCI6ICJab25hbCBIZWFkIiwKICAgICAgIndpZHRoIjogIjIyMCIKICAgIH0sCiAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgIGtleTogImRlZmF1bHQiLAogICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgcmV0dXJuIFtfYygnZWwtc2VsZWN0JywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgImNsZWFyYWJsZSI6ICIiLAogICAgICAgICAgICAicGxhY2Vob2xkZXIiOiAiU2VsZWN0IgogICAgICAgICAgfSwKICAgICAgICAgIG1vZGVsOiB7CiAgICAgICAgICAgIHZhbHVlOiBzY29wZS5yb3cuem9uZUhlYWRJZCwKICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgkJHYpIHsKICAgICAgICAgICAgICBfdm0uJHNldChzY29wZS5yb3csICJ6b25lSGVhZElkIiwgJCR2KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXhwcmVzc2lvbjogInNjb3BlLnJvdy56b25lSGVhZElkIgogICAgICAgICAgfQogICAgICAgIH0sIF92bS5fbChfdm0uem9uYWxMaXN0LCBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIF9jKCdlbC1vcHRpb24nLCB7CiAgICAgICAgICAgIGtleTogaXRlbS5pZCwKICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAibGFiZWwiOiBpdGVtLmZ1bGxOYW1lLAogICAgICAgICAgICAgICJ2YWx1ZSI6IGl0ZW0uaWQKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSksIDEpLCBfYygnYnInKSwgX2MoJ2JyJyksIF92bS5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgPyBfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICAgICAgICB9XSwKICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAic3VjY2VzcyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS51cGRhdGVab25hbChzY29wZS5yb3cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdigiIEFzc2lnbiBab25hbCBIZWFkICIpXSkgOiBfdm0uX2UoKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfdm0ucm9sZU5hbWUgPT0gJ3N1cGVyYWRtaW4nID8gX2MoJ2VsLWJ1dHRvbicsIHsKICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJ3YXZlcyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LXdhdmVzIgogICAgICAgICAgfV0sCiAgICAgICAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogInN1Y2Nlc3MiCiAgICAgICAgICB9LAogICAgICAgICAgb246IHsKICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiBfdm0ucmVtb3ZlWm9uYWwoc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBSZW1vdmUgWm9uYWwgIildKSA6IF92bS5fZSgpXTsKICAgICAgfQogICAgfV0sIG51bGwsIGZhbHNlLCA0MDQyODgwOTE1KQogIH0pIDogX3ZtLl9lKCksIF92bS5teVJvbGUuaW5kZXhPZignc3VwZXJhZG1pbicpID4gLTEgPyBfYygnZWwtdGFibGUtY29sdW1uJywgewogICAgYXR0cnM6IHsKICAgICAgImFsaWduIjogImNlbnRlciIsCiAgICAgICJsYWJlbCI6IF92bS4kdCgndGFibGUuYWN0aW9ucycpLAogICAgICAid2lkdGgiOiAiMTgwIgogICAgfSwKICAgIHNjb3BlZFNsb3RzOiBfdm0uX3UoW3sKICAgICAga2V5OiAiZGVmYXVsdCIsCiAgICAgIGZuOiBmdW5jdGlvbiAoc2NvcGUpIHsKICAgICAgICByZXR1cm4gW19jKCdyb3V0ZXItbGluaycsIHsKICAgICAgICAgIHN0YXRpY0NsYXNzOiAibWFyZ2luLWhvcml6b250YWwiLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInRvIjogJy91c2VyQ29udGFjdC9saXN0LycgKyBzY29wZS5yb3cuaWQKICAgICAgICAgIH0KICAgICAgICB9LCBbX2MoJ2VsLWJ1dHRvbicsIHsKICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJ3YXZlcyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LXdhdmVzIgogICAgICAgICAgfV0sCiAgICAgICAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogInN1Y2Nlc3MiCiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdigiIEFkZCBDb250YWN0ICIpXSldLCAxKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfYygnZWwtcG9wb3ZlcicsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJwbGFjZW1lbnQiOiAicmlnaHQiLAogICAgICAgICAgICAid2lkdGgiOiAiNTAwIiwKICAgICAgICAgICAgInRyaWdnZXIiOiAiY2xpY2siCiAgICAgICAgICB9CiAgICAgICAgfSwgW19jKCdlbC10YWJsZScsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJkYXRhIjogX3ZtLnN0YXR1c0RldGFpbHMKICAgICAgICAgIH0KICAgICAgICB9LCBbX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ3aWR0aCI6ICIyMDAiLAogICAgICAgICAgICAicHJvcGVydHkiOiAiYWRtaW4uZnVsbE5hbWUiLAogICAgICAgICAgICAibGFiZWwiOiAiQWRtaW4gTmFtZSIKICAgICAgICAgIH0KICAgICAgICB9KSwgX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ3aWR0aCI6ICIyMDAiLAogICAgICAgICAgICAicHJvcGVydHkiOiAiIiwKICAgICAgICAgICAgImxhYmVsIjogInN0YXR1cyIKICAgICAgICAgIH0sCiAgICAgICAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgICAgICAgIGtleTogImRlZmF1bHQiLAogICAgICAgICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIFtzY29wZS5yb3cuc3RhdHVzID09IDEgPyBfYygnc3BhbicsIFtfdm0uX3YoIlVzZXIiKV0pIDogX3ZtLl9lKCksIHNjb3BlLnJvdy5zdGF0dXMgPT0gMiA/IF9jKCdzcGFuJywgW192bS5fdigiQ05GIildKSA6IF92bS5fZSgpLCBzY29wZS5yb3cuc3RhdHVzID09IDMgPyBfYygnc3BhbicsIFtfdm0uX3YoIlN1cGVyIFNvY2tldCIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSA0ID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJDRCIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSA1ID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJTRCIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSA2ID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJXQiIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSA3ID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJNUlAiKV0pIDogX3ZtLl9lKCksIHNjb3BlLnJvdy5zdGF0dXMgPT0gOCA/IF9jKCdzcGFuJywgW192bS5fdigiQ09QIildKSA6IF92bS5fZSgpLCBzY29wZS5yb3cuc3RhdHVzID09IDkgPyBfYygnc3BhbicsIFtfdm0uX3YoIlNPUCIpXSkgOiBfdm0uX2UoKV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH1dLCBudWxsLCB0cnVlKQogICAgICAgIH0pXSwgMSksIF9jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAibG9hZGluZyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LWxvYWRpbmciLAogICAgICAgICAgICB2YWx1ZTogX3ZtLnVzZXJTdGF0dXNMb2FkaW5nLAogICAgICAgICAgICBleHByZXNzaW9uOiAidXNlclN0YXR1c0xvYWRpbmciCiAgICAgICAgICB9XSwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJzbG90IjogInJlZmVyZW5jZSIsCiAgICAgICAgICAgICJzaXplIjogInNtYWxsIiwKICAgICAgICAgICAgInR5cGUiOiAid2FybmluZyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS5nZXRVc2VyU3RhdHVzTG9nKHNjb3BlLnJvdyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBzbG90OiAicmVmZXJlbmNlIgogICAgICAgIH0sIFtfdm0uX3YoIiBIaXN0b3J5ICIpXSldLCAxKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfYygncm91dGVyLWxpbmsnLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidG8iOiAnL3VzZXIvZWRpdC8nICsgc2NvcGUucm93LmlkCiAgICAgICAgICB9CiAgICAgICAgfSwgW19jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAid2F2ZXMiLAogICAgICAgICAgICByYXdOYW1lOiAidi13YXZlcyIKICAgICAgICAgIH1dLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAid2FybmluZyIsCiAgICAgICAgICAgICJzaXplIjogInNtYWxsIiwKICAgICAgICAgICAgImljb24iOiAiZWwtaWNvbi1lZGl0IgogICAgICAgICAgfQogICAgICAgIH0pXSwgMSldOwogICAgICB9CiAgICB9XSwgbnVsbCwgZmFsc2UsIDU0NDI0OTUxNSkKICB9KSA6IF92bS5fZSgpXSwgMSksIF9jKCdwYWdpbmF0aW9uJywgewogICAgZGlyZWN0aXZlczogW3sKICAgICAgbmFtZTogInNob3ciLAogICAgICByYXdOYW1lOiAidi1zaG93IiwKICAgICAgdmFsdWU6IF92bS50b3RhbCA+IDAsCiAgICAgIGV4cHJlc3Npb246ICJ0b3RhbCA+IDAiCiAgICB9XSwKICAgIGF0dHJzOiB7CiAgICAgICJ0b3RhbCI6IF92bS50b3RhbCwKICAgICAgInBhZ2UiOiBfdm0ubGlzdFF1ZXJ5LnBhZ2UsCiAgICAgICJsaW1pdCI6IF92bS5saXN0UXVlcnkubGltaXQKICAgIH0sCiAgICBvbjogewogICAgICAidXBkYXRlOnBhZ2UiOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgcmV0dXJuIF92bS4kc2V0KF92bS5saXN0UXVlcnksICJwYWdlIiwgJGV2ZW50KTsKICAgICAgfSwKICAgICAgInVwZGF0ZTpsaW1pdCI6IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICByZXR1cm4gX3ZtLiRzZXQoX3ZtLmxpc3RRdWVyeSwgImxpbWl0IiwgJGV2ZW50KTsKICAgICAgfSwKICAgICAgInBhZ2luYXRpb24iOiBfdm0uZ2V0TGlzdAogICAgfQogIH0pXSwgMSksIF9jKCdlbC10YWItcGFuZScsIHsKICAgIGF0dHJzOiB7CiAgICAgICJsYWJlbCI6ICJVc2VyIiwKICAgICAgIm5hbWUiOiAidXNlciIKICAgIH0KICB9LCBbX2MoJ2VsLXRhYmxlJywgewogICAgZGlyZWN0aXZlczogW3sKICAgICAgbmFtZTogImxvYWRpbmciLAogICAgICByYXdOYW1lOiAidi1sb2FkaW5nIiwKICAgICAgdmFsdWU6IF92bS5saXN0TG9hZGluZywKICAgICAgZXhwcmVzc2lvbjogImxpc3RMb2FkaW5nIgogICAgfV0sCiAgICBrZXk6IF92bS50YWJsZUtleSwKICAgIHN0YXRpY1N0eWxlOiB7CiAgICAgICJ3aWR0aCI6ICIxMDAlIgogICAgfSwKICAgIGF0dHJzOiB7CiAgICAgICJkYXRhIjogX3ZtLmxpc3QsCiAgICAgICJib3JkZXIiOiAiIiwKICAgICAgImZpdCI6ICIiLAogICAgICAiaGlnaGxpZ2h0LWN1cnJlbnQtcm93IjogIiIKICAgIH0sCiAgICBvbjogewogICAgICAic29ydC1jaGFuZ2UiOiBfdm0uc29ydENoYW5nZQogICAgfQogIH0sIFtfYygnZWwtdGFibGUtY29sdW1uJywgewogICAgYXR0cnM6IHsKICAgICAgInNvcnRhYmxlIjogImN1c3RvbSIsCiAgICAgICJ3aWR0aCI6ICIxMDBweCIsCiAgICAgICJhbGlnbiI6ICJjZW50ZXIiLAogICAgICAibGFiZWwiOiBfdm0uJHQoJ3RhYmxlLmlkJyksCiAgICAgICJwcm9wIjogImlkIiwKICAgICAgImNsYXNzLW5hbWUiOiBfdm0uZ2V0U29ydENsYXNzKCdpZCcpCiAgICB9CiAgfSksIF9jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAid2lkdGgiOiAiOTAiLAogICAgICAiYWxpZ24iOiAiY2VudGVyIiwKICAgICAgImxhYmVsIjogIkVuYWJsZS9EaXNhYmxlIiwKICAgICAgInByb3AiOiAiIgogICAgfSwKICAgIHNjb3BlZFNsb3RzOiBfdm0uX3UoW3sKICAgICAga2V5OiAiZGVmYXVsdCIsCiAgICAgIGZuOiBmdW5jdGlvbiAoc2NvcGUpIHsKICAgICAgICByZXR1cm4gW19jKCdlbmFibGVkJywgewogICAgICAgICAga2V5OiBzY29wZS5yb3cuaWQsCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidXJsIjogJy91c2Vycy8nICsgc2NvcGUucm93LmlkCiAgICAgICAgICB9LAogICAgICAgICAgbW9kZWw6IHsKICAgICAgICAgICAgdmFsdWU6IHNjb3BlLnJvdy5lbmFibGVkLAogICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKCQkdikgewogICAgICAgICAgICAgIF92bS4kc2V0KHNjb3BlLnJvdywgImVuYWJsZWQiLCAkJHYpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBleHByZXNzaW9uOiAic2NvcGUucm93LmVuYWJsZWQiCiAgICAgICAgICB9CiAgICAgICAgfSldOwogICAgICB9CiAgICB9XSkKICB9KSwgX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJsYWJlbCI6ICJEaXN0cmlidXRvciBEZXRhaWxzIiwKICAgICAgIndpZHRoIjogIjM1MHB4IgogICAgfSwKICAgIHNjb3BlZFNsb3RzOiBfdm0uX3UoW3sKICAgICAga2V5OiAiZGVmYXVsdCIsCiAgICAgIGZuOiBmdW5jdGlvbiAoc2NvcGUpIHsKICAgICAgICByZXR1cm4gW19jKCdlbC1yb3cnLCB7CiAgICAgICAgICBzdGF0aWNTdHlsZTogewogICAgICAgICAgICAidGV4dC1hbGlnbiI6ICJsZWZ0IgogICAgICAgICAgfSwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogImZsZXgiLAogICAgICAgICAgICAianVzdGlmeSI6ICIiLAogICAgICAgICAgICAic3BhbiI6IDI0LAogICAgICAgICAgICAiZ3V0dGVyIjogMjAKICAgICAgICAgIH0KICAgICAgICB9LCBbX2MoJ2VsLWNvbCcsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJzcGFuIjogMTIKICAgICAgICAgIH0KICAgICAgICB9LCBbX2MoJ2InLCBbX3ZtLl92KCJOYW1lOiIpXSksIF92bS5fdigiwqDCoCIpLCBfYygnc3BhbicsIFtfdm0uX3YoX3ZtLl9zKHNjb3BlLnJvdy5mdWxsTmFtZSkpXSksIF9jKCdicicpLCBfYygnYnInKSwgX2MoJ2InLCBbX3ZtLl92KCJDb21wYW55IE5hbWU6IildKSwgX3ZtLl92KCLCoMKgIiksIF9jKCdzcGFuJywgW192bS5fdihfdm0uX3Moc2NvcGUucm93LmNvbXBhbnlOYW1lKSldKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfYygnYicsIFtfdm0uX3YoIkVtYWlsIEFkZHJlc3M6IildKSwgX3ZtLl92KCLCoMKgIiksIF9jKCdzcGFuJywgW192bS5fdihfdm0uX3Moc2NvcGUucm93LmVtYWlsKSldKSwgX2MoJ2JyJyksIF9jKCdicicpXSksIF9jKCdlbC1jb2wnLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAic3BhbiI6IDEyCiAgICAgICAgICB9CiAgICAgICAgfSwgW19jKCdiJywgW192bS5fdigiUGluY29kZSBOdW1iZXI6IildKSwgX3ZtLl92KCLCoMKgIiksIF9jKCdzcGFuJywgW192bS5fdihfdm0uX3Moc2NvcGUucm93LnBpbmNvZGUpKV0pLCBfYygnYnInKSwgX2MoJ2JyJyksIF9jKCdiJywgW192bS5fdigiQ2l0eSBOYW1lOiIpXSksIF92bS5fdigiwqDCoCIpLCBfYygnc3BhbicsIFtfdm0uX3YoX3ZtLl9zKHNjb3BlLnJvdy5jaXR5KSldKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfYygnYicsIFtfdm0uX3YoIlJlZ2lzdGVyZWQgTnVtYmVyOiIpXSksIF92bS5fdigiwqDCoCIpLCBfdm0uX2woc2NvcGUucm93LnVzZXJDb250YWN0LCBmdW5jdGlvbiAoY29udGFjdCkgewogICAgICAgICAgcmV0dXJuIF9jKCdzcGFuJywgewogICAgICAgICAgICBrZXk6IGNvbnRhY3QuaWQKICAgICAgICAgIH0sIFtfdm0uX3YoIiAiICsgX3ZtLl9zKGNvbnRhY3QuY29udGFjdE51bWJlcikpLCBfYygnYnInKSwgX2MoJ2JyJyldKTsKICAgICAgICB9KV0sIDIpXSwgMSldOwogICAgICB9CiAgICB9XSkKICB9KSwgX3ZtLnNob3dDcmVhdGVkRGF0ZSA/IF9jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAibGFiZWwiOiBfdm0uJHQoJ3RhYmxlLmNyZWF0ZWREYXRlJyksCiAgICAgICJ3aWR0aCI6ICIxNTBweCIsCiAgICAgICJhbGlnbiI6ICJjZW50ZXIiCiAgICB9LAogICAgc2NvcGVkU2xvdHM6IF92bS5fdShbewogICAgICBrZXk6ICJkZWZhdWx0IiwKICAgICAgZm46IGZ1bmN0aW9uIChzY29wZSkgewogICAgICAgIHJldHVybiBbX2MoJ3NwYW4nLCB7CiAgICAgICAgICBzdGF0aWNTdHlsZTogewogICAgICAgICAgICAiY29sb3IiOiAicmVkIgogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoX3ZtLl9zKF92bS5fZigibW9tZW50Iikoc2NvcGUucm93LmNyZWF0ZWRUaW1lc3RhbXAsICJmcm9tIikpKV0pXTsKICAgICAgfQogICAgfV0sIG51bGwsIGZhbHNlLCA5MTI1MjY4NzApCiAgfSkgOiBfdm0uX2UoKSwgdGhpcy5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgPyBfYygnZWwtdGFibGUtY29sdW1uJywgewogICAgYXR0cnM6IHsKICAgICAgImFsaWduIjogImNlbnRlciIsCiAgICAgICJsYWJlbCI6ICJDb252ZXJ0IiwKICAgICAgIndpZHRoIjogIjIyMCIKICAgIH0sCiAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgIGtleTogImRlZmF1bHQiLAogICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgcmV0dXJuIFtfYygnZWwtc2VsZWN0JywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInBsYWNlaG9sZGVyIjogIlNlbGVjdCIKICAgICAgICAgIH0sCiAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICB2YWx1ZTogc2NvcGUucm93LnN0YXR1cywKICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgkJHYpIHsKICAgICAgICAgICAgICBfdm0uJHNldChzY29wZS5yb3csICJzdGF0dXMiLCAkJHYpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBleHByZXNzaW9uOiAic2NvcGUucm93LnN0YXR1cyIKICAgICAgICAgIH0KICAgICAgICB9LCBfdm0uX2woX3ZtLnVzZXJMaXN0LCBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIF9jKCdlbC1vcHRpb24nLCB7CiAgICAgICAgICAgIGtleTogaXRlbS52YWx1ZSwKICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAibGFiZWwiOiBpdGVtLmxhYmVsLAogICAgICAgICAgICAgICJ2YWx1ZSI6IGl0ZW0udmFsdWUKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSksIDEpLCBfYygnYnInKSwgX2MoJ2JyJyksIF9jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAid2F2ZXMiLAogICAgICAgICAgICByYXdOYW1lOiAidi13YXZlcyIKICAgICAgICAgIH1dLAogICAgICAgICAgc3RhdGljQ2xhc3M6ICJmaWx0ZXItaXRlbSIsCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidHlwZSI6ICJzdWNjZXNzIgogICAgICAgICAgfSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICJjbGljayI6IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX3ZtLnVwZGF0ZURpc3RyaWJ1dG9yKHNjb3BlLnJvdyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBbX3ZtLl92KCIgQ29udmVydCAiKV0pXTsKICAgICAgfQogICAgfV0sIG51bGwsIGZhbHNlLCAxMjI4MjAxOTE5KQogIH0pIDogX3ZtLl9lKCksIF9jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAiYWxpZ24iOiAiY2VudGVyIiwKICAgICAgImxhYmVsIjogIkFzbSIsCiAgICAgICJ3aWR0aCI6ICIyMjAiCiAgICB9LAogICAgc2NvcGVkU2xvdHM6IF92bS5fdShbewogICAgICBrZXk6ICJkZWZhdWx0IiwKICAgICAgZm46IGZ1bmN0aW9uIChzY29wZSkgewogICAgICAgIHJldHVybiBbX2MoJ2VsLXNlbGVjdCcsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJwbGFjZWhvbGRlciI6ICJTZWxlY3QiCiAgICAgICAgICB9LAogICAgICAgICAgbW9kZWw6IHsKICAgICAgICAgICAgdmFsdWU6IHNjb3BlLnJvdy5zdXBlckFkbWluSWQsCiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoJCR2KSB7CiAgICAgICAgICAgICAgX3ZtLiRzZXQoc2NvcGUucm93LCAic3VwZXJBZG1pbklkIiwgJCR2KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXhwcmVzc2lvbjogInNjb3BlLnJvdy5zdXBlckFkbWluSWQiCiAgICAgICAgICB9CiAgICAgICAgfSwgX3ZtLl9sKF92bS5hc21MaXN0LCBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIF9jKCdlbC1vcHRpb24nLCB7CiAgICAgICAgICAgIGtleTogaXRlbS5pZCwKICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAibGFiZWwiOiBpdGVtLmZ1bGxOYW1lLAogICAgICAgICAgICAgICJ2YWx1ZSI6IGl0ZW0uaWQKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSksIDEpLCBfYygnYnInKSwgX2MoJ2JyJyksIF92bS5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgPyBfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICAgICAgICB9XSwKICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAic3VjY2VzcyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS51cGRhdGVBc20oc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBBc3NpZ24gQXNtICIpXSkgOiBfdm0uX2UoKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfdm0ucm9sZU5hbWUgPT0gJ3N1cGVyYWRtaW4nID8gX2MoJ2VsLWJ1dHRvbicsIHsKICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJ3YXZlcyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LXdhdmVzIgogICAgICAgICAgfV0sCiAgICAgICAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogInN1Y2Nlc3MiCiAgICAgICAgICB9LAogICAgICAgICAgb246IHsKICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiBfdm0ucmVtb3ZlQXNtKHNjb3BlLnJvdyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBbX3ZtLl92KCIgUmVtb3ZlIEFTTSAiKV0pIDogX3ZtLl9lKCldOwogICAgICB9CiAgICB9XSkKICB9KSwgdGhpcy5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgfHwgdGhpcy5yb2xlTmFtZSA9PSAnUlNNJyB8fCB0aGlzLnJvbGVOYW1lID09ICdab25hbCBIZWFkJyA/IF9jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAiYWxpZ24iOiAiY2VudGVyIiwKICAgICAgImxhYmVsIjogIlJzbSIsCiAgICAgICJ3aWR0aCI6ICIyMjAiCiAgICB9LAogICAgc2NvcGVkU2xvdHM6IF92bS5fdShbewogICAgICBrZXk6ICJkZWZhdWx0IiwKICAgICAgZm46IGZ1bmN0aW9uIChzY29wZSkgewogICAgICAgIHJldHVybiBbX2MoJ2VsLXNlbGVjdCcsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJwbGFjZWhvbGRlciI6ICJTZWxlY3QiCiAgICAgICAgICB9LAogICAgICAgICAgbW9kZWw6IHsKICAgICAgICAgICAgdmFsdWU6IHNjb3BlLnJvdy5yc21JZCwKICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgkJHYpIHsKICAgICAgICAgICAgICBfdm0uJHNldChzY29wZS5yb3csICJyc21JZCIsICQkdik7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGV4cHJlc3Npb246ICJzY29wZS5yb3cucnNtSWQiCiAgICAgICAgICB9CiAgICAgICAgfSwgX3ZtLl9sKF92bS5yc21MaXN0LCBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIF9jKCdlbC1vcHRpb24nLCB7CiAgICAgICAgICAgIGtleTogaXRlbS5pZCwKICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAibGFiZWwiOiBpdGVtLmZ1bGxOYW1lLAogICAgICAgICAgICAgICJ2YWx1ZSI6IGl0ZW0uaWQKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSksIDEpLCBfYygnYnInKSwgX2MoJ2JyJyksIF92bS5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgPyBfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICAgICAgICB9XSwKICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAic3VjY2VzcyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS51cGRhdGVSc20oc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBBc3NpZ24gUlNNICIpXSkgOiBfdm0uX2UoKSwgX3ZtLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyA/IF9jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAid2F2ZXMiLAogICAgICAgICAgICByYXdOYW1lOiAidi13YXZlcyIKICAgICAgICAgIH1dLAogICAgICAgICAgc3RhdGljQ2xhc3M6ICJmaWx0ZXItaXRlbSIsCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidHlwZSI6ICJzdWNjZXNzIgogICAgICAgICAgfSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICJjbGljayI6IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX3ZtLnJlbW92ZVJzbShzY29wZS5yb3cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdigiIFJlbW92ZSBSU00gIildKSA6IF92bS5fZSgpXTsKICAgICAgfQogICAgfV0sIG51bGwsIGZhbHNlLCA2NDc0NzY5NTgpCiAgfSkgOiBfdm0uX2UoKSwgdGhpcy5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgfHwgdGhpcy5yb2xlTmFtZSA9PSAnWm9uYWwgSGVhZCcgPyBfYygnZWwtdGFibGUtY29sdW1uJywgewogICAgYXR0cnM6IHsKICAgICAgImFsaWduIjogImNlbnRlciIsCiAgICAgICJsYWJlbCI6ICJab25hbCBIZWFkIiwKICAgICAgIndpZHRoIjogIjIyMCIKICAgIH0sCiAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgIGtleTogImRlZmF1bHQiLAogICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgcmV0dXJuIFtfYygnZWwtc2VsZWN0JywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInBsYWNlaG9sZGVyIjogIlNlbGVjdCIKICAgICAgICAgIH0sCiAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICB2YWx1ZTogc2NvcGUucm93LnpvbmVIZWFkSWQsCiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoJCR2KSB7CiAgICAgICAgICAgICAgX3ZtLiRzZXQoc2NvcGUucm93LCAiem9uZUhlYWRJZCIsICQkdik7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGV4cHJlc3Npb246ICJzY29wZS5yb3cuem9uZUhlYWRJZCIKICAgICAgICAgIH0KICAgICAgICB9LCBfdm0uX2woX3ZtLnpvbmFsTGlzdCwgZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBfYygnZWwtb3B0aW9uJywgewogICAgICAgICAgICBrZXk6IGl0ZW0uaWQsCiAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgImxhYmVsIjogaXRlbS5mdWxsTmFtZSwKICAgICAgICAgICAgICAidmFsdWUiOiBpdGVtLmlkCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pLCAxKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfdm0ucm9sZU5hbWUgPT0gJ3N1cGVyYWRtaW4nID8gX2MoJ2VsLWJ1dHRvbicsIHsKICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJ3YXZlcyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LXdhdmVzIgogICAgICAgICAgfV0sCiAgICAgICAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogInN1Y2Nlc3MiCiAgICAgICAgICB9LAogICAgICAgICAgb246IHsKICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiBfdm0udXBkYXRlWm9uYWwoc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBBc3NpZ24gWm9uYWwgSGVhZCAiKV0pIDogX3ZtLl9lKCksIF9jKCdicicpLCBfYygnYnInKSwgX3ZtLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyA/IF9jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAid2F2ZXMiLAogICAgICAgICAgICByYXdOYW1lOiAidi13YXZlcyIKICAgICAgICAgIH1dLAogICAgICAgICAgc3RhdGljQ2xhc3M6ICJmaWx0ZXItaXRlbSIsCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidHlwZSI6ICJzdWNjZXNzIgogICAgICAgICAgfSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICJjbGljayI6IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX3ZtLnJlbW92ZVpvbmFsKHNjb3BlLnJvdyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBbX3ZtLl92KCIgUmVtb3ZlIFpvbmFsICIpXSkgOiBfdm0uX2UoKV07CiAgICAgIH0KICAgIH1dLCBudWxsLCBmYWxzZSwgMTA5NjMxMTQxNCkKICB9KSA6IF92bS5fZSgpLCBfdm0ubXlSb2xlLmluZGV4T2YoJ3N1cGVyYWRtaW4nKSA+IC0xID8gX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJhbGlnbiI6ICJjZW50ZXIiLAogICAgICAibGFiZWwiOiBfdm0uJHQoJ3RhYmxlLmFjdGlvbnMnKSwKICAgICAgIndpZHRoIjogIjE4MCIKICAgIH0sCiAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgIGtleTogImRlZmF1bHQiLAogICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgcmV0dXJuIFtfYygncm91dGVyLWxpbmsnLCB7CiAgICAgICAgICBzdGF0aWNDbGFzczogIm1hcmdpbi1ob3Jpem9udGFsIiwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0byI6ICcvdXNlckNvbnRhY3QvbGlzdC8nICsgc2NvcGUucm93LmlkCiAgICAgICAgICB9CiAgICAgICAgfSwgW19jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAid2F2ZXMiLAogICAgICAgICAgICByYXdOYW1lOiAidi13YXZlcyIKICAgICAgICAgIH1dLAogICAgICAgICAgc3RhdGljQ2xhc3M6ICJmaWx0ZXItaXRlbSIsCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidHlwZSI6ICJzdWNjZXNzIgogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBBZGQgQ29udGFjdCAiKV0pXSwgMSksIF9jKCdicicpLCBfYygnYnInKSwgX2MoJ2VsLXBvcG92ZXInLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAicGxhY2VtZW50IjogInJpZ2h0IiwKICAgICAgICAgICAgIndpZHRoIjogIjUwMCIsCiAgICAgICAgICAgICJ0cmlnZ2VyIjogImNsaWNrIgogICAgICAgICAgfQogICAgICAgIH0sIFtfYygnZWwtdGFibGUnLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAiZGF0YSI6IF92bS5zdGF0dXNEZXRhaWxzCiAgICAgICAgICB9CiAgICAgICAgfSwgW19jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAid2lkdGgiOiAiMjAwIiwKICAgICAgICAgICAgInByb3BlcnR5IjogImFkbWluLmZ1bGxOYW1lIiwKICAgICAgICAgICAgImxhYmVsIjogIkFkbWluIE5hbWUiCiAgICAgICAgICB9CiAgICAgICAgfSksIF9jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAid2lkdGgiOiAiMjAwIiwKICAgICAgICAgICAgInByb3BlcnR5IjogIiIsCiAgICAgICAgICAgICJsYWJlbCI6ICJzdGF0dXMiCiAgICAgICAgICB9LAogICAgICAgICAgc2NvcGVkU2xvdHM6IF92bS5fdShbewogICAgICAgICAgICBrZXk6ICJkZWZhdWx0IiwKICAgICAgICAgICAgZm46IGZ1bmN0aW9uIChzY29wZSkgewogICAgICAgICAgICAgIHJldHVybiBbc2NvcGUucm93LnN0YXR1cyA9PSAxID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJVc2VyIildKSA6IF92bS5fZSgpLCBzY29wZS5yb3cuc3RhdHVzID09IDIgPyBfYygnc3BhbicsIFtfdm0uX3YoIkNORiIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSAzID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJTdXBlciBTb2NrZXQiKV0pIDogX3ZtLl9lKCksIHNjb3BlLnJvdy5zdGF0dXMgPT0gNCA/IF9jKCdzcGFuJywgW192bS5fdigiQ0QiKV0pIDogX3ZtLl9lKCksIHNjb3BlLnJvdy5zdGF0dXMgPT0gNSA/IF9jKCdzcGFuJywgW192bS5fdigiU0QiKV0pIDogX3ZtLl9lKCksIHNjb3BlLnJvdy5zdGF0dXMgPT0gNiA/IF9jKCdzcGFuJywgW192bS5fdigiV0IiKV0pIDogX3ZtLl9lKCksIHNjb3BlLnJvdy5zdGF0dXMgPT0gNyA/IF9jKCdzcGFuJywgW192bS5fdigiTVJQIildKSA6IF92bS5fZSgpLCBzY29wZS5yb3cuc3RhdHVzID09IDggPyBfYygnc3BhbicsIFtfdm0uX3YoIkNPUCIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSA5ID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJTT1AiKV0pIDogX3ZtLl9lKCldOwogICAgICAgICAgICB9CiAgICAgICAgICB9XSwgbnVsbCwgdHJ1ZSkKICAgICAgICB9KV0sIDEpLCBfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogImxvYWRpbmciLAogICAgICAgICAgICByYXdOYW1lOiAidi1sb2FkaW5nIiwKICAgICAgICAgICAgdmFsdWU6IF92bS51c2VyU3RhdHVzTG9hZGluZywKICAgICAgICAgICAgZXhwcmVzc2lvbjogInVzZXJTdGF0dXNMb2FkaW5nIgogICAgICAgICAgfV0sCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAic2xvdCI6ICJyZWZlcmVuY2UiLAogICAgICAgICAgICAic2l6ZSI6ICJzbWFsbCIsCiAgICAgICAgICAgICJ0eXBlIjogIndhcm5pbmciCiAgICAgICAgICB9LAogICAgICAgICAgb246IHsKICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiBfdm0uZ2V0VXNlclN0YXR1c0xvZyhzY29wZS5yb3cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgc2xvdDogInJlZmVyZW5jZSIKICAgICAgICB9LCBbX3ZtLl92KCIgSGlzdG9yeSAiKV0pXSwgMSksIF9jKCdicicpLCBfYygnYnInKSwgX2MoJ3JvdXRlci1saW5rJywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInRvIjogJy91c2VyL2VkaXQvJyArIHNjb3BlLnJvdy5pZAogICAgICAgICAgfQogICAgICAgIH0sIFtfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICAgICAgICB9XSwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogIndhcm5pbmciLAogICAgICAgICAgICAic2l6ZSI6ICJzbWFsbCIsCiAgICAgICAgICAgICJpY29uIjogImVsLWljb24tZWRpdCIKICAgICAgICAgIH0KICAgICAgICB9KV0sIDEpXTsKICAgICAgfQogICAgfV0sIG51bGwsIGZhbHNlLCA1NDQyNDk1MTUpCiAgfSkgOiBfdm0uX2UoKV0sIDEpLCBfYygncGFnaW5hdGlvbicsIHsKICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgIG5hbWU6ICJzaG93IiwKICAgICAgcmF3TmFtZTogInYtc2hvdyIsCiAgICAgIHZhbHVlOiBfdm0udG90YWwgPiAwLAogICAgICBleHByZXNzaW9uOiAidG90YWwgPiAwIgogICAgfV0sCiAgICBhdHRyczogewogICAgICAidG90YWwiOiBfdm0udG90YWwsCiAgICAgICJwYWdlIjogX3ZtLmxpc3RRdWVyeS5wYWdlLAogICAgICAibGltaXQiOiBfdm0ubGlzdFF1ZXJ5LmxpbWl0CiAgICB9LAogICAgb246IHsKICAgICAgInVwZGF0ZTpwYWdlIjogZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgIHJldHVybiBfdm0uJHNldChfdm0ubGlzdFF1ZXJ5LCAicGFnZSIsICRldmVudCk7CiAgICAgIH0sCiAgICAgICJ1cGRhdGU6bGltaXQiOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgcmV0dXJuIF92bS4kc2V0KF92bS5saXN0UXVlcnksICJsaW1pdCIsICRldmVudCk7CiAgICAgIH0sCiAgICAgICJwYWdpbmF0aW9uIjogX3ZtLmdldExpc3QKICAgIH0KICB9KV0sIDEpLCBfYygnZWwtdGFiLXBhbmUnLCB7CiAgICBhdHRyczogewogICAgICAibGFiZWwiOiAiU3VwZXIgU3RvY2tpc3QiLAogICAgICAibmFtZSI6ICJzdXBlcnN0b2NraXN0IgogICAgfQogIH0sIFtfYygnZWwtdGFibGUnLCB7CiAgICBkaXJlY3RpdmVzOiBbewogICAgICBuYW1lOiAibG9hZGluZyIsCiAgICAgIHJhd05hbWU6ICJ2LWxvYWRpbmciLAogICAgICB2YWx1ZTogX3ZtLmxpc3RMb2FkaW5nLAogICAgICBleHByZXNzaW9uOiAibGlzdExvYWRpbmciCiAgICB9XSwKICAgIGtleTogX3ZtLnRhYmxlS2V5LAogICAgc3RhdGljU3R5bGU6IHsKICAgICAgIndpZHRoIjogIjEwMCUiCiAgICB9LAogICAgYXR0cnM6IHsKICAgICAgImRhdGEiOiBfdm0ubGlzdCwKICAgICAgImJvcmRlciI6ICIiLAogICAgICAiZml0IjogIiIsCiAgICAgICJoaWdobGlnaHQtY3VycmVudC1yb3ciOiAiIgogICAgfSwKICAgIG9uOiB7CiAgICAgICJzb3J0LWNoYW5nZSI6IF92bS5zb3J0Q2hhbmdlCiAgICB9CiAgfSwgW19jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAic29ydGFibGUiOiAiY3VzdG9tIiwKICAgICAgIndpZHRoIjogIjEwMHB4IiwKICAgICAgImFsaWduIjogImNlbnRlciIsCiAgICAgICJsYWJlbCI6IF92bS4kdCgndGFibGUuaWQnKSwKICAgICAgInByb3AiOiAiaWQiLAogICAgICAiY2xhc3MtbmFtZSI6IF92bS5nZXRTb3J0Q2xhc3MoJ2lkJykKICAgIH0KICB9KSwgX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJ3aWR0aCI6ICI5MCIsCiAgICAgICJhbGlnbiI6ICJjZW50ZXIiLAogICAgICAibGFiZWwiOiAiRW5hYmxlL0Rpc2FibGUiLAogICAgICAicHJvcCI6ICIiCiAgICB9LAogICAgc2NvcGVkU2xvdHM6IF92bS5fdShbewogICAgICBrZXk6ICJkZWZhdWx0IiwKICAgICAgZm46IGZ1bmN0aW9uIChzY29wZSkgewogICAgICAgIHJldHVybiBbX2MoJ2VuYWJsZWQnLCB7CiAgICAgICAgICBrZXk6IHNjb3BlLnJvdy5pZCwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ1cmwiOiAnL3VzZXJzLycgKyBzY29wZS5yb3cuaWQKICAgICAgICAgIH0sCiAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICB2YWx1ZTogc2NvcGUucm93LmVuYWJsZWQsCiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoJCR2KSB7CiAgICAgICAgICAgICAgX3ZtLiRzZXQoc2NvcGUucm93LCAiZW5hYmxlZCIsICQkdik7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGV4cHJlc3Npb246ICJzY29wZS5yb3cuZW5hYmxlZCIKICAgICAgICAgIH0KICAgICAgICB9KV07CiAgICAgIH0KICAgIH1dKQogIH0pLCBfYygnZWwtdGFibGUtY29sdW1uJywgewogICAgYXR0cnM6IHsKICAgICAgImxhYmVsIjogIkRpc3RyaWJ1dG9yIERldGFpbHMiLAogICAgICAid2lkdGgiOiAiMzUwcHgiCiAgICB9LAogICAgc2NvcGVkU2xvdHM6IF92bS5fdShbewogICAgICBrZXk6ICJkZWZhdWx0IiwKICAgICAgZm46IGZ1bmN0aW9uIChzY29wZSkgewogICAgICAgIHJldHVybiBbX2MoJ2VsLXJvdycsIHsKICAgICAgICAgIHN0YXRpY1N0eWxlOiB7CiAgICAgICAgICAgICJ0ZXh0LWFsaWduIjogImxlZnQiCiAgICAgICAgICB9LAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAiZmxleCIsCiAgICAgICAgICAgICJqdXN0aWZ5IjogIiIsCiAgICAgICAgICAgICJzcGFuIjogMjQsCiAgICAgICAgICAgICJndXR0ZXIiOiAyMAogICAgICAgICAgfQogICAgICAgIH0sIFtfYygnZWwtY29sJywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInNwYW4iOiAxMgogICAgICAgICAgfQogICAgICAgIH0sIFtfYygnYicsIFtfdm0uX3YoIk5hbWU6IildKSwgX3ZtLl92KCLCoMKgIiksIF9jKCdzcGFuJywgW192bS5fdihfdm0uX3Moc2NvcGUucm93LmZ1bGxOYW1lKSldKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfYygnYicsIFtfdm0uX3YoIkNvbXBhbnkgTmFtZToiKV0pLCBfdm0uX3YoIsKgwqAiKSwgX2MoJ3NwYW4nLCBbX3ZtLl92KF92bS5fcyhzY29wZS5yb3cuY29tcGFueU5hbWUpKV0pLCBfYygnYnInKSwgX2MoJ2JyJyksIF9jKCdiJywgW192bS5fdigiRW1haWwgQWRkcmVzczoiKV0pLCBfdm0uX3YoIsKgwqAiKSwgX2MoJ3NwYW4nLCBbX3ZtLl92KF92bS5fcyhzY29wZS5yb3cuZW1haWwpKV0pLCBfYygnYnInKSwgX2MoJ2JyJyldKSwgX2MoJ2VsLWNvbCcsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJzcGFuIjogMTIKICAgICAgICAgIH0KICAgICAgICB9LCBbX2MoJ2InLCBbX3ZtLl92KCJQaW5jb2RlIE51bWJlcjoiKV0pLCBfdm0uX3YoIsKgwqAiKSwgX2MoJ3NwYW4nLCBbX3ZtLl92KF92bS5fcyhzY29wZS5yb3cucGluY29kZSkpXSksIF9jKCdicicpLCBfYygnYnInKSwgX2MoJ2InLCBbX3ZtLl92KCJDaXR5IE5hbWU6IildKSwgX3ZtLl92KCLCoMKgIiksIF9jKCdzcGFuJywgW192bS5fdihfdm0uX3Moc2NvcGUucm93LmNpdHkpKV0pLCBfYygnYnInKSwgX2MoJ2JyJyksIF9jKCdiJywgW192bS5fdigiUmVnaXN0ZXJlZCBOdW1iZXI6IildKSwgX3ZtLl92KCLCoMKgIiksIF92bS5fbChzY29wZS5yb3cudXNlckNvbnRhY3QsIGZ1bmN0aW9uIChjb250YWN0KSB7CiAgICAgICAgICByZXR1cm4gX2MoJ3NwYW4nLCB7CiAgICAgICAgICAgIGtleTogY29udGFjdC5pZAogICAgICAgICAgfSwgW192bS5fdigiICIgKyBfdm0uX3MoY29udGFjdC5jb250YWN0TnVtYmVyKSksIF9jKCdicicpLCBfYygnYnInKV0pOwogICAgICAgIH0pXSwgMildLCAxKV07CiAgICAgIH0KICAgIH1dKQogIH0pLCBfdm0uc2hvd0NyZWF0ZWREYXRlID8gX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJsYWJlbCI6IF92bS4kdCgndGFibGUuY3JlYXRlZERhdGUnKSwKICAgICAgIndpZHRoIjogIjE1MHB4IiwKICAgICAgImFsaWduIjogImNlbnRlciIKICAgIH0sCiAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgIGtleTogImRlZmF1bHQiLAogICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgcmV0dXJuIFtfYygnc3BhbicsIHsKICAgICAgICAgIHN0YXRpY1N0eWxlOiB7CiAgICAgICAgICAgICJjb2xvciI6ICJyZWQiCiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdihfdm0uX3MoX3ZtLl9mKCJtb21lbnQiKShzY29wZS5yb3cuY3JlYXRlZFRpbWVzdGFtcCwgImZyb20iKSkpXSldOwogICAgICB9CiAgICB9XSwgbnVsbCwgZmFsc2UsIDkxMjUyNjg3MCkKICB9KSA6IF92bS5fZSgpLCB0aGlzLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyA/IF9jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAiYWxpZ24iOiAiY2VudGVyIiwKICAgICAgImxhYmVsIjogIkNvbnZlcnQiLAogICAgICAid2lkdGgiOiAiMjIwIgogICAgfSwKICAgIHNjb3BlZFNsb3RzOiBfdm0uX3UoW3sKICAgICAga2V5OiAiZGVmYXVsdCIsCiAgICAgIGZuOiBmdW5jdGlvbiAoc2NvcGUpIHsKICAgICAgICByZXR1cm4gW19jKCdlbC1zZWxlY3QnLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAicGxhY2Vob2xkZXIiOiAiU2VsZWN0IgogICAgICAgICAgfSwKICAgICAgICAgIG1vZGVsOiB7CiAgICAgICAgICAgIHZhbHVlOiBzY29wZS5yb3cuc3RhdHVzLAogICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKCQkdikgewogICAgICAgICAgICAgIF92bS4kc2V0KHNjb3BlLnJvdywgInN0YXR1cyIsICQkdik7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGV4cHJlc3Npb246ICJzY29wZS5yb3cuc3RhdHVzIgogICAgICAgICAgfQogICAgICAgIH0sIF92bS5fbChfdm0udXNlckxpc3QsIGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gX2MoJ2VsLW9wdGlvbicsIHsKICAgICAgICAgICAga2V5OiBpdGVtLnZhbHVlLAogICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICJsYWJlbCI6IGl0ZW0ubGFiZWwsCiAgICAgICAgICAgICAgInZhbHVlIjogaXRlbS52YWx1ZQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KSwgMSksIF9jKCdicicpLCBfYygnYnInKSwgX2MoJ2VsLWJ1dHRvbicsIHsKICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJ3YXZlcyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LXdhdmVzIgogICAgICAgICAgfV0sCiAgICAgICAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogInN1Y2Nlc3MiCiAgICAgICAgICB9LAogICAgICAgICAgb246IHsKICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiBfdm0udXBkYXRlRGlzdHJpYnV0b3Ioc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBDb252ZXJ0ICIpXSldOwogICAgICB9CiAgICB9XSwgbnVsbCwgZmFsc2UsIDEyMjgyMDE5MTkpCiAgfSkgOiBfdm0uX2UoKSwgX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJhbGlnbiI6ICJjZW50ZXIiLAogICAgICAibGFiZWwiOiAiQXNtIiwKICAgICAgIndpZHRoIjogIjIyMCIKICAgIH0sCiAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgIGtleTogImRlZmF1bHQiLAogICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgcmV0dXJuIFtfYygnZWwtc2VsZWN0JywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInBsYWNlaG9sZGVyIjogIlNlbGVjdCIKICAgICAgICAgIH0sCiAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICB2YWx1ZTogc2NvcGUucm93LnN1cGVyQWRtaW5JZCwKICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgkJHYpIHsKICAgICAgICAgICAgICBfdm0uJHNldChzY29wZS5yb3csICJzdXBlckFkbWluSWQiLCAkJHYpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBleHByZXNzaW9uOiAic2NvcGUucm93LnN1cGVyQWRtaW5JZCIKICAgICAgICAgIH0KICAgICAgICB9LCBfdm0uX2woX3ZtLmFzbUxpc3QsIGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gX2MoJ2VsLW9wdGlvbicsIHsKICAgICAgICAgICAga2V5OiBpdGVtLmlkLAogICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICJsYWJlbCI6IGl0ZW0uZnVsbE5hbWUsCiAgICAgICAgICAgICAgInZhbHVlIjogaXRlbS5pZAogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KSwgMSksIF9jKCdicicpLCBfYygnYnInKSwgX3ZtLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyA/IF9jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAid2F2ZXMiLAogICAgICAgICAgICByYXdOYW1lOiAidi13YXZlcyIKICAgICAgICAgIH1dLAogICAgICAgICAgc3RhdGljQ2xhc3M6ICJmaWx0ZXItaXRlbSIsCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidHlwZSI6ICJzdWNjZXNzIgogICAgICAgICAgfSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICJjbGljayI6IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX3ZtLnVwZGF0ZUFzbShzY29wZS5yb3cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdigiIEFzc2lnbiBBc20gIildKSA6IF92bS5fZSgpLCBfYygnYnInKSwgX2MoJ2JyJyksIF92bS5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgPyBfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICAgICAgICB9XSwKICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAic3VjY2VzcyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS5yZW1vdmVBc20oc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBSZW1vdmUgQVNNICIpXSkgOiBfdm0uX2UoKV07CiAgICAgIH0KICAgIH1dKQogIH0pLCB0aGlzLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyB8fCB0aGlzLnJvbGVOYW1lID09ICdSU00nIHx8IHRoaXMucm9sZU5hbWUgPT0gJ1pvbmFsIEhlYWQnID8gX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJhbGlnbiI6ICJjZW50ZXIiLAogICAgICAibGFiZWwiOiAiUnNtIiwKICAgICAgIndpZHRoIjogIjIyMCIKICAgIH0sCiAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgIGtleTogImRlZmF1bHQiLAogICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgcmV0dXJuIFtfYygnZWwtc2VsZWN0JywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInBsYWNlaG9sZGVyIjogIlNlbGVjdCIKICAgICAgICAgIH0sCiAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICB2YWx1ZTogc2NvcGUucm93LnJzbUlkLAogICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKCQkdikgewogICAgICAgICAgICAgIF92bS4kc2V0KHNjb3BlLnJvdywgInJzbUlkIiwgJCR2KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXhwcmVzc2lvbjogInNjb3BlLnJvdy5yc21JZCIKICAgICAgICAgIH0KICAgICAgICB9LCBfdm0uX2woX3ZtLnJzbUxpc3QsIGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gX2MoJ2VsLW9wdGlvbicsIHsKICAgICAgICAgICAga2V5OiBpdGVtLmlkLAogICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICJsYWJlbCI6IGl0ZW0uZnVsbE5hbWUsCiAgICAgICAgICAgICAgInZhbHVlIjogaXRlbS5pZAogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KSwgMSksIF9jKCdicicpLCBfYygnYnInKSwgX3ZtLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyA/IF9jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAid2F2ZXMiLAogICAgICAgICAgICByYXdOYW1lOiAidi13YXZlcyIKICAgICAgICAgIH1dLAogICAgICAgICAgc3RhdGljQ2xhc3M6ICJmaWx0ZXItaXRlbSIsCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidHlwZSI6ICJzdWNjZXNzIgogICAgICAgICAgfSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICJjbGljayI6IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX3ZtLnVwZGF0ZVJzbShzY29wZS5yb3cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdigiIEFzc2lnbiBSU00gIildKSA6IF92bS5fZSgpLCBfYygnYnInKSwgX2MoJ2JyJyksIF92bS5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgPyBfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICAgICAgICB9XSwKICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAic3VjY2VzcyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS5yZW1vdmVSc20oc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBSZW1vdmUgUlNNICIpXSkgOiBfdm0uX2UoKV07CiAgICAgIH0KICAgIH1dLCBudWxsLCBmYWxzZSwgMzAyNzk5MjYzOCkKICB9KSA6IF92bS5fZSgpLCB0aGlzLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyB8fCB0aGlzLnJvbGVOYW1lID09ICdab25hbCBIZWFkJyA/IF9jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAiYWxpZ24iOiAiY2VudGVyIiwKICAgICAgImxhYmVsIjogIlpvbmFsIEhlYWQiLAogICAgICAid2lkdGgiOiAiMjIwIgogICAgfSwKICAgIHNjb3BlZFNsb3RzOiBfdm0uX3UoW3sKICAgICAga2V5OiAiZGVmYXVsdCIsCiAgICAgIGZuOiBmdW5jdGlvbiAoc2NvcGUpIHsKICAgICAgICByZXR1cm4gW19jKCdlbC1zZWxlY3QnLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAicGxhY2Vob2xkZXIiOiAiU2VsZWN0IgogICAgICAgICAgfSwKICAgICAgICAgIG1vZGVsOiB7CiAgICAgICAgICAgIHZhbHVlOiBzY29wZS5yb3cuem9uZUhlYWRJZCwKICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgkJHYpIHsKICAgICAgICAgICAgICBfdm0uJHNldChzY29wZS5yb3csICJ6b25lSGVhZElkIiwgJCR2KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXhwcmVzc2lvbjogInNjb3BlLnJvdy56b25lSGVhZElkIgogICAgICAgICAgfQogICAgICAgIH0sIF92bS5fbChfdm0uem9uYWxMaXN0LCBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIF9jKCdlbC1vcHRpb24nLCB7CiAgICAgICAgICAgIGtleTogaXRlbS5pZCwKICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAibGFiZWwiOiBpdGVtLmZ1bGxOYW1lLAogICAgICAgICAgICAgICJ2YWx1ZSI6IGl0ZW0uaWQKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSksIDEpLCBfYygnYnInKSwgX2MoJ2JyJyksIF92bS5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgPyBfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICAgICAgICB9XSwKICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAic3VjY2VzcyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS51cGRhdGVab25hbChzY29wZS5yb3cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdigiIEFzc2lnbiBab25hbCBIZWFkICIpXSkgOiBfdm0uX2UoKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfdm0ucm9sZU5hbWUgPT0gJ3N1cGVyYWRtaW4nID8gX2MoJ2VsLWJ1dHRvbicsIHsKICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJ3YXZlcyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LXdhdmVzIgogICAgICAgICAgfV0sCiAgICAgICAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogInN1Y2Nlc3MiCiAgICAgICAgICB9LAogICAgICAgICAgb246IHsKICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiBfdm0ucmVtb3ZlWm9uYWwoc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBSZW1vdmUgWm9uYWwgIildKSA6IF92bS5fZSgpXTsKICAgICAgfQogICAgfV0sIG51bGwsIGZhbHNlLCAxMDk2MzExNDE0KQogIH0pIDogX3ZtLl9lKCksIF92bS5teVJvbGUuaW5kZXhPZignc3VwZXJhZG1pbicpID4gLTEgPyBfYygnZWwtdGFibGUtY29sdW1uJywgewogICAgYXR0cnM6IHsKICAgICAgImFsaWduIjogImNlbnRlciIsCiAgICAgICJsYWJlbCI6IF92bS4kdCgndGFibGUuYWN0aW9ucycpLAogICAgICAid2lkdGgiOiAiMTgwIgogICAgfSwKICAgIHNjb3BlZFNsb3RzOiBfdm0uX3UoW3sKICAgICAga2V5OiAiZGVmYXVsdCIsCiAgICAgIGZuOiBmdW5jdGlvbiAoc2NvcGUpIHsKICAgICAgICByZXR1cm4gW19jKCdyb3V0ZXItbGluaycsIHsKICAgICAgICAgIHN0YXRpY0NsYXNzOiAibWFyZ2luLWhvcml6b250YWwiLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInRvIjogJy91c2VyQ29udGFjdC9saXN0LycgKyBzY29wZS5yb3cuaWQKICAgICAgICAgIH0KICAgICAgICB9LCBbX2MoJ2VsLWJ1dHRvbicsIHsKICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJ3YXZlcyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LXdhdmVzIgogICAgICAgICAgfV0sCiAgICAgICAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogInN1Y2Nlc3MiCiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdigiIEFkZCBDb250YWN0ICIpXSldLCAxKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfYygnZWwtcG9wb3ZlcicsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJwbGFjZW1lbnQiOiAicmlnaHQiLAogICAgICAgICAgICAid2lkdGgiOiAiNTAwIiwKICAgICAgICAgICAgInRyaWdnZXIiOiAiY2xpY2siCiAgICAgICAgICB9CiAgICAgICAgfSwgW19jKCdlbC10YWJsZScsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJkYXRhIjogX3ZtLnN0YXR1c0RldGFpbHMKICAgICAgICAgIH0KICAgICAgICB9LCBbX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ3aWR0aCI6ICIyMDAiLAogICAgICAgICAgICAicHJvcGVydHkiOiAiYWRtaW4uZnVsbE5hbWUiLAogICAgICAgICAgICAibGFiZWwiOiAiQWRtaW4gTmFtZSIKICAgICAgICAgIH0KICAgICAgICB9KSwgX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ3aWR0aCI6ICIyMDAiLAogICAgICAgICAgICAicHJvcGVydHkiOiAiIiwKICAgICAgICAgICAgImxhYmVsIjogInN0YXR1cyIKICAgICAgICAgIH0sCiAgICAgICAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgICAgICAgIGtleTogImRlZmF1bHQiLAogICAgICAgICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIFtzY29wZS5yb3cuc3RhdHVzID09IDEgPyBfYygnc3BhbicsIFtfdm0uX3YoIlVzZXIiKV0pIDogX3ZtLl9lKCksIHNjb3BlLnJvdy5zdGF0dXMgPT0gMiA/IF9jKCdzcGFuJywgW192bS5fdigiQ05GIildKSA6IF92bS5fZSgpLCBzY29wZS5yb3cuc3RhdHVzID09IDMgPyBfYygnc3BhbicsIFtfdm0uX3YoIlN1cGVyIFNvY2tldCIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSA0ID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJDRCIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSA1ID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJTRCIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSA2ID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJXQiIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSA3ID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJNUlAiKV0pIDogX3ZtLl9lKCksIHNjb3BlLnJvdy5zdGF0dXMgPT0gOCA/IF9jKCdzcGFuJywgW192bS5fdigiQ09QIildKSA6IF92bS5fZSgpLCBzY29wZS5yb3cuc3RhdHVzID09IDkgPyBfYygnc3BhbicsIFtfdm0uX3YoIlNPUCIpXSkgOiBfdm0uX2UoKV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH1dLCBudWxsLCB0cnVlKQogICAgICAgIH0pXSwgMSksIF9jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAibG9hZGluZyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LWxvYWRpbmciLAogICAgICAgICAgICB2YWx1ZTogX3ZtLnVzZXJTdGF0dXNMb2FkaW5nLAogICAgICAgICAgICBleHByZXNzaW9uOiAidXNlclN0YXR1c0xvYWRpbmciCiAgICAgICAgICB9XSwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJzbG90IjogInJlZmVyZW5jZSIsCiAgICAgICAgICAgICJzaXplIjogInNtYWxsIiwKICAgICAgICAgICAgInR5cGUiOiAid2FybmluZyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS5nZXRVc2VyU3RhdHVzTG9nKHNjb3BlLnJvdyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBzbG90OiAicmVmZXJlbmNlIgogICAgICAgIH0sIFtfdm0uX3YoIiBIaXN0b3J5ICIpXSldLCAxKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfYygncm91dGVyLWxpbmsnLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidG8iOiAnL3VzZXIvZWRpdC8nICsgc2NvcGUucm93LmlkCiAgICAgICAgICB9CiAgICAgICAgfSwgW19jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAid2F2ZXMiLAogICAgICAgICAgICByYXdOYW1lOiAidi13YXZlcyIKICAgICAgICAgIH1dLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAid2FybmluZyIsCiAgICAgICAgICAgICJzaXplIjogInNtYWxsIiwKICAgICAgICAgICAgImljb24iOiAiZWwtaWNvbi1lZGl0IgogICAgICAgICAgfQogICAgICAgIH0pXSwgMSldOwogICAgICB9CiAgICB9XSwgbnVsbCwgZmFsc2UsIDU0NDI0OTUxNSkKICB9KSA6IF92bS5fZSgpXSwgMSksIF9jKCdwYWdpbmF0aW9uJywgewogICAgZGlyZWN0aXZlczogW3sKICAgICAgbmFtZTogInNob3ciLAogICAgICByYXdOYW1lOiAidi1zaG93IiwKICAgICAgdmFsdWU6IF92bS50b3RhbCA+IDAsCiAgICAgIGV4cHJlc3Npb246ICJ0b3RhbCA+IDAiCiAgICB9XSwKICAgIGF0dHJzOiB7CiAgICAgICJ0b3RhbCI6IF92bS50b3RhbCwKICAgICAgInBhZ2UiOiBfdm0ubGlzdFF1ZXJ5LnBhZ2UsCiAgICAgICJsaW1pdCI6IF92bS5saXN0UXVlcnkubGltaXQKICAgIH0sCiAgICBvbjogewogICAgICAidXBkYXRlOnBhZ2UiOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgcmV0dXJuIF92bS4kc2V0KF92bS5saXN0UXVlcnksICJwYWdlIiwgJGV2ZW50KTsKICAgICAgfSwKICAgICAgInVwZGF0ZTpsaW1pdCI6IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICByZXR1cm4gX3ZtLiRzZXQoX3ZtLmxpc3RRdWVyeSwgImxpbWl0IiwgJGV2ZW50KTsKICAgICAgfSwKICAgICAgInBhZ2luYXRpb24iOiBfdm0uZ2V0TGlzdAogICAgfQogIH0pXSwgMSksIF9jKCdlbC10YWItcGFuZScsIHsKICAgIGF0dHJzOiB7CiAgICAgICJsYWJlbCI6ICJDRCIsCiAgICAgICJuYW1lIjogImNkIgogICAgfQogIH0sIFtfYygnZWwtdGFibGUnLCB7CiAgICBkaXJlY3RpdmVzOiBbewogICAgICBuYW1lOiAibG9hZGluZyIsCiAgICAgIHJhd05hbWU6ICJ2LWxvYWRpbmciLAogICAgICB2YWx1ZTogX3ZtLmxpc3RMb2FkaW5nLAogICAgICBleHByZXNzaW9uOiAibGlzdExvYWRpbmciCiAgICB9XSwKICAgIGtleTogX3ZtLnRhYmxlS2V5LAogICAgc3RhdGljU3R5bGU6IHsKICAgICAgIndpZHRoIjogIjEwMCUiCiAgICB9LAogICAgYXR0cnM6IHsKICAgICAgImRhdGEiOiBfdm0ubGlzdCwKICAgICAgImJvcmRlciI6ICIiLAogICAgICAiZml0IjogIiIsCiAgICAgICJoaWdobGlnaHQtY3VycmVudC1yb3ciOiAiIgogICAgfSwKICAgIG9uOiB7CiAgICAgICJzb3J0LWNoYW5nZSI6IF92bS5zb3J0Q2hhbmdlCiAgICB9CiAgfSwgW19jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAic29ydGFibGUiOiAiY3VzdG9tIiwKICAgICAgIndpZHRoIjogIjEwMHB4IiwKICAgICAgImFsaWduIjogImNlbnRlciIsCiAgICAgICJsYWJlbCI6IF92bS4kdCgndGFibGUuaWQnKSwKICAgICAgInByb3AiOiAiaWQiLAogICAgICAiY2xhc3MtbmFtZSI6IF92bS5nZXRTb3J0Q2xhc3MoJ2lkJykKICAgIH0KICB9KSwgX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJ3aWR0aCI6ICI5MCIsCiAgICAgICJhbGlnbiI6ICJjZW50ZXIiLAogICAgICAibGFiZWwiOiAiRW5hYmxlL0Rpc2FibGUiLAogICAgICAicHJvcCI6ICIiCiAgICB9LAogICAgc2NvcGVkU2xvdHM6IF92bS5fdShbewogICAgICBrZXk6ICJkZWZhdWx0IiwKICAgICAgZm46IGZ1bmN0aW9uIChzY29wZSkgewogICAgICAgIHJldHVybiBbX2MoJ2VuYWJsZWQnLCB7CiAgICAgICAgICBrZXk6IHNjb3BlLnJvdy5pZCwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ1cmwiOiAnL3VzZXJzLycgKyBzY29wZS5yb3cuaWQKICAgICAgICAgIH0sCiAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICB2YWx1ZTogc2NvcGUucm93LmVuYWJsZWQsCiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoJCR2KSB7CiAgICAgICAgICAgICAgX3ZtLiRzZXQoc2NvcGUucm93LCAiZW5hYmxlZCIsICQkdik7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGV4cHJlc3Npb246ICJzY29wZS5yb3cuZW5hYmxlZCIKICAgICAgICAgIH0KICAgICAgICB9KV07CiAgICAgIH0KICAgIH1dKQogIH0pLCBfYygnZWwtdGFibGUtY29sdW1uJywgewogICAgYXR0cnM6IHsKICAgICAgImxhYmVsIjogIkRpc3RyaWJ1dG9yIERldGFpbHMiLAogICAgICAid2lkdGgiOiAiMzUwcHgiCiAgICB9LAogICAgc2NvcGVkU2xvdHM6IF92bS5fdShbewogICAgICBrZXk6ICJkZWZhdWx0IiwKICAgICAgZm46IGZ1bmN0aW9uIChzY29wZSkgewogICAgICAgIHJldHVybiBbX2MoJ2VsLXJvdycsIHsKICAgICAgICAgIHN0YXRpY1N0eWxlOiB7CiAgICAgICAgICAgICJ0ZXh0LWFsaWduIjogImxlZnQiCiAgICAgICAgICB9LAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAiZmxleCIsCiAgICAgICAgICAgICJqdXN0aWZ5IjogIiIsCiAgICAgICAgICAgICJzcGFuIjogMjQsCiAgICAgICAgICAgICJndXR0ZXIiOiAyMAogICAgICAgICAgfQogICAgICAgIH0sIFtfYygnZWwtY29sJywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInNwYW4iOiAxMgogICAgICAgICAgfQogICAgICAgIH0sIFtfYygnYicsIFtfdm0uX3YoIk5hbWU6IildKSwgX3ZtLl92KCLCoMKgIiksIF9jKCdzcGFuJywgW192bS5fdihfdm0uX3Moc2NvcGUucm93LmZ1bGxOYW1lKSldKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfYygnYicsIFtfdm0uX3YoIkNvbXBhbnkgTmFtZToiKV0pLCBfdm0uX3YoIsKgwqAiKSwgX2MoJ3NwYW4nLCBbX3ZtLl92KF92bS5fcyhzY29wZS5yb3cuY29tcGFueU5hbWUpKV0pLCBfYygnYnInKSwgX2MoJ2JyJyksIF9jKCdiJywgW192bS5fdigiRW1haWwgQWRkcmVzczoiKV0pLCBfdm0uX3YoIsKgwqAiKSwgX2MoJ3NwYW4nLCBbX3ZtLl92KF92bS5fcyhzY29wZS5yb3cuZW1haWwpKV0pLCBfYygnYnInKSwgX2MoJ2JyJyldKSwgX2MoJ2VsLWNvbCcsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJzcGFuIjogMTIKICAgICAgICAgIH0KICAgICAgICB9LCBbX2MoJ2InLCBbX3ZtLl92KCJQaW5jb2RlIE51bWJlcjoiKV0pLCBfdm0uX3YoIsKgwqAiKSwgX2MoJ3NwYW4nLCBbX3ZtLl92KF92bS5fcyhzY29wZS5yb3cucGluY29kZSkpXSksIF9jKCdicicpLCBfYygnYnInKSwgX2MoJ2InLCBbX3ZtLl92KCJDaXR5IE5hbWU6IildKSwgX3ZtLl92KCLCoMKgIiksIF9jKCdzcGFuJywgW192bS5fdihfdm0uX3Moc2NvcGUucm93LmNpdHkpKV0pLCBfYygnYnInKSwgX2MoJ2JyJyksIF9jKCdiJywgW192bS5fdigiUmVnaXN0ZXJlZCBOdW1iZXI6IildKSwgX3ZtLl92KCLCoMKgIiksIF92bS5fbChzY29wZS5yb3cudXNlckNvbnRhY3QsIGZ1bmN0aW9uIChjb250YWN0KSB7CiAgICAgICAgICByZXR1cm4gX2MoJ3NwYW4nLCB7CiAgICAgICAgICAgIGtleTogY29udGFjdC5pZAogICAgICAgICAgfSwgW192bS5fdigiICIgKyBfdm0uX3MoY29udGFjdC5jb250YWN0TnVtYmVyKSksIF9jKCdicicpLCBfYygnYnInKV0pOwogICAgICAgIH0pXSwgMildLCAxKV07CiAgICAgIH0KICAgIH1dKQogIH0pLCBfdm0uc2hvd0NyZWF0ZWREYXRlID8gX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJsYWJlbCI6IF92bS4kdCgndGFibGUuY3JlYXRlZERhdGUnKSwKICAgICAgIndpZHRoIjogIjE1MHB4IiwKICAgICAgImFsaWduIjogImNlbnRlciIKICAgIH0sCiAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgIGtleTogImRlZmF1bHQiLAogICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgcmV0dXJuIFtfYygnc3BhbicsIHsKICAgICAgICAgIHN0YXRpY1N0eWxlOiB7CiAgICAgICAgICAgICJjb2xvciI6ICJyZWQiCiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdihfdm0uX3MoX3ZtLl9mKCJtb21lbnQiKShzY29wZS5yb3cuY3JlYXRlZFRpbWVzdGFtcCwgImZyb20iKSkpXSldOwogICAgICB9CiAgICB9XSwgbnVsbCwgZmFsc2UsIDkxMjUyNjg3MCkKICB9KSA6IF92bS5fZSgpLCB0aGlzLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyA/IF9jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAiYWxpZ24iOiAiY2VudGVyIiwKICAgICAgImxhYmVsIjogIkNvbnZlcnQiLAogICAgICAid2lkdGgiOiAiMjIwIgogICAgfSwKICAgIHNjb3BlZFNsb3RzOiBfdm0uX3UoW3sKICAgICAga2V5OiAiZGVmYXVsdCIsCiAgICAgIGZuOiBmdW5jdGlvbiAoc2NvcGUpIHsKICAgICAgICByZXR1cm4gW19jKCdlbC1zZWxlY3QnLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAicGxhY2Vob2xkZXIiOiAiU2VsZWN0IgogICAgICAgICAgfSwKICAgICAgICAgIG1vZGVsOiB7CiAgICAgICAgICAgIHZhbHVlOiBzY29wZS5yb3cuc3RhdHVzLAogICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKCQkdikgewogICAgICAgICAgICAgIF92bS4kc2V0KHNjb3BlLnJvdywgInN0YXR1cyIsICQkdik7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGV4cHJlc3Npb246ICJzY29wZS5yb3cuc3RhdHVzIgogICAgICAgICAgfQogICAgICAgIH0sIF92bS5fbChfdm0udXNlckxpc3QsIGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gX2MoJ2VsLW9wdGlvbicsIHsKICAgICAgICAgICAga2V5OiBpdGVtLnZhbHVlLAogICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICJsYWJlbCI6IGl0ZW0ubGFiZWwsCiAgICAgICAgICAgICAgInZhbHVlIjogaXRlbS52YWx1ZQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KSwgMSksIF9jKCdicicpLCBfYygnYnInKSwgX2MoJ2VsLWJ1dHRvbicsIHsKICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJ3YXZlcyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LXdhdmVzIgogICAgICAgICAgfV0sCiAgICAgICAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogInN1Y2Nlc3MiCiAgICAgICAgICB9LAogICAgICAgICAgb246IHsKICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiBfdm0udXBkYXRlRGlzdHJpYnV0b3Ioc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBDb252ZXJ0ICIpXSldOwogICAgICB9CiAgICB9XSwgbnVsbCwgZmFsc2UsIDEyMjgyMDE5MTkpCiAgfSkgOiBfdm0uX2UoKSwgX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJhbGlnbiI6ICJjZW50ZXIiLAogICAgICAibGFiZWwiOiAiQXNtIiwKICAgICAgIndpZHRoIjogIjIyMCIKICAgIH0sCiAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgIGtleTogImRlZmF1bHQiLAogICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgcmV0dXJuIFtfYygnZWwtc2VsZWN0JywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInBsYWNlaG9sZGVyIjogIlNlbGVjdCIKICAgICAgICAgIH0sCiAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICB2YWx1ZTogc2NvcGUucm93LnN1cGVyQWRtaW5JZCwKICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgkJHYpIHsKICAgICAgICAgICAgICBfdm0uJHNldChzY29wZS5yb3csICJzdXBlckFkbWluSWQiLCAkJHYpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBleHByZXNzaW9uOiAic2NvcGUucm93LnN1cGVyQWRtaW5JZCIKICAgICAgICAgIH0KICAgICAgICB9LCBfdm0uX2woX3ZtLmFzbUxpc3QsIGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gX2MoJ2VsLW9wdGlvbicsIHsKICAgICAgICAgICAga2V5OiBpdGVtLmlkLAogICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICJsYWJlbCI6IGl0ZW0uZnVsbE5hbWUsCiAgICAgICAgICAgICAgInZhbHVlIjogaXRlbS5pZAogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KSwgMSksIF9jKCdicicpLCBfYygnYnInKSwgX3ZtLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyA/IF9jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAid2F2ZXMiLAogICAgICAgICAgICByYXdOYW1lOiAidi13YXZlcyIKICAgICAgICAgIH1dLAogICAgICAgICAgc3RhdGljQ2xhc3M6ICJmaWx0ZXItaXRlbSIsCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidHlwZSI6ICJzdWNjZXNzIgogICAgICAgICAgfSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICJjbGljayI6IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX3ZtLnVwZGF0ZUFzbShzY29wZS5yb3cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdigiIEFzc2lnbiBBc20gIildKSA6IF92bS5fZSgpLCBfYygnYnInKSwgX2MoJ2JyJyksIF92bS5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgPyBfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICAgICAgICB9XSwKICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAic3VjY2VzcyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS5yZW1vdmVBc20oc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBSZW1vdmUgQVNNICIpXSkgOiBfdm0uX2UoKV07CiAgICAgIH0KICAgIH1dKQogIH0pLCB0aGlzLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyB8fCB0aGlzLnJvbGVOYW1lID09ICdSU00nIHx8IHRoaXMucm9sZU5hbWUgPT0gJ1pvbmFsIEhlYWQnID8gX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJhbGlnbiI6ICJjZW50ZXIiLAogICAgICAibGFiZWwiOiAiUnNtIiwKICAgICAgIndpZHRoIjogIjIyMCIKICAgIH0sCiAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgIGtleTogImRlZmF1bHQiLAogICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgcmV0dXJuIFtfYygnZWwtc2VsZWN0JywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInBsYWNlaG9sZGVyIjogIlNlbGVjdCIKICAgICAgICAgIH0sCiAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICB2YWx1ZTogc2NvcGUucm93LnJzbUlkLAogICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKCQkdikgewogICAgICAgICAgICAgIF92bS4kc2V0KHNjb3BlLnJvdywgInJzbUlkIiwgJCR2KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXhwcmVzc2lvbjogInNjb3BlLnJvdy5yc21JZCIKICAgICAgICAgIH0KICAgICAgICB9LCBfdm0uX2woX3ZtLnJzbUxpc3QsIGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gX2MoJ2VsLW9wdGlvbicsIHsKICAgICAgICAgICAga2V5OiBpdGVtLmlkLAogICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICJsYWJlbCI6IGl0ZW0uZnVsbE5hbWUsCiAgICAgICAgICAgICAgInZhbHVlIjogaXRlbS5pZAogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KSwgMSksIF9jKCdicicpLCBfYygnYnInKSwgX3ZtLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyA/IF9jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAid2F2ZXMiLAogICAgICAgICAgICByYXdOYW1lOiAidi13YXZlcyIKICAgICAgICAgIH1dLAogICAgICAgICAgc3RhdGljQ2xhc3M6ICJmaWx0ZXItaXRlbSIsCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidHlwZSI6ICJzdWNjZXNzIgogICAgICAgICAgfSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICJjbGljayI6IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX3ZtLnVwZGF0ZVJzbShzY29wZS5yb3cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdigiIEFzc2lnbiBSU00gIildKSA6IF92bS5fZSgpLCBfYygnYnInKSwgX2MoJ2JyJyksIF92bS5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgPyBfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICAgICAgICB9XSwKICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAic3VjY2VzcyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS5yZW1vdmVSc20oc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBSZW1vdmUgUlNNICIpXSkgOiBfdm0uX2UoKV07CiAgICAgIH0KICAgIH1dLCBudWxsLCBmYWxzZSwgMzAyNzk5MjYzOCkKICB9KSA6IF92bS5fZSgpLCB0aGlzLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyB8fCB0aGlzLnJvbGVOYW1lID09ICdab25hbCBIZWFkJyA/IF9jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAiYWxpZ24iOiAiY2VudGVyIiwKICAgICAgImxhYmVsIjogIlpvbmFsIEhlYWQiLAogICAgICAid2lkdGgiOiAiMjIwIgogICAgfSwKICAgIHNjb3BlZFNsb3RzOiBfdm0uX3UoW3sKICAgICAga2V5OiAiZGVmYXVsdCIsCiAgICAgIGZuOiBmdW5jdGlvbiAoc2NvcGUpIHsKICAgICAgICByZXR1cm4gW19jKCdlbC1zZWxlY3QnLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAicGxhY2Vob2xkZXIiOiAiU2VsZWN0IgogICAgICAgICAgfSwKICAgICAgICAgIG1vZGVsOiB7CiAgICAgICAgICAgIHZhbHVlOiBzY29wZS5yb3cuem9uZUhlYWRJZCwKICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgkJHYpIHsKICAgICAgICAgICAgICBfdm0uJHNldChzY29wZS5yb3csICJ6b25lSGVhZElkIiwgJCR2KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXhwcmVzc2lvbjogInNjb3BlLnJvdy56b25lSGVhZElkIgogICAgICAgICAgfQogICAgICAgIH0sIF92bS5fbChfdm0uem9uYWxMaXN0LCBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIF9jKCdlbC1vcHRpb24nLCB7CiAgICAgICAgICAgIGtleTogaXRlbS5pZCwKICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAibGFiZWwiOiBpdGVtLmZ1bGxOYW1lLAogICAgICAgICAgICAgICJ2YWx1ZSI6IGl0ZW0uaWQKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSksIDEpLCBfYygnYnInKSwgX2MoJ2JyJyksIF92bS5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgPyBfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICAgICAgICB9XSwKICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAic3VjY2VzcyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS51cGRhdGVab25hbChzY29wZS5yb3cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdigiIEFzc2lnbiBab25hbCBIZWFkICIpXSkgOiBfdm0uX2UoKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfdm0ucm9sZU5hbWUgPT0gJ3N1cGVyYWRtaW4nID8gX2MoJ2VsLWJ1dHRvbicsIHsKICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJ3YXZlcyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LXdhdmVzIgogICAgICAgICAgfV0sCiAgICAgICAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogInN1Y2Nlc3MiCiAgICAgICAgICB9LAogICAgICAgICAgb246IHsKICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiBfdm0ucmVtb3ZlWm9uYWwoc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBSZW1vdmUgWm9uYWwgIildKSA6IF92bS5fZSgpXTsKICAgICAgfQogICAgfV0sIG51bGwsIGZhbHNlLCAxMDk2MzExNDE0KQogIH0pIDogX3ZtLl9lKCksIF92bS5teVJvbGUuaW5kZXhPZignc3VwZXJhZG1pbicpID4gLTEgPyBfYygnZWwtdGFibGUtY29sdW1uJywgewogICAgYXR0cnM6IHsKICAgICAgImFsaWduIjogImNlbnRlciIsCiAgICAgICJsYWJlbCI6IF92bS4kdCgndGFibGUuYWN0aW9ucycpLAogICAgICAid2lkdGgiOiAiMTgwIgogICAgfSwKICAgIHNjb3BlZFNsb3RzOiBfdm0uX3UoW3sKICAgICAga2V5OiAiZGVmYXVsdCIsCiAgICAgIGZuOiBmdW5jdGlvbiAoc2NvcGUpIHsKICAgICAgICByZXR1cm4gW19jKCdyb3V0ZXItbGluaycsIHsKICAgICAgICAgIHN0YXRpY0NsYXNzOiAibWFyZ2luLWhvcml6b250YWwiLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInRvIjogJy91c2VyQ29udGFjdC9saXN0LycgKyBzY29wZS5yb3cuaWQKICAgICAgICAgIH0KICAgICAgICB9LCBbX2MoJ2VsLWJ1dHRvbicsIHsKICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJ3YXZlcyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LXdhdmVzIgogICAgICAgICAgfV0sCiAgICAgICAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogInN1Y2Nlc3MiCiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdigiIEFkZCBDb250YWN0ICIpXSldLCAxKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfYygnZWwtcG9wb3ZlcicsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJwbGFjZW1lbnQiOiAicmlnaHQiLAogICAgICAgICAgICAid2lkdGgiOiAiNTAwIiwKICAgICAgICAgICAgInRyaWdnZXIiOiAiY2xpY2siCiAgICAgICAgICB9CiAgICAgICAgfSwgW19jKCdlbC10YWJsZScsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJkYXRhIjogX3ZtLnN0YXR1c0RldGFpbHMKICAgICAgICAgIH0KICAgICAgICB9LCBbX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ3aWR0aCI6ICIyMDAiLAogICAgICAgICAgICAicHJvcGVydHkiOiAiYWRtaW4uZnVsbE5hbWUiLAogICAgICAgICAgICAibGFiZWwiOiAiQWRtaW4gTmFtZSIKICAgICAgICAgIH0KICAgICAgICB9KSwgX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ3aWR0aCI6ICIyMDAiLAogICAgICAgICAgICAicHJvcGVydHkiOiAiIiwKICAgICAgICAgICAgImxhYmVsIjogInN0YXR1cyIKICAgICAgICAgIH0sCiAgICAgICAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgICAgICAgIGtleTogImRlZmF1bHQiLAogICAgICAgICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIFtzY29wZS5yb3cuc3RhdHVzID09IDEgPyBfYygnc3BhbicsIFtfdm0uX3YoIlVzZXIiKV0pIDogX3ZtLl9lKCksIHNjb3BlLnJvdy5zdGF0dXMgPT0gMiA/IF9jKCdzcGFuJywgW192bS5fdigiQ05GIildKSA6IF92bS5fZSgpLCBzY29wZS5yb3cuc3RhdHVzID09IDMgPyBfYygnc3BhbicsIFtfdm0uX3YoIlN1cGVyIFNvY2tldCIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSA0ID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJDRCIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSA1ID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJTRCIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSA2ID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJXQiIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSA3ID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJNUlAiKV0pIDogX3ZtLl9lKCksIHNjb3BlLnJvdy5zdGF0dXMgPT0gOCA/IF9jKCdzcGFuJywgW192bS5fdigiQ09QIildKSA6IF92bS5fZSgpLCBzY29wZS5yb3cuc3RhdHVzID09IDkgPyBfYygnc3BhbicsIFtfdm0uX3YoIlNPUCIpXSkgOiBfdm0uX2UoKV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH1dLCBudWxsLCB0cnVlKQogICAgICAgIH0pXSwgMSksIF9jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAibG9hZGluZyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LWxvYWRpbmciLAogICAgICAgICAgICB2YWx1ZTogX3ZtLnVzZXJTdGF0dXNMb2FkaW5nLAogICAgICAgICAgICBleHByZXNzaW9uOiAidXNlclN0YXR1c0xvYWRpbmciCiAgICAgICAgICB9XSwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJzbG90IjogInJlZmVyZW5jZSIsCiAgICAgICAgICAgICJzaXplIjogInNtYWxsIiwKICAgICAgICAgICAgInR5cGUiOiAid2FybmluZyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS5nZXRVc2VyU3RhdHVzTG9nKHNjb3BlLnJvdyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBzbG90OiAicmVmZXJlbmNlIgogICAgICAgIH0sIFtfdm0uX3YoIiBIaXN0b3J5ICIpXSldLCAxKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfYygncm91dGVyLWxpbmsnLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidG8iOiAnL3VzZXIvZWRpdC8nICsgc2NvcGUucm93LmlkCiAgICAgICAgICB9CiAgICAgICAgfSwgW19jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAid2F2ZXMiLAogICAgICAgICAgICByYXdOYW1lOiAidi13YXZlcyIKICAgICAgICAgIH1dLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAid2FybmluZyIsCiAgICAgICAgICAgICJzaXplIjogInNtYWxsIiwKICAgICAgICAgICAgImljb24iOiAiZWwtaWNvbi1lZGl0IgogICAgICAgICAgfQogICAgICAgIH0pXSwgMSldOwogICAgICB9CiAgICB9XSwgbnVsbCwgZmFsc2UsIDU0NDI0OTUxNSkKICB9KSA6IF92bS5fZSgpXSwgMSksIF9jKCdwYWdpbmF0aW9uJywgewogICAgZGlyZWN0aXZlczogW3sKICAgICAgbmFtZTogInNob3ciLAogICAgICByYXdOYW1lOiAidi1zaG93IiwKICAgICAgdmFsdWU6IF92bS50b3RhbCA+IDAsCiAgICAgIGV4cHJlc3Npb246ICJ0b3RhbCA+IDAiCiAgICB9XSwKICAgIGF0dHJzOiB7CiAgICAgICJ0b3RhbCI6IF92bS50b3RhbCwKICAgICAgInBhZ2UiOiBfdm0ubGlzdFF1ZXJ5LnBhZ2UsCiAgICAgICJsaW1pdCI6IF92bS5saXN0UXVlcnkubGltaXQKICAgIH0sCiAgICBvbjogewogICAgICAidXBkYXRlOnBhZ2UiOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgcmV0dXJuIF92bS4kc2V0KF92bS5saXN0UXVlcnksICJwYWdlIiwgJGV2ZW50KTsKICAgICAgfSwKICAgICAgInVwZGF0ZTpsaW1pdCI6IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICByZXR1cm4gX3ZtLiRzZXQoX3ZtLmxpc3RRdWVyeSwgImxpbWl0IiwgJGV2ZW50KTsKICAgICAgfSwKICAgICAgInBhZ2luYXRpb24iOiBfdm0uZ2V0TGlzdAogICAgfQogIH0pXSwgMSksIF9jKCdlbC10YWItcGFuZScsIHsKICAgIGF0dHJzOiB7CiAgICAgICJsYWJlbCI6ICJTRCIsCiAgICAgICJuYW1lIjogInNkIgogICAgfQogIH0sIFtfYygnZWwtdGFibGUnLCB7CiAgICBkaXJlY3RpdmVzOiBbewogICAgICBuYW1lOiAibG9hZGluZyIsCiAgICAgIHJhd05hbWU6ICJ2LWxvYWRpbmciLAogICAgICB2YWx1ZTogX3ZtLmxpc3RMb2FkaW5nLAogICAgICBleHByZXNzaW9uOiAibGlzdExvYWRpbmciCiAgICB9XSwKICAgIGtleTogX3ZtLnRhYmxlS2V5LAogICAgc3RhdGljU3R5bGU6IHsKICAgICAgIndpZHRoIjogIjEwMCUiCiAgICB9LAogICAgYXR0cnM6IHsKICAgICAgImRhdGEiOiBfdm0ubGlzdCwKICAgICAgImJvcmRlciI6ICIiLAogICAgICAiZml0IjogIiIsCiAgICAgICJoaWdobGlnaHQtY3VycmVudC1yb3ciOiAiIgogICAgfSwKICAgIG9uOiB7CiAgICAgICJzb3J0LWNoYW5nZSI6IF92bS5zb3J0Q2hhbmdlCiAgICB9CiAgfSwgW19jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAic29ydGFibGUiOiAiY3VzdG9tIiwKICAgICAgIndpZHRoIjogIjEwMHB4IiwKICAgICAgImFsaWduIjogImNlbnRlciIsCiAgICAgICJsYWJlbCI6IF92bS4kdCgndGFibGUuaWQnKSwKICAgICAgInByb3AiOiAiaWQiLAogICAgICAiY2xhc3MtbmFtZSI6IF92bS5nZXRTb3J0Q2xhc3MoJ2lkJykKICAgIH0KICB9KSwgX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJ3aWR0aCI6ICI5MCIsCiAgICAgICJhbGlnbiI6ICJjZW50ZXIiLAogICAgICAibGFiZWwiOiAiRW5hYmxlL0Rpc2FibGUiLAogICAgICAicHJvcCI6ICIiCiAgICB9LAogICAgc2NvcGVkU2xvdHM6IF92bS5fdShbewogICAgICBrZXk6ICJkZWZhdWx0IiwKICAgICAgZm46IGZ1bmN0aW9uIChzY29wZSkgewogICAgICAgIHJldHVybiBbX2MoJ2VuYWJsZWQnLCB7CiAgICAgICAgICBrZXk6IHNjb3BlLnJvdy5pZCwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ1cmwiOiAnL3VzZXJzLycgKyBzY29wZS5yb3cuaWQKICAgICAgICAgIH0sCiAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICB2YWx1ZTogc2NvcGUucm93LmVuYWJsZWQsCiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoJCR2KSB7CiAgICAgICAgICAgICAgX3ZtLiRzZXQoc2NvcGUucm93LCAiZW5hYmxlZCIsICQkdik7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGV4cHJlc3Npb246ICJzY29wZS5yb3cuZW5hYmxlZCIKICAgICAgICAgIH0KICAgICAgICB9KV07CiAgICAgIH0KICAgIH1dKQogIH0pLCBfYygnZWwtdGFibGUtY29sdW1uJywgewogICAgYXR0cnM6IHsKICAgICAgImxhYmVsIjogIkRpc3RyaWJ1dG9yIERldGFpbHMiLAogICAgICAid2lkdGgiOiAiMzUwcHgiCiAgICB9LAogICAgc2NvcGVkU2xvdHM6IF92bS5fdShbewogICAgICBrZXk6ICJkZWZhdWx0IiwKICAgICAgZm46IGZ1bmN0aW9uIChzY29wZSkgewogICAgICAgIHJldHVybiBbX2MoJ2VsLXJvdycsIHsKICAgICAgICAgIHN0YXRpY1N0eWxlOiB7CiAgICAgICAgICAgICJ0ZXh0LWFsaWduIjogImxlZnQiCiAgICAgICAgICB9LAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAiZmxleCIsCiAgICAgICAgICAgICJqdXN0aWZ5IjogIiIsCiAgICAgICAgICAgICJzcGFuIjogMjQsCiAgICAgICAgICAgICJndXR0ZXIiOiAyMAogICAgICAgICAgfQogICAgICAgIH0sIFtfYygnZWwtY29sJywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInNwYW4iOiAxMgogICAgICAgICAgfQogICAgICAgIH0sIFtfYygnYicsIFtfdm0uX3YoIk5hbWU6IildKSwgX3ZtLl92KCLCoMKgIiksIF9jKCdzcGFuJywgW192bS5fdihfdm0uX3Moc2NvcGUucm93LmZ1bGxOYW1lKSldKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfYygnYicsIFtfdm0uX3YoIkNvbXBhbnkgTmFtZToiKV0pLCBfdm0uX3YoIsKgwqAiKSwgX2MoJ3NwYW4nLCBbX3ZtLl92KF92bS5fcyhzY29wZS5yb3cuY29tcGFueU5hbWUpKV0pLCBfYygnYnInKSwgX2MoJ2JyJyksIF9jKCdiJywgW192bS5fdigiRW1haWwgQWRkcmVzczoiKV0pLCBfdm0uX3YoIsKgwqAiKSwgX2MoJ3NwYW4nLCBbX3ZtLl92KF92bS5fcyhzY29wZS5yb3cuZW1haWwpKV0pLCBfYygnYnInKSwgX2MoJ2JyJyldKSwgX2MoJ2VsLWNvbCcsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJzcGFuIjogMTIKICAgICAgICAgIH0KICAgICAgICB9LCBbX2MoJ2InLCBbX3ZtLl92KCJQaW5jb2RlIE51bWJlcjoiKV0pLCBfdm0uX3YoIsKgwqAiKSwgX2MoJ3NwYW4nLCBbX3ZtLl92KF92bS5fcyhzY29wZS5yb3cucGluY29kZSkpXSksIF9jKCdicicpLCBfYygnYnInKSwgX2MoJ2InLCBbX3ZtLl92KCJDaXR5IE5hbWU6IildKSwgX3ZtLl92KCLCoMKgIiksIF9jKCdzcGFuJywgW192bS5fdihfdm0uX3Moc2NvcGUucm93LmNpdHkpKV0pLCBfYygnYnInKSwgX2MoJ2JyJyksIF9jKCdiJywgW192bS5fdigiUmVnaXN0ZXJlZCBOdW1iZXI6IildKSwgX3ZtLl92KCLCoMKgIiksIF92bS5fbChzY29wZS5yb3cudXNlckNvbnRhY3QsIGZ1bmN0aW9uIChjb250YWN0KSB7CiAgICAgICAgICByZXR1cm4gX2MoJ3NwYW4nLCB7CiAgICAgICAgICAgIGtleTogY29udGFjdC5pZAogICAgICAgICAgfSwgW192bS5fdigiICIgKyBfdm0uX3MoY29udGFjdC5jb250YWN0TnVtYmVyKSksIF9jKCdicicpLCBfYygnYnInKV0pOwogICAgICAgIH0pXSwgMildLCAxKV07CiAgICAgIH0KICAgIH1dKQogIH0pLCBfdm0uc2hvd0NyZWF0ZWREYXRlID8gX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJsYWJlbCI6IF92bS4kdCgndGFibGUuY3JlYXRlZERhdGUnKSwKICAgICAgIndpZHRoIjogIjE1MHB4IiwKICAgICAgImFsaWduIjogImNlbnRlciIKICAgIH0sCiAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgIGtleTogImRlZmF1bHQiLAogICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgcmV0dXJuIFtfYygnc3BhbicsIHsKICAgICAgICAgIHN0YXRpY1N0eWxlOiB7CiAgICAgICAgICAgICJjb2xvciI6ICJyZWQiCiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdihfdm0uX3MoX3ZtLl9mKCJtb21lbnQiKShzY29wZS5yb3cuY3JlYXRlZFRpbWVzdGFtcCwgImZyb20iKSkpXSldOwogICAgICB9CiAgICB9XSwgbnVsbCwgZmFsc2UsIDkxMjUyNjg3MCkKICB9KSA6IF92bS5fZSgpLCB0aGlzLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyA/IF9jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAiYWxpZ24iOiAiY2VudGVyIiwKICAgICAgImxhYmVsIjogIkNvbnZlcnQiLAogICAgICAid2lkdGgiOiAiMjIwIgogICAgfSwKICAgIHNjb3BlZFNsb3RzOiBfdm0uX3UoW3sKICAgICAga2V5OiAiZGVmYXVsdCIsCiAgICAgIGZuOiBmdW5jdGlvbiAoc2NvcGUpIHsKICAgICAgICByZXR1cm4gW19jKCdlbC1zZWxlY3QnLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAicGxhY2Vob2xkZXIiOiAiU2VsZWN0IgogICAgICAgICAgfSwKICAgICAgICAgIG1vZGVsOiB7CiAgICAgICAgICAgIHZhbHVlOiBzY29wZS5yb3cuc3RhdHVzLAogICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKCQkdikgewogICAgICAgICAgICAgIF92bS4kc2V0KHNjb3BlLnJvdywgInN0YXR1cyIsICQkdik7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGV4cHJlc3Npb246ICJzY29wZS5yb3cuc3RhdHVzIgogICAgICAgICAgfQogICAgICAgIH0sIF92bS5fbChfdm0udXNlckxpc3QsIGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gX2MoJ2VsLW9wdGlvbicsIHsKICAgICAgICAgICAga2V5OiBpdGVtLnZhbHVlLAogICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICJsYWJlbCI6IGl0ZW0ubGFiZWwsCiAgICAgICAgICAgICAgInZhbHVlIjogaXRlbS52YWx1ZQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KSwgMSksIF9jKCdicicpLCBfYygnYnInKSwgX2MoJ2VsLWJ1dHRvbicsIHsKICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJ3YXZlcyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LXdhdmVzIgogICAgICAgICAgfV0sCiAgICAgICAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogInN1Y2Nlc3MiCiAgICAgICAgICB9LAogICAgICAgICAgb246IHsKICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiBfdm0udXBkYXRlRGlzdHJpYnV0b3Ioc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBDb252ZXJ0ICIpXSldOwogICAgICB9CiAgICB9XSwgbnVsbCwgZmFsc2UsIDEyMjgyMDE5MTkpCiAgfSkgOiBfdm0uX2UoKSwgX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJhbGlnbiI6ICJjZW50ZXIiLAogICAgICAibGFiZWwiOiAiQXNtIiwKICAgICAgIndpZHRoIjogIjIyMCIKICAgIH0sCiAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgIGtleTogImRlZmF1bHQiLAogICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgcmV0dXJuIFtfYygnZWwtc2VsZWN0JywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInBsYWNlaG9sZGVyIjogIlNlbGVjdCIKICAgICAgICAgIH0sCiAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICB2YWx1ZTogc2NvcGUucm93LnN1cGVyQWRtaW5JZCwKICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgkJHYpIHsKICAgICAgICAgICAgICBfdm0uJHNldChzY29wZS5yb3csICJzdXBlckFkbWluSWQiLCAkJHYpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBleHByZXNzaW9uOiAic2NvcGUucm93LnN1cGVyQWRtaW5JZCIKICAgICAgICAgIH0KICAgICAgICB9LCBfdm0uX2woX3ZtLmFzbUxpc3QsIGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gX2MoJ2VsLW9wdGlvbicsIHsKICAgICAgICAgICAga2V5OiBpdGVtLmlkLAogICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICJsYWJlbCI6IGl0ZW0uZnVsbE5hbWUsCiAgICAgICAgICAgICAgInZhbHVlIjogaXRlbS5pZAogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KSwgMSksIF9jKCdicicpLCBfYygnYnInKSwgX3ZtLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyA/IF9jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAid2F2ZXMiLAogICAgICAgICAgICByYXdOYW1lOiAidi13YXZlcyIKICAgICAgICAgIH1dLAogICAgICAgICAgc3RhdGljQ2xhc3M6ICJmaWx0ZXItaXRlbSIsCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidHlwZSI6ICJzdWNjZXNzIgogICAgICAgICAgfSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICJjbGljayI6IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX3ZtLnVwZGF0ZUFzbShzY29wZS5yb3cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdigiIEFzc2lnbiBBc20gIildKSA6IF92bS5fZSgpLCBfYygnYnInKSwgX2MoJ2JyJyksIF92bS5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgPyBfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICAgICAgICB9XSwKICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAic3VjY2VzcyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS5yZW1vdmVBc20oc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBSZW1vdmUgQVNNICIpXSkgOiBfdm0uX2UoKV07CiAgICAgIH0KICAgIH1dKQogIH0pLCB0aGlzLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyB8fCB0aGlzLnJvbGVOYW1lID09ICdSU00nIHx8IHRoaXMucm9sZU5hbWUgPT0gJ1pvbmFsIEhlYWQnID8gX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJhbGlnbiI6ICJjZW50ZXIiLAogICAgICAibGFiZWwiOiAiUnNtIiwKICAgICAgIndpZHRoIjogIjIyMCIKICAgIH0sCiAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgIGtleTogImRlZmF1bHQiLAogICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgcmV0dXJuIFtfYygnZWwtc2VsZWN0JywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInBsYWNlaG9sZGVyIjogIlNlbGVjdCIKICAgICAgICAgIH0sCiAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICB2YWx1ZTogc2NvcGUucm93LnJzbUlkLAogICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKCQkdikgewogICAgICAgICAgICAgIF92bS4kc2V0KHNjb3BlLnJvdywgInJzbUlkIiwgJCR2KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXhwcmVzc2lvbjogInNjb3BlLnJvdy5yc21JZCIKICAgICAgICAgIH0KICAgICAgICB9LCBfdm0uX2woX3ZtLnJzbUxpc3QsIGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gX2MoJ2VsLW9wdGlvbicsIHsKICAgICAgICAgICAga2V5OiBpdGVtLmlkLAogICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICJsYWJlbCI6IGl0ZW0uZnVsbE5hbWUsCiAgICAgICAgICAgICAgInZhbHVlIjogaXRlbS5pZAogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KSwgMSksIF9jKCdicicpLCBfYygnYnInKSwgX3ZtLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyA/IF9jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAid2F2ZXMiLAogICAgICAgICAgICByYXdOYW1lOiAidi13YXZlcyIKICAgICAgICAgIH1dLAogICAgICAgICAgc3RhdGljQ2xhc3M6ICJmaWx0ZXItaXRlbSIsCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidHlwZSI6ICJzdWNjZXNzIgogICAgICAgICAgfSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICJjbGljayI6IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX3ZtLnVwZGF0ZVJzbShzY29wZS5yb3cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdigiIEFzc2lnbiBSU00gIildKSA6IF92bS5fZSgpLCBfYygnYnInKSwgX2MoJ2JyJyksIF92bS5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgPyBfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICAgICAgICB9XSwKICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAic3VjY2VzcyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS5yZW1vdmVSc20oc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBSZW1vdmUgUlNNICIpXSkgOiBfdm0uX2UoKV07CiAgICAgIH0KICAgIH1dLCBudWxsLCBmYWxzZSwgMzAyNzk5MjYzOCkKICB9KSA6IF92bS5fZSgpLCB0aGlzLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyB8fCB0aGlzLnJvbGVOYW1lID09ICdab25hbCBIZWFkJyA/IF9jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAiYWxpZ24iOiAiY2VudGVyIiwKICAgICAgImxhYmVsIjogIlpvbmFsIEhlYWQiLAogICAgICAid2lkdGgiOiAiMjIwIgogICAgfSwKICAgIHNjb3BlZFNsb3RzOiBfdm0uX3UoW3sKICAgICAga2V5OiAiZGVmYXVsdCIsCiAgICAgIGZuOiBmdW5jdGlvbiAoc2NvcGUpIHsKICAgICAgICByZXR1cm4gW19jKCdlbC1zZWxlY3QnLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAicGxhY2Vob2xkZXIiOiAiU2VsZWN0IgogICAgICAgICAgfSwKICAgICAgICAgIG1vZGVsOiB7CiAgICAgICAgICAgIHZhbHVlOiBzY29wZS5yb3cuem9uZUhlYWRJZCwKICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgkJHYpIHsKICAgICAgICAgICAgICBfdm0uJHNldChzY29wZS5yb3csICJ6b25lSGVhZElkIiwgJCR2KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXhwcmVzc2lvbjogInNjb3BlLnJvdy56b25lSGVhZElkIgogICAgICAgICAgfQogICAgICAgIH0sIF92bS5fbChfdm0uem9uYWxMaXN0LCBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIF9jKCdlbC1vcHRpb24nLCB7CiAgICAgICAgICAgIGtleTogaXRlbS5pZCwKICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAibGFiZWwiOiBpdGVtLmZ1bGxOYW1lLAogICAgICAgICAgICAgICJ2YWx1ZSI6IGl0ZW0uaWQKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSksIDEpLCBfYygnYnInKSwgX2MoJ2JyJyksIF92bS5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgPyBfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICAgICAgICB9XSwKICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAic3VjY2VzcyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS51cGRhdGVab25hbChzY29wZS5yb3cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdigiIEFzc2lnbiBab25hbCBIZWFkICIpXSkgOiBfdm0uX2UoKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfdm0ucm9sZU5hbWUgPT0gJ3N1cGVyYWRtaW4nID8gX2MoJ2VsLWJ1dHRvbicsIHsKICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJ3YXZlcyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LXdhdmVzIgogICAgICAgICAgfV0sCiAgICAgICAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogInN1Y2Nlc3MiCiAgICAgICAgICB9LAogICAgICAgICAgb246IHsKICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiBfdm0ucmVtb3ZlWm9uYWwoc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBSZW1vdmUgWm9uYWwgIildKSA6IF92bS5fZSgpXTsKICAgICAgfQogICAgfV0sIG51bGwsIGZhbHNlLCAxMDk2MzExNDE0KQogIH0pIDogX3ZtLl9lKCksIF92bS5teVJvbGUuaW5kZXhPZignc3VwZXJhZG1pbicpID4gLTEgPyBfYygnZWwtdGFibGUtY29sdW1uJywgewogICAgYXR0cnM6IHsKICAgICAgImFsaWduIjogImNlbnRlciIsCiAgICAgICJsYWJlbCI6IF92bS4kdCgndGFibGUuYWN0aW9ucycpLAogICAgICAid2lkdGgiOiAiMTgwIgogICAgfSwKICAgIHNjb3BlZFNsb3RzOiBfdm0uX3UoW3sKICAgICAga2V5OiAiZGVmYXVsdCIsCiAgICAgIGZuOiBmdW5jdGlvbiAoc2NvcGUpIHsKICAgICAgICByZXR1cm4gW19jKCdyb3V0ZXItbGluaycsIHsKICAgICAgICAgIHN0YXRpY0NsYXNzOiAibWFyZ2luLWhvcml6b250YWwiLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInRvIjogJy91c2VyQ29udGFjdC9saXN0LycgKyBzY29wZS5yb3cuaWQKICAgICAgICAgIH0KICAgICAgICB9LCBbX2MoJ2VsLWJ1dHRvbicsIHsKICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJ3YXZlcyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LXdhdmVzIgogICAgICAgICAgfV0sCiAgICAgICAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogInN1Y2Nlc3MiCiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdigiIEFkZCBDb250YWN0ICIpXSldLCAxKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfYygnZWwtcG9wb3ZlcicsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJwbGFjZW1lbnQiOiAicmlnaHQiLAogICAgICAgICAgICAid2lkdGgiOiAiNTAwIiwKICAgICAgICAgICAgInRyaWdnZXIiOiAiY2xpY2siCiAgICAgICAgICB9CiAgICAgICAgfSwgW19jKCdlbC10YWJsZScsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJkYXRhIjogX3ZtLnN0YXR1c0RldGFpbHMKICAgICAgICAgIH0KICAgICAgICB9LCBbX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ3aWR0aCI6ICIyMDAiLAogICAgICAgICAgICAicHJvcGVydHkiOiAiYWRtaW4uZnVsbE5hbWUiLAogICAgICAgICAgICAibGFiZWwiOiAiQWRtaW4gTmFtZSIKICAgICAgICAgIH0KICAgICAgICB9KSwgX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ3aWR0aCI6ICIyMDAiLAogICAgICAgICAgICAicHJvcGVydHkiOiAiIiwKICAgICAgICAgICAgImxhYmVsIjogInN0YXR1cyIKICAgICAgICAgIH0sCiAgICAgICAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgICAgICAgIGtleTogImRlZmF1bHQiLAogICAgICAgICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIFtzY29wZS5yb3cuc3RhdHVzID09IDEgPyBfYygnc3BhbicsIFtfdm0uX3YoIlVzZXIiKV0pIDogX3ZtLl9lKCksIHNjb3BlLnJvdy5zdGF0dXMgPT0gMiA/IF9jKCdzcGFuJywgW192bS5fdigiQ05GIildKSA6IF92bS5fZSgpLCBzY29wZS5yb3cuc3RhdHVzID09IDMgPyBfYygnc3BhbicsIFtfdm0uX3YoIlN1cGVyIFNvY2tldCIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSA0ID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJDRCIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSA1ID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJTRCIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSA2ID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJXQiIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSA3ID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJNUlAiKV0pIDogX3ZtLl9lKCksIHNjb3BlLnJvdy5zdGF0dXMgPT0gOCA/IF9jKCdzcGFuJywgW192bS5fdigiQ09QIildKSA6IF92bS5fZSgpLCBzY29wZS5yb3cuc3RhdHVzID09IDkgPyBfYygnc3BhbicsIFtfdm0uX3YoIlNPUCIpXSkgOiBfdm0uX2UoKV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH1dLCBudWxsLCB0cnVlKQogICAgICAgIH0pXSwgMSksIF9jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAibG9hZGluZyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LWxvYWRpbmciLAogICAgICAgICAgICB2YWx1ZTogX3ZtLnVzZXJTdGF0dXNMb2FkaW5nLAogICAgICAgICAgICBleHByZXNzaW9uOiAidXNlclN0YXR1c0xvYWRpbmciCiAgICAgICAgICB9XSwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJzbG90IjogInJlZmVyZW5jZSIsCiAgICAgICAgICAgICJzaXplIjogInNtYWxsIiwKICAgICAgICAgICAgInR5cGUiOiAid2FybmluZyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS5nZXRVc2VyU3RhdHVzTG9nKHNjb3BlLnJvdyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBzbG90OiAicmVmZXJlbmNlIgogICAgICAgIH0sIFtfdm0uX3YoIiBIaXN0b3J5ICIpXSldLCAxKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfYygncm91dGVyLWxpbmsnLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidG8iOiAnL3VzZXIvZWRpdC8nICsgc2NvcGUucm93LmlkCiAgICAgICAgICB9CiAgICAgICAgfSwgW19jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAid2F2ZXMiLAogICAgICAgICAgICByYXdOYW1lOiAidi13YXZlcyIKICAgICAgICAgIH1dLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAid2FybmluZyIsCiAgICAgICAgICAgICJzaXplIjogInNtYWxsIiwKICAgICAgICAgICAgImljb24iOiAiZWwtaWNvbi1lZGl0IgogICAgICAgICAgfQogICAgICAgIH0pXSwgMSldOwogICAgICB9CiAgICB9XSwgbnVsbCwgZmFsc2UsIDU0NDI0OTUxNSkKICB9KSA6IF92bS5fZSgpXSwgMSksIF9jKCdwYWdpbmF0aW9uJywgewogICAgZGlyZWN0aXZlczogW3sKICAgICAgbmFtZTogInNob3ciLAogICAgICByYXdOYW1lOiAidi1zaG93IiwKICAgICAgdmFsdWU6IF92bS50b3RhbCA+IDAsCiAgICAgIGV4cHJlc3Npb246ICJ0b3RhbCA+IDAiCiAgICB9XSwKICAgIGF0dHJzOiB7CiAgICAgICJ0b3RhbCI6IF92bS50b3RhbCwKICAgICAgInBhZ2UiOiBfdm0ubGlzdFF1ZXJ5LnBhZ2UsCiAgICAgICJsaW1pdCI6IF92bS5saXN0UXVlcnkubGltaXQKICAgIH0sCiAgICBvbjogewogICAgICAidXBkYXRlOnBhZ2UiOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgcmV0dXJuIF92bS4kc2V0KF92bS5saXN0UXVlcnksICJwYWdlIiwgJGV2ZW50KTsKICAgICAgfSwKICAgICAgInVwZGF0ZTpsaW1pdCI6IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICByZXR1cm4gX3ZtLiRzZXQoX3ZtLmxpc3RRdWVyeSwgImxpbWl0IiwgJGV2ZW50KTsKICAgICAgfSwKICAgICAgInBhZ2luYXRpb24iOiBfdm0uZ2V0TGlzdAogICAgfQogIH0pXSwgMSksIF9jKCdlbC10YWItcGFuZScsIHsKICAgIGF0dHJzOiB7CiAgICAgICJsYWJlbCI6ICJXQiIsCiAgICAgICJuYW1lIjogIndiIgogICAgfQogIH0sIFtfYygnZWwtdGFibGUnLCB7CiAgICBkaXJlY3RpdmVzOiBbewogICAgICBuYW1lOiAibG9hZGluZyIsCiAgICAgIHJhd05hbWU6ICJ2LWxvYWRpbmciLAogICAgICB2YWx1ZTogX3ZtLmxpc3RMb2FkaW5nLAogICAgICBleHByZXNzaW9uOiAibGlzdExvYWRpbmciCiAgICB9XSwKICAgIGtleTogX3ZtLnRhYmxlS2V5LAogICAgc3RhdGljU3R5bGU6IHsKICAgICAgIndpZHRoIjogIjEwMCUiCiAgICB9LAogICAgYXR0cnM6IHsKICAgICAgImRhdGEiOiBfdm0ubGlzdCwKICAgICAgImJvcmRlciI6ICIiLAogICAgICAiZml0IjogIiIsCiAgICAgICJoaWdobGlnaHQtY3VycmVudC1yb3ciOiAiIgogICAgfSwKICAgIG9uOiB7CiAgICAgICJzb3J0LWNoYW5nZSI6IF92bS5zb3J0Q2hhbmdlCiAgICB9CiAgfSwgW19jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAic29ydGFibGUiOiAiY3VzdG9tIiwKICAgICAgIndpZHRoIjogIjEwMHB4IiwKICAgICAgImFsaWduIjogImNlbnRlciIsCiAgICAgICJsYWJlbCI6IF92bS4kdCgndGFibGUuaWQnKSwKICAgICAgInByb3AiOiAiaWQiLAogICAgICAiY2xhc3MtbmFtZSI6IF92bS5nZXRTb3J0Q2xhc3MoJ2lkJykKICAgIH0KICB9KSwgX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJ3aWR0aCI6ICI5MCIsCiAgICAgICJhbGlnbiI6ICJjZW50ZXIiLAogICAgICAibGFiZWwiOiAiRW5hYmxlL0Rpc2FibGUiLAogICAgICAicHJvcCI6ICIiCiAgICB9LAogICAgc2NvcGVkU2xvdHM6IF92bS5fdShbewogICAgICBrZXk6ICJkZWZhdWx0IiwKICAgICAgZm46IGZ1bmN0aW9uIChzY29wZSkgewogICAgICAgIHJldHVybiBbX2MoJ2VuYWJsZWQnLCB7CiAgICAgICAgICBrZXk6IHNjb3BlLnJvdy5pZCwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ1cmwiOiAnL3VzZXJzLycgKyBzY29wZS5yb3cuaWQKICAgICAgICAgIH0sCiAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICB2YWx1ZTogc2NvcGUucm93LmVuYWJsZWQsCiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoJCR2KSB7CiAgICAgICAgICAgICAgX3ZtLiRzZXQoc2NvcGUucm93LCAiZW5hYmxlZCIsICQkdik7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGV4cHJlc3Npb246ICJzY29wZS5yb3cuZW5hYmxlZCIKICAgICAgICAgIH0KICAgICAgICB9KV07CiAgICAgIH0KICAgIH1dKQogIH0pLCBfYygnZWwtdGFibGUtY29sdW1uJywgewogICAgYXR0cnM6IHsKICAgICAgImxhYmVsIjogIkRpc3RyaWJ1dG9yIERldGFpbHMiLAogICAgICAid2lkdGgiOiAiMzUwcHgiCiAgICB9LAogICAgc2NvcGVkU2xvdHM6IF92bS5fdShbewogICAgICBrZXk6ICJkZWZhdWx0IiwKICAgICAgZm46IGZ1bmN0aW9uIChzY29wZSkgewogICAgICAgIHJldHVybiBbX2MoJ2VsLXJvdycsIHsKICAgICAgICAgIHN0YXRpY1N0eWxlOiB7CiAgICAgICAgICAgICJ0ZXh0LWFsaWduIjogImxlZnQiCiAgICAgICAgICB9LAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAiZmxleCIsCiAgICAgICAgICAgICJqdXN0aWZ5IjogIiIsCiAgICAgICAgICAgICJzcGFuIjogMjQsCiAgICAgICAgICAgICJndXR0ZXIiOiAyMAogICAgICAgICAgfQogICAgICAgIH0sIFtfYygnZWwtY29sJywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInNwYW4iOiAxMgogICAgICAgICAgfQogICAgICAgIH0sIFtfYygnYicsIFtfdm0uX3YoIk5hbWU6IildKSwgX3ZtLl92KCLCoMKgIiksIF9jKCdzcGFuJywgW192bS5fdihfdm0uX3Moc2NvcGUucm93LmZ1bGxOYW1lKSldKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfYygnYicsIFtfdm0uX3YoIkNvbXBhbnkgTmFtZToiKV0pLCBfdm0uX3YoIsKgwqAiKSwgX2MoJ3NwYW4nLCBbX3ZtLl92KF92bS5fcyhzY29wZS5yb3cuY29tcGFueU5hbWUpKV0pLCBfYygnYnInKSwgX2MoJ2JyJyksIF9jKCdiJywgW192bS5fdigiRW1haWwgQWRkcmVzczoiKV0pLCBfdm0uX3YoIsKgwqAiKSwgX2MoJ3NwYW4nLCBbX3ZtLl92KF92bS5fcyhzY29wZS5yb3cuZW1haWwpKV0pLCBfYygnYnInKSwgX2MoJ2JyJyldKSwgX2MoJ2VsLWNvbCcsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJzcGFuIjogMTIKICAgICAgICAgIH0KICAgICAgICB9LCBbX2MoJ2InLCBbX3ZtLl92KCJQaW5jb2RlIE51bWJlcjoiKV0pLCBfdm0uX3YoIsKgwqAiKSwgX2MoJ3NwYW4nLCBbX3ZtLl92KF92bS5fcyhzY29wZS5yb3cucGluY29kZSkpXSksIF9jKCdicicpLCBfYygnYnInKSwgX2MoJ2InLCBbX3ZtLl92KCJDaXR5IE5hbWU6IildKSwgX3ZtLl92KCLCoMKgIiksIF9jKCdzcGFuJywgW192bS5fdihfdm0uX3Moc2NvcGUucm93LmNpdHkpKV0pLCBfYygnYnInKSwgX2MoJ2JyJyksIF9jKCdiJywgW192bS5fdigiUmVnaXN0ZXJlZCBOdW1iZXI6IildKSwgX3ZtLl92KCLCoMKgIiksIF92bS5fbChzY29wZS5yb3cudXNlckNvbnRhY3QsIGZ1bmN0aW9uIChjb250YWN0KSB7CiAgICAgICAgICByZXR1cm4gX2MoJ3NwYW4nLCB7CiAgICAgICAgICAgIGtleTogY29udGFjdC5pZAogICAgICAgICAgfSwgW192bS5fdigiICIgKyBfdm0uX3MoY29udGFjdC5jb250YWN0TnVtYmVyKSksIF9jKCdicicpLCBfYygnYnInKV0pOwogICAgICAgIH0pXSwgMildLCAxKV07CiAgICAgIH0KICAgIH1dKQogIH0pLCBfdm0uc2hvd0NyZWF0ZWREYXRlID8gX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJsYWJlbCI6IF92bS4kdCgndGFibGUuY3JlYXRlZERhdGUnKSwKICAgICAgIndpZHRoIjogIjE1MHB4IiwKICAgICAgImFsaWduIjogImNlbnRlciIKICAgIH0sCiAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgIGtleTogImRlZmF1bHQiLAogICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgcmV0dXJuIFtfYygnc3BhbicsIHsKICAgICAgICAgIHN0YXRpY1N0eWxlOiB7CiAgICAgICAgICAgICJjb2xvciI6ICJyZWQiCiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdihfdm0uX3MoX3ZtLl9mKCJtb21lbnQiKShzY29wZS5yb3cuY3JlYXRlZFRpbWVzdGFtcCwgImZyb20iKSkpXSldOwogICAgICB9CiAgICB9XSwgbnVsbCwgZmFsc2UsIDkxMjUyNjg3MCkKICB9KSA6IF92bS5fZSgpLCB0aGlzLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyA/IF9jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAiYWxpZ24iOiAiY2VudGVyIiwKICAgICAgImxhYmVsIjogIkNvbnZlcnQiLAogICAgICAid2lkdGgiOiAiMjIwIgogICAgfSwKICAgIHNjb3BlZFNsb3RzOiBfdm0uX3UoW3sKICAgICAga2V5OiAiZGVmYXVsdCIsCiAgICAgIGZuOiBmdW5jdGlvbiAoc2NvcGUpIHsKICAgICAgICByZXR1cm4gW19jKCdlbC1zZWxlY3QnLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAicGxhY2Vob2xkZXIiOiAiU2VsZWN0IgogICAgICAgICAgfSwKICAgICAgICAgIG1vZGVsOiB7CiAgICAgICAgICAgIHZhbHVlOiBzY29wZS5yb3cuc3RhdHVzLAogICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKCQkdikgewogICAgICAgICAgICAgIF92bS4kc2V0KHNjb3BlLnJvdywgInN0YXR1cyIsICQkdik7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGV4cHJlc3Npb246ICJzY29wZS5yb3cuc3RhdHVzIgogICAgICAgICAgfQogICAgICAgIH0sIF92bS5fbChfdm0udXNlckxpc3QsIGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gX2MoJ2VsLW9wdGlvbicsIHsKICAgICAgICAgICAga2V5OiBpdGVtLnZhbHVlLAogICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICJsYWJlbCI6IGl0ZW0ubGFiZWwsCiAgICAgICAgICAgICAgInZhbHVlIjogaXRlbS52YWx1ZQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KSwgMSksIF9jKCdicicpLCBfYygnYnInKSwgX2MoJ2VsLWJ1dHRvbicsIHsKICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJ3YXZlcyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LXdhdmVzIgogICAgICAgICAgfV0sCiAgICAgICAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogInN1Y2Nlc3MiCiAgICAgICAgICB9LAogICAgICAgICAgb246IHsKICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiBfdm0udXBkYXRlRGlzdHJpYnV0b3Ioc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBDb252ZXJ0ICIpXSldOwogICAgICB9CiAgICB9XSwgbnVsbCwgZmFsc2UsIDEyMjgyMDE5MTkpCiAgfSkgOiBfdm0uX2UoKSwgX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJhbGlnbiI6ICJjZW50ZXIiLAogICAgICAibGFiZWwiOiAiQXNtIiwKICAgICAgIndpZHRoIjogIjIyMCIKICAgIH0sCiAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgIGtleTogImRlZmF1bHQiLAogICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgcmV0dXJuIFtfYygnZWwtc2VsZWN0JywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInBsYWNlaG9sZGVyIjogIlNlbGVjdCIKICAgICAgICAgIH0sCiAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICB2YWx1ZTogc2NvcGUucm93LnN1cGVyQWRtaW5JZCwKICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgkJHYpIHsKICAgICAgICAgICAgICBfdm0uJHNldChzY29wZS5yb3csICJzdXBlckFkbWluSWQiLCAkJHYpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBleHByZXNzaW9uOiAic2NvcGUucm93LnN1cGVyQWRtaW5JZCIKICAgICAgICAgIH0KICAgICAgICB9LCBfdm0uX2woX3ZtLmFzbUxpc3QsIGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gX2MoJ2VsLW9wdGlvbicsIHsKICAgICAgICAgICAga2V5OiBpdGVtLmlkLAogICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICJsYWJlbCI6IGl0ZW0uZnVsbE5hbWUsCiAgICAgICAgICAgICAgInZhbHVlIjogaXRlbS5pZAogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KSwgMSksIF9jKCdicicpLCBfYygnYnInKSwgX3ZtLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyA/IF9jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAid2F2ZXMiLAogICAgICAgICAgICByYXdOYW1lOiAidi13YXZlcyIKICAgICAgICAgIH1dLAogICAgICAgICAgc3RhdGljQ2xhc3M6ICJmaWx0ZXItaXRlbSIsCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidHlwZSI6ICJzdWNjZXNzIgogICAgICAgICAgfSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICJjbGljayI6IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX3ZtLnVwZGF0ZUFzbShzY29wZS5yb3cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdigiIEFzc2lnbiBBc20gIildKSA6IF92bS5fZSgpLCBfYygnYnInKSwgX2MoJ2JyJyksIF92bS5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgPyBfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICAgICAgICB9XSwKICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAic3VjY2VzcyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS5yZW1vdmVBc20oc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBSZW1vdmUgQVNNICIpXSkgOiBfdm0uX2UoKV07CiAgICAgIH0KICAgIH1dKQogIH0pLCB0aGlzLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyB8fCB0aGlzLnJvbGVOYW1lID09ICdSU00nIHx8IHRoaXMucm9sZU5hbWUgPT0gJ1pvbmFsIEhlYWQnID8gX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJhbGlnbiI6ICJjZW50ZXIiLAogICAgICAibGFiZWwiOiAiUnNtIiwKICAgICAgIndpZHRoIjogIjIyMCIKICAgIH0sCiAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgIGtleTogImRlZmF1bHQiLAogICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgcmV0dXJuIFtfYygnZWwtc2VsZWN0JywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInBsYWNlaG9sZGVyIjogIlNlbGVjdCIKICAgICAgICAgIH0sCiAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICB2YWx1ZTogc2NvcGUucm93LnJzbUlkLAogICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKCQkdikgewogICAgICAgICAgICAgIF92bS4kc2V0KHNjb3BlLnJvdywgInJzbUlkIiwgJCR2KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXhwcmVzc2lvbjogInNjb3BlLnJvdy5yc21JZCIKICAgICAgICAgIH0KICAgICAgICB9LCBfdm0uX2woX3ZtLnJzbUxpc3QsIGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gX2MoJ2VsLW9wdGlvbicsIHsKICAgICAgICAgICAga2V5OiBpdGVtLmlkLAogICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICJsYWJlbCI6IGl0ZW0uZnVsbE5hbWUsCiAgICAgICAgICAgICAgInZhbHVlIjogaXRlbS5pZAogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KSwgMSksIF9jKCdicicpLCBfYygnYnInKSwgX3ZtLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyA/IF9jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAid2F2ZXMiLAogICAgICAgICAgICByYXdOYW1lOiAidi13YXZlcyIKICAgICAgICAgIH1dLAogICAgICAgICAgc3RhdGljQ2xhc3M6ICJmaWx0ZXItaXRlbSIsCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidHlwZSI6ICJzdWNjZXNzIgogICAgICAgICAgfSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICJjbGljayI6IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX3ZtLnVwZGF0ZVJzbShzY29wZS5yb3cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdigiIEFzc2lnbiBSU00gIildKSA6IF92bS5fZSgpLCBfYygnYnInKSwgX2MoJ2JyJyksIF92bS5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgPyBfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICAgICAgICB9XSwKICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAic3VjY2VzcyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS5yZW1vdmVSc20oc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBSZW1vdmUgUlNNICIpXSkgOiBfdm0uX2UoKV07CiAgICAgIH0KICAgIH1dLCBudWxsLCBmYWxzZSwgMzAyNzk5MjYzOCkKICB9KSA6IF92bS5fZSgpLCB0aGlzLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyB8fCB0aGlzLnJvbGVOYW1lID09ICdab25hbCBIZWFkJyA/IF9jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAiYWxpZ24iOiAiY2VudGVyIiwKICAgICAgImxhYmVsIjogIlpvbmFsIEhlYWQiLAogICAgICAid2lkdGgiOiAiMjIwIgogICAgfSwKICAgIHNjb3BlZFNsb3RzOiBfdm0uX3UoW3sKICAgICAga2V5OiAiZGVmYXVsdCIsCiAgICAgIGZuOiBmdW5jdGlvbiAoc2NvcGUpIHsKICAgICAgICByZXR1cm4gW19jKCdlbC1zZWxlY3QnLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAicGxhY2Vob2xkZXIiOiAiU2VsZWN0IgogICAgICAgICAgfSwKICAgICAgICAgIG1vZGVsOiB7CiAgICAgICAgICAgIHZhbHVlOiBzY29wZS5yb3cuem9uZUhlYWRJZCwKICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgkJHYpIHsKICAgICAgICAgICAgICBfdm0uJHNldChzY29wZS5yb3csICJ6b25lSGVhZElkIiwgJCR2KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXhwcmVzc2lvbjogInNjb3BlLnJvdy56b25lSGVhZElkIgogICAgICAgICAgfQogICAgICAgIH0sIF92bS5fbChfdm0uem9uYWxMaXN0LCBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIF9jKCdlbC1vcHRpb24nLCB7CiAgICAgICAgICAgIGtleTogaXRlbS5pZCwKICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAibGFiZWwiOiBpdGVtLmZ1bGxOYW1lLAogICAgICAgICAgICAgICJ2YWx1ZSI6IGl0ZW0uaWQKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSksIDEpLCBfYygnYnInKSwgX2MoJ2JyJyksIF92bS5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgPyBfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICAgICAgICB9XSwKICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAic3VjY2VzcyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS51cGRhdGVab25hbChzY29wZS5yb3cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdigiIEFzc2lnbiBab25hbCBIZWFkICIpXSkgOiBfdm0uX2UoKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfdm0ucm9sZU5hbWUgPT0gJ3N1cGVyYWRtaW4nID8gX2MoJ2VsLWJ1dHRvbicsIHsKICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJ3YXZlcyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LXdhdmVzIgogICAgICAgICAgfV0sCiAgICAgICAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogInN1Y2Nlc3MiCiAgICAgICAgICB9LAogICAgICAgICAgb246IHsKICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiBfdm0ucmVtb3ZlWm9uYWwoc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBSZW1vdmUgWm9uYWwgIildKSA6IF92bS5fZSgpXTsKICAgICAgfQogICAgfV0sIG51bGwsIGZhbHNlLCAxMDk2MzExNDE0KQogIH0pIDogX3ZtLl9lKCksIF92bS5teVJvbGUuaW5kZXhPZignc3VwZXJhZG1pbicpID4gLTEgPyBfYygnZWwtdGFibGUtY29sdW1uJywgewogICAgYXR0cnM6IHsKICAgICAgImFsaWduIjogImNlbnRlciIsCiAgICAgICJsYWJlbCI6IF92bS4kdCgndGFibGUuYWN0aW9ucycpLAogICAgICAid2lkdGgiOiAiMTgwIgogICAgfSwKICAgIHNjb3BlZFNsb3RzOiBfdm0uX3UoW3sKICAgICAga2V5OiAiZGVmYXVsdCIsCiAgICAgIGZuOiBmdW5jdGlvbiAoc2NvcGUpIHsKICAgICAgICByZXR1cm4gW19jKCdyb3V0ZXItbGluaycsIHsKICAgICAgICAgIHN0YXRpY0NsYXNzOiAibWFyZ2luLWhvcml6b250YWwiLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInRvIjogJy91c2VyQ29udGFjdC9saXN0LycgKyBzY29wZS5yb3cuaWQKICAgICAgICAgIH0KICAgICAgICB9LCBbX2MoJ2VsLWJ1dHRvbicsIHsKICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJ3YXZlcyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LXdhdmVzIgogICAgICAgICAgfV0sCiAgICAgICAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogInN1Y2Nlc3MiCiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdigiIEFkZCBDb250YWN0ICIpXSldLCAxKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfYygnZWwtcG9wb3ZlcicsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJwbGFjZW1lbnQiOiAicmlnaHQiLAogICAgICAgICAgICAid2lkdGgiOiAiNTAwIiwKICAgICAgICAgICAgInRyaWdnZXIiOiAiY2xpY2siCiAgICAgICAgICB9CiAgICAgICAgfSwgW19jKCdlbC10YWJsZScsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJkYXRhIjogX3ZtLnN0YXR1c0RldGFpbHMKICAgICAgICAgIH0KICAgICAgICB9LCBbX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ3aWR0aCI6ICIyMDAiLAogICAgICAgICAgICAicHJvcGVydHkiOiAiYWRtaW4uZnVsbE5hbWUiLAogICAgICAgICAgICAibGFiZWwiOiAiQWRtaW4gTmFtZSIKICAgICAgICAgIH0KICAgICAgICB9KSwgX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ3aWR0aCI6ICIyMDAiLAogICAgICAgICAgICAicHJvcGVydHkiOiAiIiwKICAgICAgICAgICAgImxhYmVsIjogInN0YXR1cyIKICAgICAgICAgIH0sCiAgICAgICAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgICAgICAgIGtleTogImRlZmF1bHQiLAogICAgICAgICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIFtzY29wZS5yb3cuc3RhdHVzID09IDEgPyBfYygnc3BhbicsIFtfdm0uX3YoIlVzZXIiKV0pIDogX3ZtLl9lKCksIHNjb3BlLnJvdy5zdGF0dXMgPT0gMiA/IF9jKCdzcGFuJywgW192bS5fdigiQ05GIildKSA6IF92bS5fZSgpLCBzY29wZS5yb3cuc3RhdHVzID09IDMgPyBfYygnc3BhbicsIFtfdm0uX3YoIlN1cGVyIFNvY2tldCIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSA0ID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJDRCIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSA1ID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJTRCIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSA2ID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJXQiIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSA3ID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJNUlAiKV0pIDogX3ZtLl9lKCksIHNjb3BlLnJvdy5zdGF0dXMgPT0gOCA/IF9jKCdzcGFuJywgW192bS5fdigiQ09QIildKSA6IF92bS5fZSgpLCBzY29wZS5yb3cuc3RhdHVzID09IDkgPyBfYygnc3BhbicsIFtfdm0uX3YoIlNPUCIpXSkgOiBfdm0uX2UoKV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH1dLCBudWxsLCB0cnVlKQogICAgICAgIH0pXSwgMSksIF9jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAibG9hZGluZyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LWxvYWRpbmciLAogICAgICAgICAgICB2YWx1ZTogX3ZtLnVzZXJTdGF0dXNMb2FkaW5nLAogICAgICAgICAgICBleHByZXNzaW9uOiAidXNlclN0YXR1c0xvYWRpbmciCiAgICAgICAgICB9XSwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJzbG90IjogInJlZmVyZW5jZSIsCiAgICAgICAgICAgICJzaXplIjogInNtYWxsIiwKICAgICAgICAgICAgInR5cGUiOiAid2FybmluZyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS5nZXRVc2VyU3RhdHVzTG9nKHNjb3BlLnJvdyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBzbG90OiAicmVmZXJlbmNlIgogICAgICAgIH0sIFtfdm0uX3YoIiBIaXN0b3J5ICIpXSldLCAxKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfYygncm91dGVyLWxpbmsnLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidG8iOiAnL3VzZXIvZWRpdC8nICsgc2NvcGUucm93LmlkCiAgICAgICAgICB9CiAgICAgICAgfSwgW19jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAid2F2ZXMiLAogICAgICAgICAgICByYXdOYW1lOiAidi13YXZlcyIKICAgICAgICAgIH1dLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAid2FybmluZyIsCiAgICAgICAgICAgICJzaXplIjogInNtYWxsIiwKICAgICAgICAgICAgImljb24iOiAiZWwtaWNvbi1lZGl0IgogICAgICAgICAgfQogICAgICAgIH0pXSwgMSldOwogICAgICB9CiAgICB9XSwgbnVsbCwgZmFsc2UsIDU0NDI0OTUxNSkKICB9KSA6IF92bS5fZSgpXSwgMSksIF9jKCdwYWdpbmF0aW9uJywgewogICAgZGlyZWN0aXZlczogW3sKICAgICAgbmFtZTogInNob3ciLAogICAgICByYXdOYW1lOiAidi1zaG93IiwKICAgICAgdmFsdWU6IF92bS50b3RhbCA+IDAsCiAgICAgIGV4cHJlc3Npb246ICJ0b3RhbCA+IDAiCiAgICB9XSwKICAgIGF0dHJzOiB7CiAgICAgICJ0b3RhbCI6IF92bS50b3RhbCwKICAgICAgInBhZ2UiOiBfdm0ubGlzdFF1ZXJ5LnBhZ2UsCiAgICAgICJsaW1pdCI6IF92bS5saXN0UXVlcnkubGltaXQKICAgIH0sCiAgICBvbjogewogICAgICAidXBkYXRlOnBhZ2UiOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgcmV0dXJuIF92bS4kc2V0KF92bS5saXN0UXVlcnksICJwYWdlIiwgJGV2ZW50KTsKICAgICAgfSwKICAgICAgInVwZGF0ZTpsaW1pdCI6IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICByZXR1cm4gX3ZtLiRzZXQoX3ZtLmxpc3RRdWVyeSwgImxpbWl0IiwgJGV2ZW50KTsKICAgICAgfSwKICAgICAgInBhZ2luYXRpb24iOiBfdm0uZ2V0TGlzdAogICAgfQogIH0pXSwgMSksIF9jKCdlbC10YWItcGFuZScsIHsKICAgIGF0dHJzOiB7CiAgICAgICJsYWJlbCI6ICJNUlAiLAogICAgICAibmFtZSI6ICJtcnAiCiAgICB9CiAgfSwgW19jKCdlbC10YWJsZScsIHsKICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgIG5hbWU6ICJsb2FkaW5nIiwKICAgICAgcmF3TmFtZTogInYtbG9hZGluZyIsCiAgICAgIHZhbHVlOiBfdm0ubGlzdExvYWRpbmcsCiAgICAgIGV4cHJlc3Npb246ICJsaXN0TG9hZGluZyIKICAgIH1dLAogICAga2V5OiBfdm0udGFibGVLZXksCiAgICBzdGF0aWNTdHlsZTogewogICAgICAid2lkdGgiOiAiMTAwJSIKICAgIH0sCiAgICBhdHRyczogewogICAgICAiZGF0YSI6IF92bS5saXN0LAogICAgICAiYm9yZGVyIjogIiIsCiAgICAgICJmaXQiOiAiIiwKICAgICAgImhpZ2hsaWdodC1jdXJyZW50LXJvdyI6ICIiCiAgICB9LAogICAgb246IHsKICAgICAgInNvcnQtY2hhbmdlIjogX3ZtLnNvcnRDaGFuZ2UKICAgIH0KICB9LCBbX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJzb3J0YWJsZSI6ICJjdXN0b20iLAogICAgICAid2lkdGgiOiAiMTAwcHgiLAogICAgICAiYWxpZ24iOiAiY2VudGVyIiwKICAgICAgImxhYmVsIjogX3ZtLiR0KCd0YWJsZS5pZCcpLAogICAgICAicHJvcCI6ICJpZCIsCiAgICAgICJjbGFzcy1uYW1lIjogX3ZtLmdldFNvcnRDbGFzcygnaWQnKQogICAgfQogIH0pLCBfYygnZWwtdGFibGUtY29sdW1uJywgewogICAgYXR0cnM6IHsKICAgICAgIndpZHRoIjogIjkwIiwKICAgICAgImFsaWduIjogImNlbnRlciIsCiAgICAgICJsYWJlbCI6ICJFbmFibGUvRGlzYWJsZSIsCiAgICAgICJwcm9wIjogIiIKICAgIH0sCiAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgIGtleTogImRlZmF1bHQiLAogICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgcmV0dXJuIFtfYygnZW5hYmxlZCcsIHsKICAgICAgICAgIGtleTogc2NvcGUucm93LmlkLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInVybCI6ICcvdXNlcnMvJyArIHNjb3BlLnJvdy5pZAogICAgICAgICAgfSwKICAgICAgICAgIG1vZGVsOiB7CiAgICAgICAgICAgIHZhbHVlOiBzY29wZS5yb3cuZW5hYmxlZCwKICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgkJHYpIHsKICAgICAgICAgICAgICBfdm0uJHNldChzY29wZS5yb3csICJlbmFibGVkIiwgJCR2KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXhwcmVzc2lvbjogInNjb3BlLnJvdy5lbmFibGVkIgogICAgICAgICAgfQogICAgICAgIH0pXTsKICAgICAgfQogICAgfV0pCiAgfSksIF9jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAibGFiZWwiOiAiRGlzdHJpYnV0b3IgRGV0YWlscyIsCiAgICAgICJ3aWR0aCI6ICIzNTBweCIKICAgIH0sCiAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgIGtleTogImRlZmF1bHQiLAogICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgcmV0dXJuIFtfYygnZWwtcm93JywgewogICAgICAgICAgc3RhdGljU3R5bGU6IHsKICAgICAgICAgICAgInRleHQtYWxpZ24iOiAibGVmdCIKICAgICAgICAgIH0sCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidHlwZSI6ICJmbGV4IiwKICAgICAgICAgICAgImp1c3RpZnkiOiAiIiwKICAgICAgICAgICAgInNwYW4iOiAyNCwKICAgICAgICAgICAgImd1dHRlciI6IDIwCiAgICAgICAgICB9CiAgICAgICAgfSwgW19jKCdlbC1jb2wnLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAic3BhbiI6IDEyCiAgICAgICAgICB9CiAgICAgICAgfSwgW19jKCdiJywgW192bS5fdigiTmFtZToiKV0pLCBfdm0uX3YoIsKgwqAiKSwgX2MoJ3NwYW4nLCBbX3ZtLl92KF92bS5fcyhzY29wZS5yb3cuZnVsbE5hbWUpKV0pLCBfYygnYnInKSwgX2MoJ2JyJyksIF9jKCdiJywgW192bS5fdigiQ29tcGFueSBOYW1lOiIpXSksIF92bS5fdigiwqDCoCIpLCBfYygnc3BhbicsIFtfdm0uX3YoX3ZtLl9zKHNjb3BlLnJvdy5jb21wYW55TmFtZSkpXSksIF9jKCdicicpLCBfYygnYnInKSwgX2MoJ2InLCBbX3ZtLl92KCJFbWFpbCBBZGRyZXNzOiIpXSksIF92bS5fdigiwqDCoCIpLCBfYygnc3BhbicsIFtfdm0uX3YoX3ZtLl9zKHNjb3BlLnJvdy5lbWFpbCkpXSksIF9jKCdicicpLCBfYygnYnInKV0pLCBfYygnZWwtY29sJywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInNwYW4iOiAxMgogICAgICAgICAgfQogICAgICAgIH0sIFtfYygnYicsIFtfdm0uX3YoIlBpbmNvZGUgTnVtYmVyOiIpXSksIF92bS5fdigiwqDCoCIpLCBfYygnc3BhbicsIFtfdm0uX3YoX3ZtLl9zKHNjb3BlLnJvdy5waW5jb2RlKSldKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfYygnYicsIFtfdm0uX3YoIkNpdHkgTmFtZToiKV0pLCBfdm0uX3YoIsKgwqAiKSwgX2MoJ3NwYW4nLCBbX3ZtLl92KF92bS5fcyhzY29wZS5yb3cuY2l0eSkpXSksIF9jKCdicicpLCBfYygnYnInKSwgX2MoJ2InLCBbX3ZtLl92KCJSZWdpc3RlcmVkIE51bWJlcjoiKV0pLCBfdm0uX3YoIsKgwqAiKSwgX3ZtLl9sKHNjb3BlLnJvdy51c2VyQ29udGFjdCwgZnVuY3Rpb24gKGNvbnRhY3QpIHsKICAgICAgICAgIHJldHVybiBfYygnc3BhbicsIHsKICAgICAgICAgICAga2V5OiBjb250YWN0LmlkCiAgICAgICAgICB9LCBbX3ZtLl92KCIgIiArIF92bS5fcyhjb250YWN0LmNvbnRhY3ROdW1iZXIpKSwgX2MoJ2JyJyksIF9jKCdicicpXSk7CiAgICAgICAgfSldLCAyKV0sIDEpXTsKICAgICAgfQogICAgfV0pCiAgfSksIF92bS5zaG93Q3JlYXRlZERhdGUgPyBfYygnZWwtdGFibGUtY29sdW1uJywgewogICAgYXR0cnM6IHsKICAgICAgImxhYmVsIjogX3ZtLiR0KCd0YWJsZS5jcmVhdGVkRGF0ZScpLAogICAgICAid2lkdGgiOiAiMTUwcHgiLAogICAgICAiYWxpZ24iOiAiY2VudGVyIgogICAgfSwKICAgIHNjb3BlZFNsb3RzOiBfdm0uX3UoW3sKICAgICAga2V5OiAiZGVmYXVsdCIsCiAgICAgIGZuOiBmdW5jdGlvbiAoc2NvcGUpIHsKICAgICAgICByZXR1cm4gW19jKCdzcGFuJywgewogICAgICAgICAgc3RhdGljU3R5bGU6IHsKICAgICAgICAgICAgImNvbG9yIjogInJlZCIKICAgICAgICAgIH0KICAgICAgICB9LCBbX3ZtLl92KF92bS5fcyhfdm0uX2YoIm1vbWVudCIpKHNjb3BlLnJvdy5jcmVhdGVkVGltZXN0YW1wLCAiZnJvbSIpKSldKV07CiAgICAgIH0KICAgIH1dLCBudWxsLCBmYWxzZSwgOTEyNTI2ODcwKQogIH0pIDogX3ZtLl9lKCksIHRoaXMucm9sZU5hbWUgPT0gJ3N1cGVyYWRtaW4nID8gX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJhbGlnbiI6ICJjZW50ZXIiLAogICAgICAibGFiZWwiOiAiQ29udmVydCIsCiAgICAgICJ3aWR0aCI6ICIyMjAiCiAgICB9LAogICAgc2NvcGVkU2xvdHM6IF92bS5fdShbewogICAgICBrZXk6ICJkZWZhdWx0IiwKICAgICAgZm46IGZ1bmN0aW9uIChzY29wZSkgewogICAgICAgIHJldHVybiBbX2MoJ2VsLXNlbGVjdCcsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJwbGFjZWhvbGRlciI6ICJTZWxlY3QiCiAgICAgICAgICB9LAogICAgICAgICAgbW9kZWw6IHsKICAgICAgICAgICAgdmFsdWU6IHNjb3BlLnJvdy5zdGF0dXMsCiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoJCR2KSB7CiAgICAgICAgICAgICAgX3ZtLiRzZXQoc2NvcGUucm93LCAic3RhdHVzIiwgJCR2KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXhwcmVzc2lvbjogInNjb3BlLnJvdy5zdGF0dXMiCiAgICAgICAgICB9CiAgICAgICAgfSwgX3ZtLl9sKF92bS51c2VyTGlzdCwgZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBfYygnZWwtb3B0aW9uJywgewogICAgICAgICAgICBrZXk6IGl0ZW0udmFsdWUsCiAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgImxhYmVsIjogaXRlbS5sYWJlbCwKICAgICAgICAgICAgICAidmFsdWUiOiBpdGVtLnZhbHVlCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pLCAxKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICAgICAgICB9XSwKICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAic3VjY2VzcyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS51cGRhdGVEaXN0cmlidXRvcihzY29wZS5yb3cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdigiIENvbnZlcnQgIildKV07CiAgICAgIH0KICAgIH1dLCBudWxsLCBmYWxzZSwgMTIyODIwMTkxOSkKICB9KSA6IF92bS5fZSgpLCBfYygnZWwtdGFibGUtY29sdW1uJywgewogICAgYXR0cnM6IHsKICAgICAgImFsaWduIjogImNlbnRlciIsCiAgICAgICJsYWJlbCI6ICJBc20iLAogICAgICAid2lkdGgiOiAiMjIwIgogICAgfSwKICAgIHNjb3BlZFNsb3RzOiBfdm0uX3UoW3sKICAgICAga2V5OiAiZGVmYXVsdCIsCiAgICAgIGZuOiBmdW5jdGlvbiAoc2NvcGUpIHsKICAgICAgICByZXR1cm4gW19jKCdlbC1zZWxlY3QnLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAicGxhY2Vob2xkZXIiOiAiU2VsZWN0IgogICAgICAgICAgfSwKICAgICAgICAgIG1vZGVsOiB7CiAgICAgICAgICAgIHZhbHVlOiBzY29wZS5yb3cuc3VwZXJBZG1pbklkLAogICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKCQkdikgewogICAgICAgICAgICAgIF92bS4kc2V0KHNjb3BlLnJvdywgInN1cGVyQWRtaW5JZCIsICQkdik7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGV4cHJlc3Npb246ICJzY29wZS5yb3cuc3VwZXJBZG1pbklkIgogICAgICAgICAgfQogICAgICAgIH0sIF92bS5fbChfdm0uYXNtTGlzdCwgZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBfYygnZWwtb3B0aW9uJywgewogICAgICAgICAgICBrZXk6IGl0ZW0uaWQsCiAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgImxhYmVsIjogaXRlbS5mdWxsTmFtZSwKICAgICAgICAgICAgICAidmFsdWUiOiBpdGVtLmlkCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pLCAxKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfdm0ucm9sZU5hbWUgPT0gJ3N1cGVyYWRtaW4nID8gX2MoJ2VsLWJ1dHRvbicsIHsKICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJ3YXZlcyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LXdhdmVzIgogICAgICAgICAgfV0sCiAgICAgICAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogInN1Y2Nlc3MiCiAgICAgICAgICB9LAogICAgICAgICAgb246IHsKICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiBfdm0udXBkYXRlQXNtKHNjb3BlLnJvdyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBbX3ZtLl92KCIgQXNzaWduIEFzbSAiKV0pIDogX3ZtLl9lKCksIF9jKCdicicpLCBfYygnYnInKSwgX3ZtLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyA/IF9jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAid2F2ZXMiLAogICAgICAgICAgICByYXdOYW1lOiAidi13YXZlcyIKICAgICAgICAgIH1dLAogICAgICAgICAgc3RhdGljQ2xhc3M6ICJmaWx0ZXItaXRlbSIsCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidHlwZSI6ICJzdWNjZXNzIgogICAgICAgICAgfSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICJjbGljayI6IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX3ZtLnJlbW92ZUFzbShzY29wZS5yb3cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdigiIFJlbW92ZSBBU00gIildKSA6IF92bS5fZSgpXTsKICAgICAgfQogICAgfV0pCiAgfSksIHRoaXMucm9sZU5hbWUgPT0gJ3N1cGVyYWRtaW4nIHx8IHRoaXMucm9sZU5hbWUgPT0gJ1JTTScgfHwgdGhpcy5yb2xlTmFtZSA9PSAnWm9uYWwgSGVhZCcgPyBfYygnZWwtdGFibGUtY29sdW1uJywgewogICAgYXR0cnM6IHsKICAgICAgImFsaWduIjogImNlbnRlciIsCiAgICAgICJsYWJlbCI6ICJSc20iLAogICAgICAid2lkdGgiOiAiMjIwIgogICAgfSwKICAgIHNjb3BlZFNsb3RzOiBfdm0uX3UoW3sKICAgICAga2V5OiAiZGVmYXVsdCIsCiAgICAgIGZuOiBmdW5jdGlvbiAoc2NvcGUpIHsKICAgICAgICByZXR1cm4gW19jKCdlbC1zZWxlY3QnLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAicGxhY2Vob2xkZXIiOiAiU2VsZWN0IgogICAgICAgICAgfSwKICAgICAgICAgIG1vZGVsOiB7CiAgICAgICAgICAgIHZhbHVlOiBzY29wZS5yb3cucnNtSWQsCiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoJCR2KSB7CiAgICAgICAgICAgICAgX3ZtLiRzZXQoc2NvcGUucm93LCAicnNtSWQiLCAkJHYpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBleHByZXNzaW9uOiAic2NvcGUucm93LnJzbUlkIgogICAgICAgICAgfQogICAgICAgIH0sIF92bS5fbChfdm0ucnNtTGlzdCwgZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBfYygnZWwtb3B0aW9uJywgewogICAgICAgICAgICBrZXk6IGl0ZW0uaWQsCiAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgImxhYmVsIjogaXRlbS5mdWxsTmFtZSwKICAgICAgICAgICAgICAidmFsdWUiOiBpdGVtLmlkCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pLCAxKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfdm0ucm9sZU5hbWUgPT0gJ3N1cGVyYWRtaW4nID8gX2MoJ2VsLWJ1dHRvbicsIHsKICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJ3YXZlcyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LXdhdmVzIgogICAgICAgICAgfV0sCiAgICAgICAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogInN1Y2Nlc3MiCiAgICAgICAgICB9LAogICAgICAgICAgb246IHsKICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiBfdm0udXBkYXRlUnNtKHNjb3BlLnJvdyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBbX3ZtLl92KCIgQXNzaWduIFJTTSAiKV0pIDogX3ZtLl9lKCksIF9jKCdicicpLCBfYygnYnInKSwgX3ZtLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyA/IF9jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAid2F2ZXMiLAogICAgICAgICAgICByYXdOYW1lOiAidi13YXZlcyIKICAgICAgICAgIH1dLAogICAgICAgICAgc3RhdGljQ2xhc3M6ICJmaWx0ZXItaXRlbSIsCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidHlwZSI6ICJzdWNjZXNzIgogICAgICAgICAgfSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICJjbGljayI6IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX3ZtLnJlbW92ZVJzbShzY29wZS5yb3cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdigiIFJlbW92ZSBSU00gIildKSA6IF92bS5fZSgpXTsKICAgICAgfQogICAgfV0sIG51bGwsIGZhbHNlLCAzMDI3OTkyNjM4KQogIH0pIDogX3ZtLl9lKCksIHRoaXMucm9sZU5hbWUgPT0gJ3N1cGVyYWRtaW4nIHx8IHRoaXMucm9sZU5hbWUgPT0gJ1pvbmFsIEhlYWQnID8gX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJhbGlnbiI6ICJjZW50ZXIiLAogICAgICAibGFiZWwiOiAiWm9uYWwgSGVhZCIsCiAgICAgICJ3aWR0aCI6ICIyMjAiCiAgICB9LAogICAgc2NvcGVkU2xvdHM6IF92bS5fdShbewogICAgICBrZXk6ICJkZWZhdWx0IiwKICAgICAgZm46IGZ1bmN0aW9uIChzY29wZSkgewogICAgICAgIHJldHVybiBbX2MoJ2VsLXNlbGVjdCcsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJwbGFjZWhvbGRlciI6ICJTZWxlY3QiCiAgICAgICAgICB9LAogICAgICAgICAgbW9kZWw6IHsKICAgICAgICAgICAgdmFsdWU6IHNjb3BlLnJvdy56b25lSGVhZElkLAogICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKCQkdikgewogICAgICAgICAgICAgIF92bS4kc2V0KHNjb3BlLnJvdywgInpvbmVIZWFkSWQiLCAkJHYpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBleHByZXNzaW9uOiAic2NvcGUucm93LnpvbmVIZWFkSWQiCiAgICAgICAgICB9CiAgICAgICAgfSwgX3ZtLl9sKF92bS56b25hbExpc3QsIGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gX2MoJ2VsLW9wdGlvbicsIHsKICAgICAgICAgICAga2V5OiBpdGVtLmlkLAogICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICJsYWJlbCI6IGl0ZW0uZnVsbE5hbWUsCiAgICAgICAgICAgICAgInZhbHVlIjogaXRlbS5pZAogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KSwgMSksIF9jKCdicicpLCBfYygnYnInKSwgX3ZtLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyA/IF9jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAid2F2ZXMiLAogICAgICAgICAgICByYXdOYW1lOiAidi13YXZlcyIKICAgICAgICAgIH1dLAogICAgICAgICAgc3RhdGljQ2xhc3M6ICJmaWx0ZXItaXRlbSIsCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidHlwZSI6ICJzdWNjZXNzIgogICAgICAgICAgfSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICJjbGljayI6IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX3ZtLnVwZGF0ZVpvbmFsKHNjb3BlLnJvdyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBbX3ZtLl92KCIgQXNzaWduIFpvbmFsIEhlYWQgIildKSA6IF92bS5fZSgpLCBfYygnYnInKSwgX2MoJ2JyJyksIF92bS5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgPyBfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICAgICAgICB9XSwKICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAic3VjY2VzcyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS5yZW1vdmVab25hbChzY29wZS5yb3cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdigiIFJlbW92ZSBab25hbCAiKV0pIDogX3ZtLl9lKCldOwogICAgICB9CiAgICB9XSwgbnVsbCwgZmFsc2UsIDEwOTYzMTE0MTQpCiAgfSkgOiBfdm0uX2UoKSwgX3ZtLm15Um9sZS5pbmRleE9mKCdzdXBlcmFkbWluJykgPiAtMSA/IF9jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAiYWxpZ24iOiAiY2VudGVyIiwKICAgICAgImxhYmVsIjogX3ZtLiR0KCd0YWJsZS5hY3Rpb25zJyksCiAgICAgICJ3aWR0aCI6ICIxODAiCiAgICB9LAogICAgc2NvcGVkU2xvdHM6IF92bS5fdShbewogICAgICBrZXk6ICJkZWZhdWx0IiwKICAgICAgZm46IGZ1bmN0aW9uIChzY29wZSkgewogICAgICAgIHJldHVybiBbX2MoJ3JvdXRlci1saW5rJywgewogICAgICAgICAgc3RhdGljQ2xhc3M6ICJtYXJnaW4taG9yaXpvbnRhbCIsCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidG8iOiAnL3VzZXJDb250YWN0L2xpc3QvJyArIHNjb3BlLnJvdy5pZAogICAgICAgICAgfQogICAgICAgIH0sIFtfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICAgICAgICB9XSwKICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAic3VjY2VzcyIKICAgICAgICAgIH0KICAgICAgICB9LCBbX3ZtLl92KCIgQWRkIENvbnRhY3QgIildKV0sIDEpLCBfYygnYnInKSwgX2MoJ2JyJyksIF9jKCdlbC1wb3BvdmVyJywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInBsYWNlbWVudCI6ICJyaWdodCIsCiAgICAgICAgICAgICJ3aWR0aCI6ICI1MDAiLAogICAgICAgICAgICAidHJpZ2dlciI6ICJjbGljayIKICAgICAgICAgIH0KICAgICAgICB9LCBbX2MoJ2VsLXRhYmxlJywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgImRhdGEiOiBfdm0uc3RhdHVzRGV0YWlscwogICAgICAgICAgfQogICAgICAgIH0sIFtfYygnZWwtdGFibGUtY29sdW1uJywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgIndpZHRoIjogIjIwMCIsCiAgICAgICAgICAgICJwcm9wZXJ0eSI6ICJhZG1pbi5mdWxsTmFtZSIsCiAgICAgICAgICAgICJsYWJlbCI6ICJBZG1pbiBOYW1lIgogICAgICAgICAgfQogICAgICAgIH0pLCBfYygnZWwtdGFibGUtY29sdW1uJywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgIndpZHRoIjogIjIwMCIsCiAgICAgICAgICAgICJwcm9wZXJ0eSI6ICIiLAogICAgICAgICAgICAibGFiZWwiOiAic3RhdHVzIgogICAgICAgICAgfSwKICAgICAgICAgIHNjb3BlZFNsb3RzOiBfdm0uX3UoW3sKICAgICAgICAgICAga2V5OiAiZGVmYXVsdCIsCiAgICAgICAgICAgIGZuOiBmdW5jdGlvbiAoc2NvcGUpIHsKICAgICAgICAgICAgICByZXR1cm4gW3Njb3BlLnJvdy5zdGF0dXMgPT0gMSA/IF9jKCdzcGFuJywgW192bS5fdigiVXNlciIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSAyID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJDTkYiKV0pIDogX3ZtLl9lKCksIHNjb3BlLnJvdy5zdGF0dXMgPT0gMyA/IF9jKCdzcGFuJywgW192bS5fdigiU3VwZXIgU29ja2V0IildKSA6IF92bS5fZSgpLCBzY29wZS5yb3cuc3RhdHVzID09IDQgPyBfYygnc3BhbicsIFtfdm0uX3YoIkNEIildKSA6IF92bS5fZSgpLCBzY29wZS5yb3cuc3RhdHVzID09IDUgPyBfYygnc3BhbicsIFtfdm0uX3YoIlNEIildKSA6IF92bS5fZSgpLCBzY29wZS5yb3cuc3RhdHVzID09IDYgPyBfYygnc3BhbicsIFtfdm0uX3YoIldCIildKSA6IF92bS5fZSgpLCBzY29wZS5yb3cuc3RhdHVzID09IDcgPyBfYygnc3BhbicsIFtfdm0uX3YoIk1SUCIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSA4ID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJDT1AiKV0pIDogX3ZtLl9lKCksIHNjb3BlLnJvdy5zdGF0dXMgPT0gOSA/IF9jKCdzcGFuJywgW192bS5fdigiU09QIildKSA6IF92bS5fZSgpXTsKICAgICAgICAgICAgfQogICAgICAgICAgfV0sIG51bGwsIHRydWUpCiAgICAgICAgfSldLCAxKSwgX2MoJ2VsLWJ1dHRvbicsIHsKICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJsb2FkaW5nIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtbG9hZGluZyIsCiAgICAgICAgICAgIHZhbHVlOiBfdm0udXNlclN0YXR1c0xvYWRpbmcsCiAgICAgICAgICAgIGV4cHJlc3Npb246ICJ1c2VyU3RhdHVzTG9hZGluZyIKICAgICAgICAgIH1dLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInNsb3QiOiAicmVmZXJlbmNlIiwKICAgICAgICAgICAgInNpemUiOiAic21hbGwiLAogICAgICAgICAgICAidHlwZSI6ICJ3YXJuaW5nIgogICAgICAgICAgfSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICJjbGljayI6IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX3ZtLmdldFVzZXJTdGF0dXNMb2coc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHNsb3Q6ICJyZWZlcmVuY2UiCiAgICAgICAgfSwgW192bS5fdigiIEhpc3RvcnkgIildKV0sIDEpLCBfYygnYnInKSwgX2MoJ2JyJyksIF9jKCdyb3V0ZXItbGluaycsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0byI6ICcvdXNlci9lZGl0LycgKyBzY29wZS5yb3cuaWQKICAgICAgICAgIH0KICAgICAgICB9LCBbX2MoJ2VsLWJ1dHRvbicsIHsKICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJ3YXZlcyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LXdhdmVzIgogICAgICAgICAgfV0sCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidHlwZSI6ICJ3YXJuaW5nIiwKICAgICAgICAgICAgInNpemUiOiAic21hbGwiLAogICAgICAgICAgICAiaWNvbiI6ICJlbC1pY29uLWVkaXQiCiAgICAgICAgICB9CiAgICAgICAgfSldLCAxKV07CiAgICAgIH0KICAgIH1dLCBudWxsLCBmYWxzZSwgNTQ0MjQ5NTE1KQogIH0pIDogX3ZtLl9lKCldLCAxKSwgX2MoJ3BhZ2luYXRpb24nLCB7CiAgICBkaXJlY3RpdmVzOiBbewogICAgICBuYW1lOiAic2hvdyIsCiAgICAgIHJhd05hbWU6ICJ2LXNob3ciLAogICAgICB2YWx1ZTogX3ZtLnRvdGFsID4gMCwKICAgICAgZXhwcmVzc2lvbjogInRvdGFsID4gMCIKICAgIH1dLAogICAgYXR0cnM6IHsKICAgICAgInRvdGFsIjogX3ZtLnRvdGFsLAogICAgICAicGFnZSI6IF92bS5saXN0UXVlcnkucGFnZSwKICAgICAgImxpbWl0IjogX3ZtLmxpc3RRdWVyeS5saW1pdAogICAgfSwKICAgIG9uOiB7CiAgICAgICJ1cGRhdGU6cGFnZSI6IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICByZXR1cm4gX3ZtLiRzZXQoX3ZtLmxpc3RRdWVyeSwgInBhZ2UiLCAkZXZlbnQpOwogICAgICB9LAogICAgICAidXBkYXRlOmxpbWl0IjogZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgIHJldHVybiBfdm0uJHNldChfdm0ubGlzdFF1ZXJ5LCAibGltaXQiLCAkZXZlbnQpOwogICAgICB9LAogICAgICAicGFnaW5hdGlvbiI6IF92bS5nZXRMaXN0CiAgICB9CiAgfSldLCAxKSwgX2MoJ2VsLXRhYi1wYW5lJywgewogICAgYXR0cnM6IHsKICAgICAgImxhYmVsIjogIkNPUCIsCiAgICAgICJuYW1lIjogImNvcCIKICAgIH0KICB9LCBbX2MoJ2VsLXRhYmxlJywgewogICAgZGlyZWN0aXZlczogW3sKICAgICAgbmFtZTogImxvYWRpbmciLAogICAgICByYXdOYW1lOiAidi1sb2FkaW5nIiwKICAgICAgdmFsdWU6IF92bS5saXN0TG9hZGluZywKICAgICAgZXhwcmVzc2lvbjogImxpc3RMb2FkaW5nIgogICAgfV0sCiAgICBrZXk6IF92bS50YWJsZUtleSwKICAgIHN0YXRpY1N0eWxlOiB7CiAgICAgICJ3aWR0aCI6ICIxMDAlIgogICAgfSwKICAgIGF0dHJzOiB7CiAgICAgICJkYXRhIjogX3ZtLmxpc3QsCiAgICAgICJib3JkZXIiOiAiIiwKICAgICAgImZpdCI6ICIiLAogICAgICAiaGlnaGxpZ2h0LWN1cnJlbnQtcm93IjogIiIKICAgIH0sCiAgICBvbjogewogICAgICAic29ydC1jaGFuZ2UiOiBfdm0uc29ydENoYW5nZQogICAgfQogIH0sIFtfYygnZWwtdGFibGUtY29sdW1uJywgewogICAgYXR0cnM6IHsKICAgICAgInNvcnRhYmxlIjogImN1c3RvbSIsCiAgICAgICJ3aWR0aCI6ICIxMDBweCIsCiAgICAgICJhbGlnbiI6ICJjZW50ZXIiLAogICAgICAibGFiZWwiOiBfdm0uJHQoJ3RhYmxlLmlkJyksCiAgICAgICJwcm9wIjogImlkIiwKICAgICAgImNsYXNzLW5hbWUiOiBfdm0uZ2V0U29ydENsYXNzKCdpZCcpCiAgICB9CiAgfSksIF9jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAid2lkdGgiOiAiOTAiLAogICAgICAiYWxpZ24iOiAiY2VudGVyIiwKICAgICAgImxhYmVsIjogIkVuYWJsZS9EaXNhYmxlIiwKICAgICAgInByb3AiOiAiIgogICAgfSwKICAgIHNjb3BlZFNsb3RzOiBfdm0uX3UoW3sKICAgICAga2V5OiAiZGVmYXVsdCIsCiAgICAgIGZuOiBmdW5jdGlvbiAoc2NvcGUpIHsKICAgICAgICByZXR1cm4gW19jKCdlbmFibGVkJywgewogICAgICAgICAga2V5OiBzY29wZS5yb3cuaWQsCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidXJsIjogJy91c2Vycy8nICsgc2NvcGUucm93LmlkCiAgICAgICAgICB9LAogICAgICAgICAgbW9kZWw6IHsKICAgICAgICAgICAgdmFsdWU6IHNjb3BlLnJvdy5lbmFibGVkLAogICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKCQkdikgewogICAgICAgICAgICAgIF92bS4kc2V0KHNjb3BlLnJvdywgImVuYWJsZWQiLCAkJHYpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBleHByZXNzaW9uOiAic2NvcGUucm93LmVuYWJsZWQiCiAgICAgICAgICB9CiAgICAgICAgfSldOwogICAgICB9CiAgICB9XSkKICB9KSwgX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJsYWJlbCI6ICJEaXN0cmlidXRvciBEZXRhaWxzIiwKICAgICAgIndpZHRoIjogIjM1MHB4IgogICAgfSwKICAgIHNjb3BlZFNsb3RzOiBfdm0uX3UoW3sKICAgICAga2V5OiAiZGVmYXVsdCIsCiAgICAgIGZuOiBmdW5jdGlvbiAoc2NvcGUpIHsKICAgICAgICByZXR1cm4gW19jKCdlbC1yb3cnLCB7CiAgICAgICAgICBzdGF0aWNTdHlsZTogewogICAgICAgICAgICAidGV4dC1hbGlnbiI6ICJsZWZ0IgogICAgICAgICAgfSwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogImZsZXgiLAogICAgICAgICAgICAianVzdGlmeSI6ICIiLAogICAgICAgICAgICAic3BhbiI6IDI0LAogICAgICAgICAgICAiZ3V0dGVyIjogMjAKICAgICAgICAgIH0KICAgICAgICB9LCBbX2MoJ2VsLWNvbCcsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJzcGFuIjogMTIKICAgICAgICAgIH0KICAgICAgICB9LCBbX2MoJ2InLCBbX3ZtLl92KCJOYW1lOiIpXSksIF92bS5fdigiwqDCoCIpLCBfYygnc3BhbicsIFtfdm0uX3YoX3ZtLl9zKHNjb3BlLnJvdy5mdWxsTmFtZSkpXSksIF9jKCdicicpLCBfYygnYnInKSwgX2MoJ2InLCBbX3ZtLl92KCJDb21wYW55IE5hbWU6IildKSwgX3ZtLl92KCLCoMKgIiksIF9jKCdzcGFuJywgW192bS5fdihfdm0uX3Moc2NvcGUucm93LmNvbXBhbnlOYW1lKSldKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfYygnYicsIFtfdm0uX3YoIkVtYWlsIEFkZHJlc3M6IildKSwgX3ZtLl92KCLCoMKgIiksIF9jKCdzcGFuJywgW192bS5fdihfdm0uX3Moc2NvcGUucm93LmVtYWlsKSldKSwgX2MoJ2JyJyksIF9jKCdicicpXSksIF9jKCdlbC1jb2wnLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAic3BhbiI6IDEyCiAgICAgICAgICB9CiAgICAgICAgfSwgW19jKCdiJywgW192bS5fdigiUGluY29kZSBOdW1iZXI6IildKSwgX3ZtLl92KCLCoMKgIiksIF9jKCdzcGFuJywgW192bS5fdihfdm0uX3Moc2NvcGUucm93LnBpbmNvZGUpKV0pLCBfYygnYnInKSwgX2MoJ2JyJyksIF9jKCdiJywgW192bS5fdigiQ2l0eSBOYW1lOiIpXSksIF92bS5fdigiwqDCoCIpLCBfYygnc3BhbicsIFtfdm0uX3YoX3ZtLl9zKHNjb3BlLnJvdy5jaXR5KSldKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfYygnYicsIFtfdm0uX3YoIlJlZ2lzdGVyZWQgTnVtYmVyOiIpXSksIF92bS5fdigiwqDCoCIpLCBfdm0uX2woc2NvcGUucm93LnVzZXJDb250YWN0LCBmdW5jdGlvbiAoY29udGFjdCkgewogICAgICAgICAgcmV0dXJuIF9jKCdzcGFuJywgewogICAgICAgICAgICBrZXk6IGNvbnRhY3QuaWQKICAgICAgICAgIH0sIFtfdm0uX3YoIiAiICsgX3ZtLl9zKGNvbnRhY3QuY29udGFjdE51bWJlcikpLCBfYygnYnInKSwgX2MoJ2JyJyldKTsKICAgICAgICB9KV0sIDIpXSwgMSldOwogICAgICB9CiAgICB9XSkKICB9KSwgX3ZtLnNob3dDcmVhdGVkRGF0ZSA/IF9jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAibGFiZWwiOiBfdm0uJHQoJ3RhYmxlLmNyZWF0ZWREYXRlJyksCiAgICAgICJ3aWR0aCI6ICIxNTBweCIsCiAgICAgICJhbGlnbiI6ICJjZW50ZXIiCiAgICB9LAogICAgc2NvcGVkU2xvdHM6IF92bS5fdShbewogICAgICBrZXk6ICJkZWZhdWx0IiwKICAgICAgZm46IGZ1bmN0aW9uIChzY29wZSkgewogICAgICAgIHJldHVybiBbX2MoJ3NwYW4nLCB7CiAgICAgICAgICBzdGF0aWNTdHlsZTogewogICAgICAgICAgICAiY29sb3IiOiAicmVkIgogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoX3ZtLl9zKF92bS5fZigibW9tZW50Iikoc2NvcGUucm93LmNyZWF0ZWRUaW1lc3RhbXAsICJmcm9tIikpKV0pXTsKICAgICAgfQogICAgfV0sIG51bGwsIGZhbHNlLCA5MTI1MjY4NzApCiAgfSkgOiBfdm0uX2UoKSwgdGhpcy5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgPyBfYygnZWwtdGFibGUtY29sdW1uJywgewogICAgYXR0cnM6IHsKICAgICAgImFsaWduIjogImNlbnRlciIsCiAgICAgICJsYWJlbCI6ICJDb252ZXJ0IiwKICAgICAgIndpZHRoIjogIjIyMCIKICAgIH0sCiAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgIGtleTogImRlZmF1bHQiLAogICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgcmV0dXJuIFtfYygnZWwtc2VsZWN0JywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInBsYWNlaG9sZGVyIjogIlNlbGVjdCIKICAgICAgICAgIH0sCiAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICB2YWx1ZTogc2NvcGUucm93LnN0YXR1cywKICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgkJHYpIHsKICAgICAgICAgICAgICBfdm0uJHNldChzY29wZS5yb3csICJzdGF0dXMiLCAkJHYpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBleHByZXNzaW9uOiAic2NvcGUucm93LnN0YXR1cyIKICAgICAgICAgIH0KICAgICAgICB9LCBfdm0uX2woX3ZtLnVzZXJMaXN0LCBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIF9jKCdlbC1vcHRpb24nLCB7CiAgICAgICAgICAgIGtleTogaXRlbS52YWx1ZSwKICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAibGFiZWwiOiBpdGVtLmxhYmVsLAogICAgICAgICAgICAgICJ2YWx1ZSI6IGl0ZW0udmFsdWUKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSksIDEpLCBfYygnYnInKSwgX2MoJ2JyJyksIF9jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAid2F2ZXMiLAogICAgICAgICAgICByYXdOYW1lOiAidi13YXZlcyIKICAgICAgICAgIH1dLAogICAgICAgICAgc3RhdGljQ2xhc3M6ICJmaWx0ZXItaXRlbSIsCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidHlwZSI6ICJzdWNjZXNzIgogICAgICAgICAgfSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICJjbGljayI6IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX3ZtLnVwZGF0ZURpc3RyaWJ1dG9yKHNjb3BlLnJvdyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBbX3ZtLl92KCIgQ29udmVydCAiKV0pXTsKICAgICAgfQogICAgfV0sIG51bGwsIGZhbHNlLCAxMjI4MjAxOTE5KQogIH0pIDogX3ZtLl9lKCksIF9jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAiYWxpZ24iOiAiY2VudGVyIiwKICAgICAgImxhYmVsIjogIkFzbSIsCiAgICAgICJ3aWR0aCI6ICIyMjAiCiAgICB9LAogICAgc2NvcGVkU2xvdHM6IF92bS5fdShbewogICAgICBrZXk6ICJkZWZhdWx0IiwKICAgICAgZm46IGZ1bmN0aW9uIChzY29wZSkgewogICAgICAgIHJldHVybiBbX2MoJ2VsLXNlbGVjdCcsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJwbGFjZWhvbGRlciI6ICJTZWxlY3QiCiAgICAgICAgICB9LAogICAgICAgICAgbW9kZWw6IHsKICAgICAgICAgICAgdmFsdWU6IHNjb3BlLnJvdy5zdXBlckFkbWluSWQsCiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoJCR2KSB7CiAgICAgICAgICAgICAgX3ZtLiRzZXQoc2NvcGUucm93LCAic3VwZXJBZG1pbklkIiwgJCR2KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXhwcmVzc2lvbjogInNjb3BlLnJvdy5zdXBlckFkbWluSWQiCiAgICAgICAgICB9CiAgICAgICAgfSwgX3ZtLl9sKF92bS5hc21MaXN0LCBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIF9jKCdlbC1vcHRpb24nLCB7CiAgICAgICAgICAgIGtleTogaXRlbS5pZCwKICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAibGFiZWwiOiBpdGVtLmZ1bGxOYW1lLAogICAgICAgICAgICAgICJ2YWx1ZSI6IGl0ZW0uaWQKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSksIDEpLCBfYygnYnInKSwgX2MoJ2JyJyksIF92bS5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgPyBfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICAgICAgICB9XSwKICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAic3VjY2VzcyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS51cGRhdGVBc20oc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBBc3NpZ24gQXNtICIpXSkgOiBfdm0uX2UoKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfdm0ucm9sZU5hbWUgPT0gJ3N1cGVyYWRtaW4nID8gX2MoJ2VsLWJ1dHRvbicsIHsKICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJ3YXZlcyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LXdhdmVzIgogICAgICAgICAgfV0sCiAgICAgICAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogInN1Y2Nlc3MiCiAgICAgICAgICB9LAogICAgICAgICAgb246IHsKICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiBfdm0ucmVtb3ZlQXNtKHNjb3BlLnJvdyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBbX3ZtLl92KCIgUmVtb3ZlIEFTTSAiKV0pIDogX3ZtLl9lKCldOwogICAgICB9CiAgICB9XSkKICB9KSwgdGhpcy5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgfHwgdGhpcy5yb2xlTmFtZSA9PSAnUlNNJyB8fCB0aGlzLnJvbGVOYW1lID09ICdab25hbCBIZWFkJyA/IF9jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAiYWxpZ24iOiAiY2VudGVyIiwKICAgICAgImxhYmVsIjogIlJzbSIsCiAgICAgICJ3aWR0aCI6ICIyMjAiCiAgICB9LAogICAgc2NvcGVkU2xvdHM6IF92bS5fdShbewogICAgICBrZXk6ICJkZWZhdWx0IiwKICAgICAgZm46IGZ1bmN0aW9uIChzY29wZSkgewogICAgICAgIHJldHVybiBbX2MoJ2VsLXNlbGVjdCcsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJwbGFjZWhvbGRlciI6ICJTZWxlY3QiCiAgICAgICAgICB9LAogICAgICAgICAgbW9kZWw6IHsKICAgICAgICAgICAgdmFsdWU6IHNjb3BlLnJvdy5yc21JZCwKICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgkJHYpIHsKICAgICAgICAgICAgICBfdm0uJHNldChzY29wZS5yb3csICJyc21JZCIsICQkdik7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGV4cHJlc3Npb246ICJzY29wZS5yb3cucnNtSWQiCiAgICAgICAgICB9CiAgICAgICAgfSwgX3ZtLl9sKF92bS5yc21MaXN0LCBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIF9jKCdlbC1vcHRpb24nLCB7CiAgICAgICAgICAgIGtleTogaXRlbS5pZCwKICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAibGFiZWwiOiBpdGVtLmZ1bGxOYW1lLAogICAgICAgICAgICAgICJ2YWx1ZSI6IGl0ZW0uaWQKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSksIDEpLCBfYygnYnInKSwgX2MoJ2JyJyksIF92bS5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgPyBfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICAgICAgICB9XSwKICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAic3VjY2VzcyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS51cGRhdGVSc20oc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBBc3NpZ24gUlNNICIpXSkgOiBfdm0uX2UoKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfdm0ucm9sZU5hbWUgPT0gJ3N1cGVyYWRtaW4nID8gX2MoJ2VsLWJ1dHRvbicsIHsKICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJ3YXZlcyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LXdhdmVzIgogICAgICAgICAgfV0sCiAgICAgICAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogInN1Y2Nlc3MiCiAgICAgICAgICB9LAogICAgICAgICAgb246IHsKICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiBfdm0ucmVtb3ZlUnNtKHNjb3BlLnJvdyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBbX3ZtLl92KCIgUmVtb3ZlIFJTTSAiKV0pIDogX3ZtLl9lKCldOwogICAgICB9CiAgICB9XSwgbnVsbCwgZmFsc2UsIDMwMjc5OTI2MzgpCiAgfSkgOiBfdm0uX2UoKSwgdGhpcy5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgfHwgdGhpcy5yb2xlTmFtZSA9PSAnWm9uYWwgSGVhZCcgPyBfYygnZWwtdGFibGUtY29sdW1uJywgewogICAgYXR0cnM6IHsKICAgICAgImFsaWduIjogImNlbnRlciIsCiAgICAgICJsYWJlbCI6ICJab25hbCBIZWFkIiwKICAgICAgIndpZHRoIjogIjIyMCIKICAgIH0sCiAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgIGtleTogImRlZmF1bHQiLAogICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgcmV0dXJuIFtfYygnZWwtc2VsZWN0JywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInBsYWNlaG9sZGVyIjogIlNlbGVjdCIKICAgICAgICAgIH0sCiAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICB2YWx1ZTogc2NvcGUucm93LnpvbmVIZWFkSWQsCiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoJCR2KSB7CiAgICAgICAgICAgICAgX3ZtLiRzZXQoc2NvcGUucm93LCAiem9uZUhlYWRJZCIsICQkdik7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGV4cHJlc3Npb246ICJzY29wZS5yb3cuem9uZUhlYWRJZCIKICAgICAgICAgIH0KICAgICAgICB9LCBfdm0uX2woX3ZtLnpvbmFsTGlzdCwgZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBfYygnZWwtb3B0aW9uJywgewogICAgICAgICAgICBrZXk6IGl0ZW0uaWQsCiAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgImxhYmVsIjogaXRlbS5mdWxsTmFtZSwKICAgICAgICAgICAgICAidmFsdWUiOiBpdGVtLmlkCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pLCAxKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfdm0ucm9sZU5hbWUgPT0gJ3N1cGVyYWRtaW4nID8gX2MoJ2VsLWJ1dHRvbicsIHsKICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJ3YXZlcyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LXdhdmVzIgogICAgICAgICAgfV0sCiAgICAgICAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogInN1Y2Nlc3MiCiAgICAgICAgICB9LAogICAgICAgICAgb246IHsKICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiBfdm0udXBkYXRlWm9uYWwoc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBBc3NpZ24gWm9uYWwgSGVhZCAiKV0pIDogX3ZtLl9lKCksIF9jKCdicicpLCBfYygnYnInKSwgX3ZtLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyA/IF9jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAid2F2ZXMiLAogICAgICAgICAgICByYXdOYW1lOiAidi13YXZlcyIKICAgICAgICAgIH1dLAogICAgICAgICAgc3RhdGljQ2xhc3M6ICJmaWx0ZXItaXRlbSIsCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidHlwZSI6ICJzdWNjZXNzIgogICAgICAgICAgfSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICJjbGljayI6IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX3ZtLnJlbW92ZVpvbmFsKHNjb3BlLnJvdyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBbX3ZtLl92KCIgUmVtb3ZlIFpvbmFsICIpXSkgOiBfdm0uX2UoKV07CiAgICAgIH0KICAgIH1dLCBudWxsLCBmYWxzZSwgMTA5NjMxMTQxNCkKICB9KSA6IF92bS5fZSgpLCBfdm0ubXlSb2xlLmluZGV4T2YoJ3N1cGVyYWRtaW4nKSA+IC0xID8gX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJhbGlnbiI6ICJjZW50ZXIiLAogICAgICAibGFiZWwiOiBfdm0uJHQoJ3RhYmxlLmFjdGlvbnMnKSwKICAgICAgIndpZHRoIjogIjE4MCIKICAgIH0sCiAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgIGtleTogImRlZmF1bHQiLAogICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgcmV0dXJuIFtfYygncm91dGVyLWxpbmsnLCB7CiAgICAgICAgICBzdGF0aWNDbGFzczogIm1hcmdpbi1ob3Jpem9udGFsIiwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0byI6ICcvdXNlckNvbnRhY3QvbGlzdC8nICsgc2NvcGUucm93LmlkCiAgICAgICAgICB9CiAgICAgICAgfSwgW19jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAid2F2ZXMiLAogICAgICAgICAgICByYXdOYW1lOiAidi13YXZlcyIKICAgICAgICAgIH1dLAogICAgICAgICAgc3RhdGljQ2xhc3M6ICJmaWx0ZXItaXRlbSIsCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidHlwZSI6ICJzdWNjZXNzIgogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBBZGQgQ29udGFjdCAiKV0pXSwgMSksIF9jKCdicicpLCBfYygnYnInKSwgX2MoJ2VsLXBvcG92ZXInLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAicGxhY2VtZW50IjogInJpZ2h0IiwKICAgICAgICAgICAgIndpZHRoIjogIjUwMCIsCiAgICAgICAgICAgICJ0cmlnZ2VyIjogImNsaWNrIgogICAgICAgICAgfQogICAgICAgIH0sIFtfYygnZWwtdGFibGUnLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAiZGF0YSI6IF92bS5zdGF0dXNEZXRhaWxzCiAgICAgICAgICB9CiAgICAgICAgfSwgW19jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAid2lkdGgiOiAiMjAwIiwKICAgICAgICAgICAgInByb3BlcnR5IjogImFkbWluLmZ1bGxOYW1lIiwKICAgICAgICAgICAgImxhYmVsIjogIkFkbWluIE5hbWUiCiAgICAgICAgICB9CiAgICAgICAgfSksIF9jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAid2lkdGgiOiAiMjAwIiwKICAgICAgICAgICAgInByb3BlcnR5IjogIiIsCiAgICAgICAgICAgICJsYWJlbCI6ICJzdGF0dXMiCiAgICAgICAgICB9LAogICAgICAgICAgc2NvcGVkU2xvdHM6IF92bS5fdShbewogICAgICAgICAgICBrZXk6ICJkZWZhdWx0IiwKICAgICAgICAgICAgZm46IGZ1bmN0aW9uIChzY29wZSkgewogICAgICAgICAgICAgIHJldHVybiBbc2NvcGUucm93LnN0YXR1cyA9PSAxID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJVc2VyIildKSA6IF92bS5fZSgpLCBzY29wZS5yb3cuc3RhdHVzID09IDIgPyBfYygnc3BhbicsIFtfdm0uX3YoIkNORiIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSAzID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJTdXBlciBTb2NrZXQiKV0pIDogX3ZtLl9lKCksIHNjb3BlLnJvdy5zdGF0dXMgPT0gNCA/IF9jKCdzcGFuJywgW192bS5fdigiQ0QiKV0pIDogX3ZtLl9lKCksIHNjb3BlLnJvdy5zdGF0dXMgPT0gNSA/IF9jKCdzcGFuJywgW192bS5fdigiU0QiKV0pIDogX3ZtLl9lKCksIHNjb3BlLnJvdy5zdGF0dXMgPT0gNiA/IF9jKCdzcGFuJywgW192bS5fdigiV0IiKV0pIDogX3ZtLl9lKCksIHNjb3BlLnJvdy5zdGF0dXMgPT0gNyA/IF9jKCdzcGFuJywgW192bS5fdigiTVJQIildKSA6IF92bS5fZSgpLCBzY29wZS5yb3cuc3RhdHVzID09IDggPyBfYygnc3BhbicsIFtfdm0uX3YoIkNPUCIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSA5ID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJTT1AiKV0pIDogX3ZtLl9lKCldOwogICAgICAgICAgICB9CiAgICAgICAgICB9XSwgbnVsbCwgdHJ1ZSkKICAgICAgICB9KV0sIDEpLCBfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogImxvYWRpbmciLAogICAgICAgICAgICByYXdOYW1lOiAidi1sb2FkaW5nIiwKICAgICAgICAgICAgdmFsdWU6IF92bS51c2VyU3RhdHVzTG9hZGluZywKICAgICAgICAgICAgZXhwcmVzc2lvbjogInVzZXJTdGF0dXNMb2FkaW5nIgogICAgICAgICAgfV0sCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAic2xvdCI6ICJyZWZlcmVuY2UiLAogICAgICAgICAgICAic2l6ZSI6ICJzbWFsbCIsCiAgICAgICAgICAgICJ0eXBlIjogIndhcm5pbmciCiAgICAgICAgICB9LAogICAgICAgICAgb246IHsKICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiBfdm0uZ2V0VXNlclN0YXR1c0xvZyhzY29wZS5yb3cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgc2xvdDogInJlZmVyZW5jZSIKICAgICAgICB9LCBbX3ZtLl92KCIgSGlzdG9yeSAiKV0pXSwgMSksIF9jKCdicicpLCBfYygnYnInKSwgX2MoJ3JvdXRlci1saW5rJywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInRvIjogJy91c2VyL2VkaXQvJyArIHNjb3BlLnJvdy5pZAogICAgICAgICAgfQogICAgICAgIH0sIFtfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICAgICAgICB9XSwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogIndhcm5pbmciLAogICAgICAgICAgICAic2l6ZSI6ICJzbWFsbCIsCiAgICAgICAgICAgICJpY29uIjogImVsLWljb24tZWRpdCIKICAgICAgICAgIH0KICAgICAgICB9KV0sIDEpXTsKICAgICAgfQogICAgfV0sIG51bGwsIGZhbHNlLCA1NDQyNDk1MTUpCiAgfSkgOiBfdm0uX2UoKV0sIDEpLCBfYygncGFnaW5hdGlvbicsIHsKICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgIG5hbWU6ICJzaG93IiwKICAgICAgcmF3TmFtZTogInYtc2hvdyIsCiAgICAgIHZhbHVlOiBfdm0udG90YWwgPiAwLAogICAgICBleHByZXNzaW9uOiAidG90YWwgPiAwIgogICAgfV0sCiAgICBhdHRyczogewogICAgICAidG90YWwiOiBfdm0udG90YWwsCiAgICAgICJwYWdlIjogX3ZtLmxpc3RRdWVyeS5wYWdlLAogICAgICAibGltaXQiOiBfdm0ubGlzdFF1ZXJ5LmxpbWl0CiAgICB9LAogICAgb246IHsKICAgICAgInVwZGF0ZTpwYWdlIjogZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgIHJldHVybiBfdm0uJHNldChfdm0ubGlzdFF1ZXJ5LCAicGFnZSIsICRldmVudCk7CiAgICAgIH0sCiAgICAgICJ1cGRhdGU6bGltaXQiOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgcmV0dXJuIF92bS4kc2V0KF92bS5saXN0UXVlcnksICJsaW1pdCIsICRldmVudCk7CiAgICAgIH0sCiAgICAgICJwYWdpbmF0aW9uIjogX3ZtLmdldExpc3QKICAgIH0KICB9KV0sIDEpLCBfYygnZWwtdGFiLXBhbmUnLCB7CiAgICBhdHRyczogewogICAgICAibGFiZWwiOiAiU09QIiwKICAgICAgIm5hbWUiOiAic29wIgogICAgfQogIH0sIFtfYygnZWwtdGFibGUnLCB7CiAgICBkaXJlY3RpdmVzOiBbewogICAgICBuYW1lOiAibG9hZGluZyIsCiAgICAgIHJhd05hbWU6ICJ2LWxvYWRpbmciLAogICAgICB2YWx1ZTogX3ZtLmxpc3RMb2FkaW5nLAogICAgICBleHByZXNzaW9uOiAibGlzdExvYWRpbmciCiAgICB9XSwKICAgIGtleTogX3ZtLnRhYmxlS2V5LAogICAgc3RhdGljU3R5bGU6IHsKICAgICAgIndpZHRoIjogIjEwMCUiCiAgICB9LAogICAgYXR0cnM6IHsKICAgICAgImRhdGEiOiBfdm0ubGlzdCwKICAgICAgImJvcmRlciI6ICIiLAogICAgICAiZml0IjogIiIsCiAgICAgICJoaWdobGlnaHQtY3VycmVudC1yb3ciOiAiIgogICAgfSwKICAgIG9uOiB7CiAgICAgICJzb3J0LWNoYW5nZSI6IF92bS5zb3J0Q2hhbmdlCiAgICB9CiAgfSwgW19jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAic29ydGFibGUiOiAiY3VzdG9tIiwKICAgICAgIndpZHRoIjogIjEwMHB4IiwKICAgICAgImFsaWduIjogImNlbnRlciIsCiAgICAgICJsYWJlbCI6IF92bS4kdCgndGFibGUuaWQnKSwKICAgICAgInByb3AiOiAiaWQiLAogICAgICAiY2xhc3MtbmFtZSI6IF92bS5nZXRTb3J0Q2xhc3MoJ2lkJykKICAgIH0KICB9KSwgX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJ3aWR0aCI6ICI5MCIsCiAgICAgICJhbGlnbiI6ICJjZW50ZXIiLAogICAgICAibGFiZWwiOiAiRW5hYmxlL0Rpc2FibGUiLAogICAgICAicHJvcCI6ICIiCiAgICB9LAogICAgc2NvcGVkU2xvdHM6IF92bS5fdShbewogICAgICBrZXk6ICJkZWZhdWx0IiwKICAgICAgZm46IGZ1bmN0aW9uIChzY29wZSkgewogICAgICAgIHJldHVybiBbX2MoJ2VuYWJsZWQnLCB7CiAgICAgICAgICBrZXk6IHNjb3BlLnJvdy5pZCwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ1cmwiOiAnL3VzZXJzLycgKyBzY29wZS5yb3cuaWQKICAgICAgICAgIH0sCiAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICB2YWx1ZTogc2NvcGUucm93LmVuYWJsZWQsCiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoJCR2KSB7CiAgICAgICAgICAgICAgX3ZtLiRzZXQoc2NvcGUucm93LCAiZW5hYmxlZCIsICQkdik7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGV4cHJlc3Npb246ICJzY29wZS5yb3cuZW5hYmxlZCIKICAgICAgICAgIH0KICAgICAgICB9KV07CiAgICAgIH0KICAgIH1dKQogIH0pLCBfYygnZWwtdGFibGUtY29sdW1uJywgewogICAgYXR0cnM6IHsKICAgICAgImxhYmVsIjogIkRpc3RyaWJ1dG9yIERldGFpbHMiLAogICAgICAid2lkdGgiOiAiMzUwcHgiCiAgICB9LAogICAgc2NvcGVkU2xvdHM6IF92bS5fdShbewogICAgICBrZXk6ICJkZWZhdWx0IiwKICAgICAgZm46IGZ1bmN0aW9uIChzY29wZSkgewogICAgICAgIHJldHVybiBbX2MoJ2VsLXJvdycsIHsKICAgICAgICAgIHN0YXRpY1N0eWxlOiB7CiAgICAgICAgICAgICJ0ZXh0LWFsaWduIjogImxlZnQiCiAgICAgICAgICB9LAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAiZmxleCIsCiAgICAgICAgICAgICJqdXN0aWZ5IjogIiIsCiAgICAgICAgICAgICJzcGFuIjogMjQsCiAgICAgICAgICAgICJndXR0ZXIiOiAyMAogICAgICAgICAgfQogICAgICAgIH0sIFtfYygnZWwtY29sJywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInNwYW4iOiAxMgogICAgICAgICAgfQogICAgICAgIH0sIFtfYygnYicsIFtfdm0uX3YoIk5hbWU6IildKSwgX3ZtLl92KCLCoMKgIiksIF9jKCdzcGFuJywgW192bS5fdihfdm0uX3Moc2NvcGUucm93LmZ1bGxOYW1lKSldKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfYygnYicsIFtfdm0uX3YoIkNvbXBhbnkgTmFtZToiKV0pLCBfdm0uX3YoIsKgwqAiKSwgX2MoJ3NwYW4nLCBbX3ZtLl92KF92bS5fcyhzY29wZS5yb3cuY29tcGFueU5hbWUpKV0pLCBfYygnYnInKSwgX2MoJ2JyJyksIF9jKCdiJywgW192bS5fdigiRW1haWwgQWRkcmVzczoiKV0pLCBfdm0uX3YoIsKgwqAiKSwgX2MoJ3NwYW4nLCBbX3ZtLl92KF92bS5fcyhzY29wZS5yb3cuZW1haWwpKV0pLCBfYygnYnInKSwgX2MoJ2JyJyldKSwgX2MoJ2VsLWNvbCcsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJzcGFuIjogMTIKICAgICAgICAgIH0KICAgICAgICB9LCBbX2MoJ2InLCBbX3ZtLl92KCJQaW5jb2RlIE51bWJlcjoiKV0pLCBfdm0uX3YoIsKgwqAiKSwgX2MoJ3NwYW4nLCBbX3ZtLl92KF92bS5fcyhzY29wZS5yb3cucGluY29kZSkpXSksIF9jKCdicicpLCBfYygnYnInKSwgX2MoJ2InLCBbX3ZtLl92KCJDaXR5IE5hbWU6IildKSwgX3ZtLl92KCLCoMKgIiksIF9jKCdzcGFuJywgW192bS5fdihfdm0uX3Moc2NvcGUucm93LmNpdHkpKV0pLCBfYygnYnInKSwgX2MoJ2JyJyksIF9jKCdiJywgW192bS5fdigiUmVnaXN0ZXJlZCBOdW1iZXI6IildKSwgX3ZtLl92KCLCoMKgIiksIF92bS5fbChzY29wZS5yb3cudXNlckNvbnRhY3QsIGZ1bmN0aW9uIChjb250YWN0KSB7CiAgICAgICAgICByZXR1cm4gX2MoJ3NwYW4nLCB7CiAgICAgICAgICAgIGtleTogY29udGFjdC5pZAogICAgICAgICAgfSwgW192bS5fdigiICIgKyBfdm0uX3MoY29udGFjdC5jb250YWN0TnVtYmVyKSksIF9jKCdicicpLCBfYygnYnInKV0pOwogICAgICAgIH0pXSwgMildLCAxKV07CiAgICAgIH0KICAgIH1dKQogIH0pLCBfdm0uc2hvd0NyZWF0ZWREYXRlID8gX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJsYWJlbCI6IF92bS4kdCgndGFibGUuY3JlYXRlZERhdGUnKSwKICAgICAgIndpZHRoIjogIjE1MHB4IiwKICAgICAgImFsaWduIjogImNlbnRlciIKICAgIH0sCiAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgIGtleTogImRlZmF1bHQiLAogICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgcmV0dXJuIFtfYygnc3BhbicsIHsKICAgICAgICAgIHN0YXRpY1N0eWxlOiB7CiAgICAgICAgICAgICJjb2xvciI6ICJyZWQiCiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdihfdm0uX3MoX3ZtLl9mKCJtb21lbnQiKShzY29wZS5yb3cuY3JlYXRlZFRpbWVzdGFtcCwgImZyb20iKSkpXSldOwogICAgICB9CiAgICB9XSwgbnVsbCwgZmFsc2UsIDkxMjUyNjg3MCkKICB9KSA6IF92bS5fZSgpLCB0aGlzLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyA/IF9jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAiYWxpZ24iOiAiY2VudGVyIiwKICAgICAgImxhYmVsIjogIkNvbnZlcnQiLAogICAgICAid2lkdGgiOiAiMjIwIgogICAgfSwKICAgIHNjb3BlZFNsb3RzOiBfdm0uX3UoW3sKICAgICAga2V5OiAiZGVmYXVsdCIsCiAgICAgIGZuOiBmdW5jdGlvbiAoc2NvcGUpIHsKICAgICAgICByZXR1cm4gW19jKCdlbC1zZWxlY3QnLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAicGxhY2Vob2xkZXIiOiAiU2VsZWN0IgogICAgICAgICAgfSwKICAgICAgICAgIG1vZGVsOiB7CiAgICAgICAgICAgIHZhbHVlOiBzY29wZS5yb3cuc3RhdHVzLAogICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKCQkdikgewogICAgICAgICAgICAgIF92bS4kc2V0KHNjb3BlLnJvdywgInN0YXR1cyIsICQkdik7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGV4cHJlc3Npb246ICJzY29wZS5yb3cuc3RhdHVzIgogICAgICAgICAgfQogICAgICAgIH0sIF92bS5fbChfdm0udXNlckxpc3QsIGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gX2MoJ2VsLW9wdGlvbicsIHsKICAgICAgICAgICAga2V5OiBpdGVtLnZhbHVlLAogICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICJsYWJlbCI6IGl0ZW0ubGFiZWwsCiAgICAgICAgICAgICAgInZhbHVlIjogaXRlbS52YWx1ZQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KSwgMSksIF9jKCdicicpLCBfYygnYnInKSwgX2MoJ2VsLWJ1dHRvbicsIHsKICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJ3YXZlcyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LXdhdmVzIgogICAgICAgICAgfV0sCiAgICAgICAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogInN1Y2Nlc3MiCiAgICAgICAgICB9LAogICAgICAgICAgb246IHsKICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiBfdm0udXBkYXRlRGlzdHJpYnV0b3Ioc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBDb252ZXJ0ICIpXSldOwogICAgICB9CiAgICB9XSwgbnVsbCwgZmFsc2UsIDEyMjgyMDE5MTkpCiAgfSkgOiBfdm0uX2UoKSwgX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJhbGlnbiI6ICJjZW50ZXIiLAogICAgICAibGFiZWwiOiAiQXNtIiwKICAgICAgIndpZHRoIjogIjIyMCIKICAgIH0sCiAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgIGtleTogImRlZmF1bHQiLAogICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgcmV0dXJuIFtfYygnZWwtc2VsZWN0JywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInBsYWNlaG9sZGVyIjogIlNlbGVjdCIKICAgICAgICAgIH0sCiAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICB2YWx1ZTogc2NvcGUucm93LnN1cGVyQWRtaW5JZCwKICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgkJHYpIHsKICAgICAgICAgICAgICBfdm0uJHNldChzY29wZS5yb3csICJzdXBlckFkbWluSWQiLCAkJHYpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBleHByZXNzaW9uOiAic2NvcGUucm93LnN1cGVyQWRtaW5JZCIKICAgICAgICAgIH0KICAgICAgICB9LCBfdm0uX2woX3ZtLmFzbUxpc3QsIGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gX2MoJ2VsLW9wdGlvbicsIHsKICAgICAgICAgICAga2V5OiBpdGVtLmlkLAogICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICJsYWJlbCI6IGl0ZW0uZnVsbE5hbWUsCiAgICAgICAgICAgICAgInZhbHVlIjogaXRlbS5pZAogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KSwgMSksIF9jKCdicicpLCBfYygnYnInKSwgX3ZtLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyA/IF9jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAid2F2ZXMiLAogICAgICAgICAgICByYXdOYW1lOiAidi13YXZlcyIKICAgICAgICAgIH1dLAogICAgICAgICAgc3RhdGljQ2xhc3M6ICJmaWx0ZXItaXRlbSIsCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidHlwZSI6ICJzdWNjZXNzIgogICAgICAgICAgfSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICJjbGljayI6IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX3ZtLnVwZGF0ZUFzbShzY29wZS5yb3cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdigiIEFzc2lnbiBBc20gIildKSA6IF92bS5fZSgpLCBfYygnYnInKSwgX2MoJ2JyJyksIF92bS5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgPyBfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICAgICAgICB9XSwKICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAic3VjY2VzcyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS5yZW1vdmVBc20oc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBSZW1vdmUgQVNNICIpXSkgOiBfdm0uX2UoKV07CiAgICAgIH0KICAgIH1dKQogIH0pLCB0aGlzLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyB8fCB0aGlzLnJvbGVOYW1lID09ICdSU00nIHx8IHRoaXMucm9sZU5hbWUgPT0gJ1pvbmFsIEhlYWQnID8gX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJhbGlnbiI6ICJjZW50ZXIiLAogICAgICAibGFiZWwiOiAiUnNtIiwKICAgICAgIndpZHRoIjogIjIyMCIKICAgIH0sCiAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgIGtleTogImRlZmF1bHQiLAogICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgcmV0dXJuIFtfYygnZWwtc2VsZWN0JywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInBsYWNlaG9sZGVyIjogIlNlbGVjdCIKICAgICAgICAgIH0sCiAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICB2YWx1ZTogc2NvcGUucm93LnJzbUlkLAogICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKCQkdikgewogICAgICAgICAgICAgIF92bS4kc2V0KHNjb3BlLnJvdywgInJzbUlkIiwgJCR2KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXhwcmVzc2lvbjogInNjb3BlLnJvdy5yc21JZCIKICAgICAgICAgIH0KICAgICAgICB9LCBfdm0uX2woX3ZtLnJzbUxpc3QsIGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gX2MoJ2VsLW9wdGlvbicsIHsKICAgICAgICAgICAga2V5OiBpdGVtLmlkLAogICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICJsYWJlbCI6IGl0ZW0uZnVsbE5hbWUsCiAgICAgICAgICAgICAgInZhbHVlIjogaXRlbS5pZAogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KSwgMSksIF9jKCdicicpLCBfYygnYnInKSwgX3ZtLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyA/IF9jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAid2F2ZXMiLAogICAgICAgICAgICByYXdOYW1lOiAidi13YXZlcyIKICAgICAgICAgIH1dLAogICAgICAgICAgc3RhdGljQ2xhc3M6ICJmaWx0ZXItaXRlbSIsCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidHlwZSI6ICJzdWNjZXNzIgogICAgICAgICAgfSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICJjbGljayI6IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX3ZtLnVwZGF0ZVJzbShzY29wZS5yb3cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdigiIEFzc2lnbiBSU00gIildKSA6IF92bS5fZSgpLCBfYygnYnInKSwgX2MoJ2JyJyksIF92bS5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgPyBfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICAgICAgICB9XSwKICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAic3VjY2VzcyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS5yZW1vdmVSc20oc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBSZW1vdmUgUlNNICIpXSkgOiBfdm0uX2UoKV07CiAgICAgIH0KICAgIH1dLCBudWxsLCBmYWxzZSwgMzAyNzk5MjYzOCkKICB9KSA6IF92bS5fZSgpLCB0aGlzLnJvbGVOYW1lID09ICdzdXBlcmFkbWluJyB8fCB0aGlzLnJvbGVOYW1lID09ICdab25hbCBIZWFkJyA/IF9jKCdlbC10YWJsZS1jb2x1bW4nLCB7CiAgICBhdHRyczogewogICAgICAiYWxpZ24iOiAiY2VudGVyIiwKICAgICAgImxhYmVsIjogIlpvbmFsIEhlYWQiLAogICAgICAid2lkdGgiOiAiMjIwIgogICAgfSwKICAgIHNjb3BlZFNsb3RzOiBfdm0uX3UoW3sKICAgICAga2V5OiAiZGVmYXVsdCIsCiAgICAgIGZuOiBmdW5jdGlvbiAoc2NvcGUpIHsKICAgICAgICByZXR1cm4gW19jKCdlbC1zZWxlY3QnLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAicGxhY2Vob2xkZXIiOiAiU2VsZWN0IgogICAgICAgICAgfSwKICAgICAgICAgIG1vZGVsOiB7CiAgICAgICAgICAgIHZhbHVlOiBzY29wZS5yb3cuem9uZUhlYWRJZCwKICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgkJHYpIHsKICAgICAgICAgICAgICBfdm0uJHNldChzY29wZS5yb3csICJ6b25lSGVhZElkIiwgJCR2KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXhwcmVzc2lvbjogInNjb3BlLnJvdy56b25lSGVhZElkIgogICAgICAgICAgfQogICAgICAgIH0sIF92bS5fbChfdm0uem9uYWxMaXN0LCBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIF9jKCdlbC1vcHRpb24nLCB7CiAgICAgICAgICAgIGtleTogaXRlbS5pZCwKICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAibGFiZWwiOiBpdGVtLmZ1bGxOYW1lLAogICAgICAgICAgICAgICJ2YWx1ZSI6IGl0ZW0uaWQKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSksIDEpLCBfYygnYnInKSwgX2MoJ2JyJyksIF92bS5yb2xlTmFtZSA9PSAnc3VwZXJhZG1pbicgPyBfYygnZWwtYnV0dG9uJywgewogICAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgICAgbmFtZTogIndhdmVzIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtd2F2ZXMiCiAgICAgICAgICB9XSwKICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZmlsdGVyLWl0ZW0iLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAic3VjY2VzcyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS51cGRhdGVab25hbChzY29wZS5yb3cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdigiIEFzc2lnbiBab25hbCBIZWFkICIpXSkgOiBfdm0uX2UoKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfdm0ucm9sZU5hbWUgPT0gJ3N1cGVyYWRtaW4nID8gX2MoJ2VsLWJ1dHRvbicsIHsKICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJ3YXZlcyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LXdhdmVzIgogICAgICAgICAgfV0sCiAgICAgICAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogInN1Y2Nlc3MiCiAgICAgICAgICB9LAogICAgICAgICAgb246IHsKICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiBfdm0ucmVtb3ZlWm9uYWwoc2NvcGUucm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIFtfdm0uX3YoIiBSZW1vdmUgWm9uYWwgIildKSA6IF92bS5fZSgpXTsKICAgICAgfQogICAgfV0sIG51bGwsIGZhbHNlLCAxMDk2MzExNDE0KQogIH0pIDogX3ZtLl9lKCksIF92bS5teVJvbGUuaW5kZXhPZignc3VwZXJhZG1pbicpID4gLTEgPyBfYygnZWwtdGFibGUtY29sdW1uJywgewogICAgYXR0cnM6IHsKICAgICAgImFsaWduIjogImNlbnRlciIsCiAgICAgICJsYWJlbCI6IF92bS4kdCgndGFibGUuYWN0aW9ucycpLAogICAgICAid2lkdGgiOiAiMTgwIgogICAgfSwKICAgIHNjb3BlZFNsb3RzOiBfdm0uX3UoW3sKICAgICAga2V5OiAiZGVmYXVsdCIsCiAgICAgIGZuOiBmdW5jdGlvbiAoc2NvcGUpIHsKICAgICAgICByZXR1cm4gW19jKCdyb3V0ZXItbGluaycsIHsKICAgICAgICAgIHN0YXRpY0NsYXNzOiAibWFyZ2luLWhvcml6b250YWwiLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInRvIjogJy91c2VyQ29udGFjdC9saXN0LycgKyBzY29wZS5yb3cuaWQKICAgICAgICAgIH0KICAgICAgICB9LCBbX2MoJ2VsLWJ1dHRvbicsIHsKICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJ3YXZlcyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LXdhdmVzIgogICAgICAgICAgfV0sCiAgICAgICAgICBzdGF0aWNDbGFzczogImZpbHRlci1pdGVtIiwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ0eXBlIjogInN1Y2Nlc3MiCiAgICAgICAgICB9CiAgICAgICAgfSwgW192bS5fdigiIEFkZCBDb250YWN0ICIpXSldLCAxKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfYygnZWwtcG9wb3ZlcicsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJwbGFjZW1lbnQiOiAicmlnaHQiLAogICAgICAgICAgICAid2lkdGgiOiAiNTAwIiwKICAgICAgICAgICAgInRyaWdnZXIiOiAiY2xpY2siCiAgICAgICAgICB9CiAgICAgICAgfSwgW19jKCdlbC10YWJsZScsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJkYXRhIjogX3ZtLnN0YXR1c0RldGFpbHMKICAgICAgICAgIH0KICAgICAgICB9LCBbX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ3aWR0aCI6ICIyMDAiLAogICAgICAgICAgICAicHJvcGVydHkiOiAiYWRtaW4uZnVsbE5hbWUiLAogICAgICAgICAgICAibGFiZWwiOiAiQWRtaW4gTmFtZSIKICAgICAgICAgIH0KICAgICAgICB9KSwgX2MoJ2VsLXRhYmxlLWNvbHVtbicsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJ3aWR0aCI6ICIyMDAiLAogICAgICAgICAgICAicHJvcGVydHkiOiAiIiwKICAgICAgICAgICAgImxhYmVsIjogInN0YXR1cyIKICAgICAgICAgIH0sCiAgICAgICAgICBzY29wZWRTbG90czogX3ZtLl91KFt7CiAgICAgICAgICAgIGtleTogImRlZmF1bHQiLAogICAgICAgICAgICBmbjogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIFtzY29wZS5yb3cuc3RhdHVzID09IDEgPyBfYygnc3BhbicsIFtfdm0uX3YoIlVzZXIiKV0pIDogX3ZtLl9lKCksIHNjb3BlLnJvdy5zdGF0dXMgPT0gMiA/IF9jKCdzcGFuJywgW192bS5fdigiQ05GIildKSA6IF92bS5fZSgpLCBzY29wZS5yb3cuc3RhdHVzID09IDMgPyBfYygnc3BhbicsIFtfdm0uX3YoIlN1cGVyIFNvY2tldCIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSA0ID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJDRCIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSA1ID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJTRCIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSA2ID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJXQiIpXSkgOiBfdm0uX2UoKSwgc2NvcGUucm93LnN0YXR1cyA9PSA3ID8gX2MoJ3NwYW4nLCBbX3ZtLl92KCJNUlAiKV0pIDogX3ZtLl9lKCksIHNjb3BlLnJvdy5zdGF0dXMgPT0gOCA/IF9jKCdzcGFuJywgW192bS5fdigiQ09QIildKSA6IF92bS5fZSgpLCBzY29wZS5yb3cuc3RhdHVzID09IDkgPyBfYygnc3BhbicsIFtfdm0uX3YoIlNPUCIpXSkgOiBfdm0uX2UoKV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH1dLCBudWxsLCB0cnVlKQogICAgICAgIH0pXSwgMSksIF9jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAibG9hZGluZyIsCiAgICAgICAgICAgIHJhd05hbWU6ICJ2LWxvYWRpbmciLAogICAgICAgICAgICB2YWx1ZTogX3ZtLnVzZXJTdGF0dXNMb2FkaW5nLAogICAgICAgICAgICBleHByZXNzaW9uOiAidXNlclN0YXR1c0xvYWRpbmciCiAgICAgICAgICB9XSwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICJzbG90IjogInJlZmVyZW5jZSIsCiAgICAgICAgICAgICJzaXplIjogInNtYWxsIiwKICAgICAgICAgICAgInR5cGUiOiAid2FybmluZyIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF92bS5nZXRVc2VyU3RhdHVzTG9nKHNjb3BlLnJvdyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBzbG90OiAicmVmZXJlbmNlIgogICAgICAgIH0sIFtfdm0uX3YoIiBIaXN0b3J5ICIpXSldLCAxKSwgX2MoJ2JyJyksIF9jKCdicicpLCBfYygncm91dGVyLWxpbmsnLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAidG8iOiAnL3VzZXIvZWRpdC8nICsgc2NvcGUucm93LmlkCiAgICAgICAgICB9CiAgICAgICAgfSwgW19jKCdlbC1idXR0b24nLCB7CiAgICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgICBuYW1lOiAid2F2ZXMiLAogICAgICAgICAgICByYXdOYW1lOiAidi13YXZlcyIKICAgICAgICAgIH1dLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgInR5cGUiOiAid2FybmluZyIsCiAgICAgICAgICAgICJzaXplIjogInNtYWxsIiwKICAgICAgICAgICAgImljb24iOiAiZWwtaWNvbi1lZGl0IgogICAgICAgICAgfQogICAgICAgIH0pXSwgMSldOwogICAgICB9CiAgICB9XSwgbnVsbCwgZmFsc2UsIDU0NDI0OTUxNSkKICB9KSA6IF92bS5fZSgpXSwgMSksIF9jKCdwYWdpbmF0aW9uJywgewogICAgZGlyZWN0aXZlczogW3sKICAgICAgbmFtZTogInNob3ciLAogICAgICByYXdOYW1lOiAidi1zaG93IiwKICAgICAgdmFsdWU6IF92bS50b3RhbCA+IDAsCiAgICAgIGV4cHJlc3Npb246ICJ0b3RhbCA+IDAiCiAgICB9XSwKICAgIGF0dHJzOiB7CiAgICAgICJ0b3RhbCI6IF92bS50b3RhbCwKICAgICAgInBhZ2UiOiBfdm0ubGlzdFF1ZXJ5LnBhZ2UsCiAgICAgICJsaW1pdCI6IF92bS5saXN0UXVlcnkubGltaXQKICAgIH0sCiAgICBvbjogewogICAgICAidXBkYXRlOnBhZ2UiOiBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgcmV0dXJuIF92bS4kc2V0KF92bS5saXN0UXVlcnksICJwYWdlIiwgJGV2ZW50KTsKICAgICAgfSwKICAgICAgInVwZGF0ZTpsaW1pdCI6IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICByZXR1cm4gX3ZtLiRzZXQoX3ZtLmxpc3RRdWVyeSwgImxpbWl0IiwgJGV2ZW50KTsKICAgICAgfSwKICAgICAgInBhZ2luYXRpb24iOiBfdm0uZ2V0TGlzdAogICAgfQogIH0pXSwgMSldLCAxKV0sIDEpOwp9OwpleHBvcnRzLnJlbmRlciA9IHJlbmRlcjsKdmFyIHN0YXRpY1JlbmRlckZucyA9IFtdOwpleHBvcnRzLnN0YXRpY1JlbmRlckZucyA9IHN0YXRpY1JlbmRlckZuczs="},null]}