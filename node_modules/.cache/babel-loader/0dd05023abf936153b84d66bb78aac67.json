{"remainingRequest":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/babel-loader/lib/index.js!/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/vue-image-crop-upload/upload-2.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/vue-image-crop-upload/upload-2.vue","mtime":1655274283581},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/babel.config.js","mtime":1668754947334},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/cache-loader/dist/cjs.js","mtime":1655274288430},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/babel-loader/lib/index.js","mtime":1668596430903},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/cache-loader/dist/cjs.js","mtime":1655274288430},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/vue-loader/lib/index.js","mtime":1668596436320}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:J3VzZSBzdHJpY3QnOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvaG9tZS9hbGdvb2NlYW4vRGVza3RvcC9BT1QtUHJvamVjdC9teXZhcm5pLWFkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIpLmRlZmF1bHQ7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwp2YXIgX2xhbmd1YWdlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL3V0aWxzL2xhbmd1YWdlLmpzIikpOwp2YXIgX21pbWVzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL3V0aWxzL21pbWVzLmpzIikpOwp2YXIgX2RhdGEyYmxvYiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi91dGlscy9kYXRhMmJsb2IuanMiKSk7CnZhciBfZWZmZWN0UmlwcGxlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL3V0aWxzL2VmZmVjdFJpcHBsZS5qcyIpKTsKdmFyIF9kZWZhdWx0ID0gewogIHByb3BzOiB7CiAgICAvLyDln5/vvIzkuIrkvKDmlofku7ZuYW1l77yM6Kem5Y+R5LqL5Lu25Lya5bim5LiK77yI5aaC5p6c5LiA5Liq6aG16Z2i5aSa5Liq5Zu+54mH5LiK5Lyg5o6n5Lu277yM5Y+v5Lul5YGa5Yy65YiGCiAgICBmaWVsZDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICdkZWZhdWx0JzogJ2F2YXRhcicKICAgIH0sCiAgICAvLyDljp/lkI1rZXnvvIznsbvkvLzkuo5pZO+8jOinpuWPkeS6i+S7tuS8muW4puS4iu+8iOWmguaenOS4gOS4qumhtemdouWkmuS4quWbvueJh+S4iuS8oOaOp+S7tu+8jOWPr+S7peWBmuWMuuWIhgogICAga2k6IHsKICAgICAgJ2RlZmF1bHQnOiAwCiAgICB9LAogICAgLy8g5pi+56S66K+l5o6n5Lu25LiO5ZCmCiAgICB2YWx1ZTogewogICAgICAnZGVmYXVsdCc6IHRydWUKICAgIH0sCiAgICAvLyDkuIrkvKDlnLDlnYAKICAgIHVybDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICdkZWZhdWx0JzogJycKICAgIH0sCiAgICAvLyDlhbbku5bopoHkuIrkvKDmlofku7bpmYTluKbnmoTmlbDmja7vvIzlr7nosaHmoLzlvI8KICAgIHBhcmFtczogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgICdkZWZhdWx0JzogbnVsbAogICAgfSwKICAgIC8vQWRkIGN1c3RvbSBoZWFkZXJzCiAgICBoZWFkZXJzOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgJ2RlZmF1bHQnOiBudWxsCiAgICB9LAogICAgLy8g5Ymq6KOB5Zu+54mH55qE5a69CiAgICB3aWR0aDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDIwMAogICAgfSwKICAgIC8vIOWJquijgeWbvueJh+eahOmrmAogICAgaGVpZ2h0OiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMjAwCiAgICB9LAogICAgLy8g5LiN5pi+56S65peL6L2s5Yqf6IO9CiAgICBub1JvdGF0ZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgLy8g5LiN6aKE6KeI5ZyG5b2i5Zu+54mHCiAgICBub0NpcmNsZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIC8vIOS4jemihOiniOaWueW9ouWbvueJhwogICAgbm9TcXVhcmU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICAvLyDljZXmlofku7blpKflsI/pmZDliLYKICAgIG1heFNpemU6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICAnZGVmYXVsdCc6IDEwMjQwCiAgICB9LAogICAgLy8g6K+t6KiA57G75Z6LCiAgICBsYW5nVHlwZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICdkZWZhdWx0JzogJ3poJwogICAgfSwKICAgIC8vIOivreiogOWMhQogICAgbGFuZ0V4dDogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgICdkZWZhdWx0JzogbnVsbAogICAgfSwKICAgIC8vIOWbvueJh+S4iuS8oOagvOW8jwogICAgaW1nRm9ybWF0OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgJ2RlZmF1bHQnOiAncG5nJwogICAgfSwKICAgIC8vIOWbvueJh+iDjOaZryBqcGfmg4XlhrXkuIvnlJ/mlYgKICAgIGltZ0JnYzogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICdkZWZhdWx0JzogJyNmZmYnCiAgICB9LAogICAgLy8g5piv5ZCm5pSv5oyB6Leo5Z+fCiAgICB3aXRoQ3JlZGVudGlhbHM6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgJ2RlZmF1bHQnOiBmYWxzZQogICAgfSwKICAgIG1ldGhvZDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICdkZWZhdWx0JzogJ1BPU1QnCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgbGV0IHRoYXQgPSB0aGlzLAogICAgICB7CiAgICAgICAgaW1nRm9ybWF0LAogICAgICAgIGxhbmdUeXBlLAogICAgICAgIGxhbmdFeHQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0gPSB0aGF0LAogICAgICBpc1N1cHBvcnRlZCA9IHRydWUsCiAgICAgIGFsbG93SW1nRm9ybWF0ID0gWydqcGcnLCAncG5nJ10sCiAgICAgIHRlbXBJbWdGb3JtYXQgPSBhbGxvd0ltZ0Zvcm1hdC5pbmRleE9mKGltZ0Zvcm1hdCkgPT09IC0xID8gJ2pwZycgOiBpbWdGb3JtYXQsCiAgICAgIGxhbmcgPSBfbGFuZ3VhZ2UuZGVmYXVsdFtsYW5nVHlwZV0gPyBfbGFuZ3VhZ2UuZGVmYXVsdFtsYW5nVHlwZV0gOiBfbGFuZ3VhZ2UuZGVmYXVsdFsnZW4nXSwKICAgICAgbWltZSA9IF9taW1lcy5kZWZhdWx0W3RlbXBJbWdGb3JtYXRdOwogICAgLy8g6KeE6IyD5Zu+54mH5qC85byPCiAgICB0aGF0LmltZ0Zvcm1hdCA9IHRlbXBJbWdGb3JtYXQ7CiAgICBpZiAobGFuZ0V4dCkgewogICAgICBPYmplY3QuYXNzaWduKGxhbmcsIGxhbmdFeHQpOwogICAgfQogICAgaWYgKHR5cGVvZiBGb3JtRGF0YSAhPSAnZnVuY3Rpb24nKSB7CiAgICAgIGlzU3VwcG9ydGVkID0gZmFsc2U7CiAgICB9CiAgICByZXR1cm4gewogICAgICAvLyDlm77niYfnmoRtaW1lCiAgICAgIG1pbWUsCiAgICAgIC8vIOivreiogOWMhQogICAgICBsYW5nLAogICAgICAvLyDmtY/op4jlmajmmK/lkKbmlK/mjIHor6Xmjqfku7YKICAgICAgaXNTdXBwb3J0ZWQsCiAgICAgIC8vIOa1j+iniOWZqOaYr+WQpuaUr+aMgeinpuWxj+S6i+S7tgogICAgICBpc1N1cHBvcnRUb3VjaDogZG9jdW1lbnQuaGFzT3duUHJvcGVydHkoIm9udG91Y2hzdGFydCIpLAogICAgICAvLyDmraXpqqQKICAgICAgc3RlcDogMSwKICAgICAgLy8x6YCJ5oup5paH5Lu2IDLliaroo4EgM+S4iuS8oAoKICAgICAgLy8g5LiK5Lyg54q25oCB5Y+K6L+b5bqmCiAgICAgIGxvYWRpbmc6IDAsCiAgICAgIC8vMOacquW8gOWniyAx5q2j5ZyoIDLmiJDlip8gM+mUmeivrwogICAgICBwcm9ncmVzczogMCwKICAgICAgLy8g5piv5ZCm5pyJ6ZSZ6K+v5Y+K6ZSZ6K+v5L+h5oGvCiAgICAgIGhhc0Vycm9yOiBmYWxzZSwKICAgICAgZXJyb3JNc2c6ICcnLAogICAgICAvLyDpnIDmsYLlm77lrr3pq5jmr5QKICAgICAgcmF0aW86IHdpZHRoIC8gaGVpZ2h0LAogICAgICAvLyDljp/lm77lnLDlnYDjgIHnlJ/miJDlm77niYflnLDlnYAKICAgICAgc291cmNlSW1nOiBudWxsLAogICAgICBzb3VyY2VJbWdVcmw6ICcnLAogICAgICBjcmVhdGVJbWdVcmw6ICcnLAogICAgICAvLyDljp/lm77niYfmi5bliqjkuovku7bliJ3lp4vlgLwKICAgICAgc291cmNlSW1nTW91c2VEb3duOiB7CiAgICAgICAgb246IGZhbHNlLAogICAgICAgIG1YOiAwLAogICAgICAgIC8v6byg5qCH5oyJ5LiL55qE5Z2Q5qCHCiAgICAgICAgbVk6IDAsCiAgICAgICAgeDogMCwKICAgICAgICAvL3NjYWxl5Y6f5Zu+5Z2Q5qCHCiAgICAgICAgeTogMAogICAgICB9LAogICAgICAvLyDnlJ/miJDlm77niYfpooTop4jnmoTlrrnlmajlpKflsI8KICAgICAgcHJldmlld0NvbnRhaW5lcjogewogICAgICAgIHdpZHRoOiAxMDAsCiAgICAgICAgaGVpZ2h0OiAxMDAKICAgICAgfSwKICAgICAgLy8g5Y6f5Zu+5a655Zmo5a696auYCiAgICAgIHNvdXJjZUltZ0NvbnRhaW5lcjogewogICAgICAgIC8vIHNpYwogICAgICAgIHdpZHRoOiAyNDAsCiAgICAgICAgaGVpZ2h0OiAxODQgLy8g5aaC5p6c55Sf5oiQ5Zu+5q+U5L6L5LiO5q2k5LiA6Ie05Lya5Ye6546wYnVn77yM5YWI5pS55oiQ54m55q6K55qE5qC85byP5ZCn77yM5ZOI5ZOI5ZOICiAgICAgIH0sCgogICAgICAvLyDljp/lm77lsZXnpLrlsZ7mgKcKICAgICAgc2NhbGU6IHsKICAgICAgICB6b29tQWRkT246IGZhbHNlLAogICAgICAgIC8v5oyJ6ZKu57yp5pS+5LqL5Lu25byA5ZCvCiAgICAgICAgem9vbVN1Yk9uOiBmYWxzZSwKICAgICAgICAvL+aMiemSrue8qeaUvuS6i+S7tuW8gOWQrwogICAgICAgIHJhbmdlOiAxLAogICAgICAgIC8v5pyA5aSnMTAwCgogICAgICAgIHg6IDAsCiAgICAgICAgeTogMCwKICAgICAgICB3aWR0aDogMCwKICAgICAgICBoZWlnaHQ6IDAsCiAgICAgICAgbWF4V2lkdGg6IDAsCiAgICAgICAgbWF4SGVpZ2h0OiAwLAogICAgICAgIG1pbldpZHRoOiAwLAogICAgICAgIC8v5pyA5a69CiAgICAgICAgbWluSGVpZ2h0OiAwLAogICAgICAgIG5hdHVyYWxXaWR0aDogMCwKICAgICAgICAvL+WOn+WuvQogICAgICAgIG5hdHVyYWxIZWlnaHQ6IDAKICAgICAgfQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAvLyDov5vluqbmnaHmoLflvI8KICAgIHByb2dyZXNzU3R5bGUoKSB7CiAgICAgIGxldCB7CiAgICAgICAgcHJvZ3Jlc3MKICAgICAgfSA9IHRoaXM7CiAgICAgIHJldHVybiB7CiAgICAgICAgd2lkdGg6IHByb2dyZXNzICsgJyUnCiAgICAgIH07CiAgICB9LAogICAgLy8g5Y6f5Zu+5qC35byPCiAgICBzb3VyY2VJbWdTdHlsZSgpIHsKICAgICAgbGV0IHsKICAgICAgICAgIHNjYWxlLAogICAgICAgICAgc291cmNlSW1nTWFza2luZwogICAgICAgIH0gPSB0aGlzLAogICAgICAgIHRvcCA9IHNjYWxlLnkgKyBzb3VyY2VJbWdNYXNraW5nLnkgKyAncHgnLAogICAgICAgIGxlZnQgPSBzY2FsZS54ICsgc291cmNlSW1nTWFza2luZy54ICsgJ3B4JzsKICAgICAgcmV0dXJuIHsKICAgICAgICB0b3AsCiAgICAgICAgbGVmdCwKICAgICAgICB3aWR0aDogc2NhbGUud2lkdGggKyAncHgnLAogICAgICAgIGhlaWdodDogc2NhbGUuaGVpZ2h0ICsgJ3B4JyAvLyDlhbzlrrkgT3BlcmEKICAgICAgfTsKICAgIH0sCgogICAgLy8g5Y6f5Zu+6JKZ54mI5bGe5oCnCiAgICBzb3VyY2VJbWdNYXNraW5nKCkgewogICAgICBsZXQgewogICAgICAgICAgd2lkdGgsCiAgICAgICAgICBoZWlnaHQsCiAgICAgICAgICByYXRpbywKICAgICAgICAgIHNvdXJjZUltZ0NvbnRhaW5lcgogICAgICAgIH0gPSB0aGlzLAogICAgICAgIHNpYyA9IHNvdXJjZUltZ0NvbnRhaW5lciwKICAgICAgICBzaWNSYXRpbyA9IHNpYy53aWR0aCAvIHNpYy5oZWlnaHQsCiAgICAgICAgLy8g5Y6f5Zu+5a655Zmo5a696auY5q+UCiAgICAgICAgeCA9IDAsCiAgICAgICAgeSA9IDAsCiAgICAgICAgdyA9IHNpYy53aWR0aCwKICAgICAgICBoID0gc2ljLmhlaWdodCwKICAgICAgICBzY2FsZSA9IDE7CiAgICAgIGlmIChyYXRpbyA8IHNpY1JhdGlvKSB7CiAgICAgICAgc2NhbGUgPSBzaWMuaGVpZ2h0IC8gaGVpZ2h0OwogICAgICAgIHcgPSBzaWMuaGVpZ2h0ICogcmF0aW87CiAgICAgICAgeCA9IChzaWMud2lkdGggLSB3KSAvIDI7CiAgICAgIH0KICAgICAgaWYgKHJhdGlvID4gc2ljUmF0aW8pIHsKICAgICAgICBzY2FsZSA9IHNpYy53aWR0aCAvIHdpZHRoOwogICAgICAgIGggPSBzaWMud2lkdGggLyByYXRpbzsKICAgICAgICB5ID0gKHNpYy5oZWlnaHQgLSBoKSAvIDI7CiAgICAgIH0KICAgICAgcmV0dXJuIHsKICAgICAgICBzY2FsZSwKICAgICAgICAvLyDokpnniYjnm7jlr7npnIDmsYLlrr3pq5jnmoTnvKnmlL4KICAgICAgICB4LAogICAgICAgIHksCiAgICAgICAgd2lkdGg6IHcsCiAgICAgICAgaGVpZ2h0OiBoCiAgICAgIH07CiAgICB9LAogICAgLy8g5Y6f5Zu+6YGu572p5qC35byPCiAgICBzb3VyY2VJbWdTaGFkZVN0eWxlKCkgewogICAgICBsZXQgewogICAgICAgICAgc291cmNlSW1nTWFza2luZywKICAgICAgICAgIHNvdXJjZUltZ0NvbnRhaW5lcgogICAgICAgIH0gPSB0aGlzLAogICAgICAgIHNpYyA9IHNvdXJjZUltZ0NvbnRhaW5lciwKICAgICAgICBzaW0gPSBzb3VyY2VJbWdNYXNraW5nLAogICAgICAgIHcgPSBzaW0ud2lkdGggPT0gc2ljLndpZHRoID8gc2ltLndpZHRoIDogKHNpYy53aWR0aCAtIHNpbS53aWR0aCkgLyAyLAogICAgICAgIGggPSBzaW0uaGVpZ2h0ID09IHNpYy5oZWlnaHQgPyBzaW0uaGVpZ2h0IDogKHNpYy5oZWlnaHQgLSBzaW0uaGVpZ2h0KSAvIDI7CiAgICAgIHJldHVybiB7CiAgICAgICAgd2lkdGg6IHcgKyAncHgnLAogICAgICAgIGhlaWdodDogaCArICdweCcKICAgICAgfTsKICAgIH0sCiAgICBwcmV2aWV3U3R5bGUoKSB7CiAgICAgIGxldCB7CiAgICAgICAgICB3aWR0aCwKICAgICAgICAgIGhlaWdodCwKICAgICAgICAgIHJhdGlvLAogICAgICAgICAgcHJldmlld0NvbnRhaW5lcgogICAgICAgIH0gPSB0aGlzLAogICAgICAgIHBjID0gcHJldmlld0NvbnRhaW5lciwKICAgICAgICB3ID0gcGMud2lkdGgsCiAgICAgICAgaCA9IHBjLmhlaWdodCwKICAgICAgICBwY1JhdGlvID0gdyAvIGg7CiAgICAgIGlmIChyYXRpbyA8IHBjUmF0aW8pIHsKICAgICAgICB3ID0gcGMuaGVpZ2h0ICogcmF0aW87CiAgICAgIH0KICAgICAgaWYgKHJhdGlvID4gcGNSYXRpbykgewogICAgICAgIGggPSBwYy53aWR0aCAvIHJhdGlvOwogICAgICB9CiAgICAgIHJldHVybiB7CiAgICAgICAgd2lkdGg6IHcgKyAncHgnLAogICAgICAgIGhlaWdodDogaCArICdweCcKICAgICAgfTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICB2YWx1ZShuZXdWYWx1ZSkgewogICAgICBpZiAobmV3VmFsdWUgJiYgdGhpcy5sb2FkaW5nICE9IDEpIHsKICAgICAgICB0aGlzLnJlc2V0KCk7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOeCueWHu+azoue6ueaViOaenAogICAgcmlwcGxlKGUpIHsKICAgICAgKDAsIF9lZmZlY3RSaXBwbGUuZGVmYXVsdCkoZSk7CiAgICB9LAogICAgLy8g5YWz6Zet5o6n5Lu2CiAgICBvZmYoKSB7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgZmFsc2UpOwogICAgICAgIGlmICh0aGlzLnN0ZXAgPT0gMyAmJiB0aGlzLmxvYWRpbmcgPT0gMikgewogICAgICAgICAgdGhpcy5zZXRTdGVwKDEpOwogICAgICAgIH0KICAgICAgfSwgMjAwKTsKICAgIH0sCiAgICAvLyDorr7nva7mraXpqqQKICAgIHNldFN0ZXAobm8pIHsKICAgICAgLy8g5bu25pe25piv5Li65LqG5pi+56S65Yqo55S75pWI5p6c5ZGi77yM5ZOI5ZOI5ZOICiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHRoaXMuc3RlcCA9IG5vOwogICAgICB9LCAyMDApOwogICAgfSwKICAgIC8qIOWbvueJh+mAieaLqeWMuuWfn+WHveaVsOe7keWumg0KICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwogICAgcHJldmVudERlZmF1bHQoZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICBoYW5kbGVDbGljayhlKSB7CiAgICAgIGlmICh0aGlzLmxvYWRpbmcgIT09IDEpIHsKICAgICAgICBpZiAoZS50YXJnZXQgIT09IHRoaXMuJHJlZnMuZmlsZWlucHV0KSB7CiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAhPT0gdGhpcy4kcmVmcykgewogICAgICAgICAgICB0aGlzLiRyZWZzLmZpbGVpbnB1dC5jbGljaygpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGhhbmRsZUNoYW5nZShlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgaWYgKHRoaXMubG9hZGluZyAhPT0gMSkgewogICAgICAgIGxldCBmaWxlcyA9IGUudGFyZ2V0LmZpbGVzIHx8IGUuZGF0YVRyYW5zZmVyLmZpbGVzOwogICAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgICBpZiAodGhpcy5jaGVja0ZpbGUoZmlsZXNbMF0pKSB7CiAgICAgICAgICB0aGlzLnNldFNvdXJjZUltZyhmaWxlc1swXSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KCiAgICAvLyDmo4DmtYvpgInmi6nnmoTmlofku7bmmK/lkKblkIjpgIIKICAgIGNoZWNrRmlsZShmaWxlKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpcywKICAgICAgICB7CiAgICAgICAgICBsYW5nLAogICAgICAgICAgbWF4U2l6ZQogICAgICAgIH0gPSB0aGF0OwogICAgICAvLyDku4XpmZDlm77niYcKICAgICAgaWYgKGZpbGUudHlwZS5pbmRleE9mKCdpbWFnZScpID09PSAtMSkgewogICAgICAgIHRoYXQuaGFzRXJyb3IgPSB0cnVlOwogICAgICAgIHRoYXQuZXJyb3JNc2cgPSBsYW5nLmVycm9yLm9ubHlJbWc7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICAvLyDotoXlh7rlpKflsI8KICAgICAgaWYgKGZpbGUuc2l6ZSAvIDEwMjQgPiBtYXhTaXplKSB7CiAgICAgICAgdGhhdC5oYXNFcnJvciA9IHRydWU7CiAgICAgICAgdGhhdC5lcnJvck1zZyA9IGxhbmcuZXJyb3Iub3V0T2ZTaXplICsgbWF4U2l6ZSArICdrYic7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIC8vIOmHjee9ruaOp+S7tgogICAgcmVzZXQoKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgdGhhdC5sb2FkaW5nID0gMDsKICAgICAgdGhhdC5oYXNFcnJvciA9IGZhbHNlOwogICAgICB0aGF0LmVycm9yTXNnID0gJyc7CiAgICAgIHRoYXQucHJvZ3Jlc3MgPSAwOwogICAgfSwKICAgIC8vIOiuvue9ruWbvueJh+a6kAogICAgc2V0U291cmNlSW1nKGZpbGUpIHsKICAgICAgdGhpcy4kZW1pdCgnc3JjLWZpbGUtc2V0JywgZmlsZS5uYW1lLCBmaWxlLnR5cGUsIGZpbGUuc2l6ZSk7CiAgICAgIGxldCB0aGF0ID0gdGhpcywKICAgICAgICBmciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgIGZyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdGhhdC5zb3VyY2VJbWdVcmwgPSBmci5yZXN1bHQ7CiAgICAgICAgdGhhdC5zdGFydENyb3AoKTsKICAgICAgfTsKICAgICAgZnIucmVhZEFzRGF0YVVSTChmaWxlKTsKICAgIH0sCiAgICAvLyDliaroo4HliY3lh4blpIflt6XkvZwKICAgIHN0YXJ0Q3JvcCgpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzLAogICAgICAgIHsKICAgICAgICAgIHdpZHRoLAogICAgICAgICAgaGVpZ2h0LAogICAgICAgICAgcmF0aW8sCiAgICAgICAgICBzY2FsZSwKICAgICAgICAgIHNvdXJjZUltZ1VybCwKICAgICAgICAgIHNvdXJjZUltZ01hc2tpbmcsCiAgICAgICAgICBsYW5nCiAgICAgICAgfSA9IHRoYXQsCiAgICAgICAgc2ltID0gc291cmNlSW1nTWFza2luZywKICAgICAgICBpbWcgPSBuZXcgSW1hZ2UoKTsKICAgICAgaW1nLnNyYyA9IHNvdXJjZUltZ1VybDsKICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBsZXQgbldpZHRoID0gaW1nLm5hdHVyYWxXaWR0aCwKICAgICAgICAgIG5IZWlnaHQgPSBpbWcubmF0dXJhbEhlaWdodCwKICAgICAgICAgIG5SYXRpbyA9IG5XaWR0aCAvIG5IZWlnaHQsCiAgICAgICAgICB3ID0gc2ltLndpZHRoLAogICAgICAgICAgaCA9IHNpbS5oZWlnaHQsCiAgICAgICAgICB4ID0gMCwKICAgICAgICAgIHkgPSAwOwogICAgICAgIC8vIOWbvueJh+WDj+e0oOS4jei+vuaghwogICAgICAgIGlmIChuV2lkdGggPCB3aWR0aCB8fCBuSGVpZ2h0IDwgaGVpZ2h0KSB7CiAgICAgICAgICB0aGF0Lmhhc0Vycm9yID0gdHJ1ZTsKICAgICAgICAgIHRoYXQuZXJyb3JNc2cgPSBsYW5nLmVycm9yLmxvd2VzdFB4ICsgd2lkdGggKyAnKicgKyBoZWlnaHQ7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGlmIChyYXRpbyA+IG5SYXRpbykgewogICAgICAgICAgaCA9IHcgLyBuUmF0aW87CiAgICAgICAgICB5ID0gKHNpbS5oZWlnaHQgLSBoKSAvIDI7CiAgICAgICAgfQogICAgICAgIGlmIChyYXRpbyA8IG5SYXRpbykgewogICAgICAgICAgdyA9IGggKiBuUmF0aW87CiAgICAgICAgICB4ID0gKHNpbS53aWR0aCAtIHcpIC8gMjsKICAgICAgICB9CiAgICAgICAgc2NhbGUucmFuZ2UgPSAwOwogICAgICAgIHNjYWxlLnggPSB4OwogICAgICAgIHNjYWxlLnkgPSB5OwogICAgICAgIHNjYWxlLndpZHRoID0gdzsKICAgICAgICBzY2FsZS5oZWlnaHQgPSBoOwogICAgICAgIHNjYWxlLm1pbldpZHRoID0gdzsKICAgICAgICBzY2FsZS5taW5IZWlnaHQgPSBoOwogICAgICAgIHNjYWxlLm1heFdpZHRoID0gbldpZHRoICogc2ltLnNjYWxlOwogICAgICAgIHNjYWxlLm1heEhlaWdodCA9IG5IZWlnaHQgKiBzaW0uc2NhbGU7CiAgICAgICAgc2NhbGUubmF0dXJhbFdpZHRoID0gbldpZHRoOwogICAgICAgIHNjYWxlLm5hdHVyYWxIZWlnaHQgPSBuSGVpZ2h0OwogICAgICAgIHRoYXQuc291cmNlSW1nID0gaW1nOwogICAgICAgIHRoYXQuY3JlYXRlSW1nKCk7CiAgICAgICAgdGhhdC5zZXRTdGVwKDIpOwogICAgICB9OwogICAgfSwKICAgIC8vIOm8oOagh+aMieS4i+WbvueJh+WHhuWkh+enu+WKqAogICAgaW1nU3RhcnRNb3ZlKGUpIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAvLyDmlK/mjIHop6bmkbjkuovku7bvvIzliJnpvKDmoIfkuovku7bml6DmlYgKICAgICAgaWYgKHRoaXMuaXNTdXBwb3J0VG91Y2ggJiYgIWUudGFyZ2V0VG91Y2hlcykgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBsZXQgZXQgPSBlLnRhcmdldFRvdWNoZXMgPyBlLnRhcmdldFRvdWNoZXNbMF0gOiBlLAogICAgICAgIHsKICAgICAgICAgIHNvdXJjZUltZ01vdXNlRG93biwKICAgICAgICAgIHNjYWxlCiAgICAgICAgfSA9IHRoaXMsCiAgICAgICAgc2ltZCA9IHNvdXJjZUltZ01vdXNlRG93bjsKICAgICAgc2ltZC5tWCA9IGV0LnNjcmVlblg7CiAgICAgIHNpbWQubVkgPSBldC5zY3JlZW5ZOwogICAgICBzaW1kLnggPSBzY2FsZS54OwogICAgICBzaW1kLnkgPSBzY2FsZS55OwogICAgICBzaW1kLm9uID0gdHJ1ZTsKICAgIH0sCiAgICAvLyDpvKDmoIfmjInkuIvnirbmgIHkuIvnp7vliqjvvIzlm77niYfnp7vliqgKICAgIGltZ01vdmUoZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIC8vIOaUr+aMgeinpuaRuOS6i+S7tu+8jOWImem8oOagh+S6i+S7tuaXoOaViAogICAgICBpZiAodGhpcy5pc1N1cHBvcnRUb3VjaCAmJiAhZS50YXJnZXRUb3VjaGVzKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGxldCBldCA9IGUudGFyZ2V0VG91Y2hlcyA/IGUudGFyZ2V0VG91Y2hlc1swXSA6IGUsCiAgICAgICAgewogICAgICAgICAgc291cmNlSW1nTW91c2VEb3duOiB7CiAgICAgICAgICAgIG9uLAogICAgICAgICAgICBtWCwKICAgICAgICAgICAgbVksCiAgICAgICAgICAgIHgsCiAgICAgICAgICAgIHkKICAgICAgICAgIH0sCiAgICAgICAgICBzY2FsZSwKICAgICAgICAgIHNvdXJjZUltZ01hc2tpbmcKICAgICAgICB9ID0gdGhpcywKICAgICAgICBzaW0gPSBzb3VyY2VJbWdNYXNraW5nLAogICAgICAgIG5YID0gZXQuc2NyZWVuWCwKICAgICAgICBuWSA9IGV0LnNjcmVlblksCiAgICAgICAgZFggPSBuWCAtIG1YLAogICAgICAgIGRZID0gblkgLSBtWSwKICAgICAgICByWCA9IHggKyBkWCwKICAgICAgICByWSA9IHkgKyBkWTsKICAgICAgaWYgKCFvbikgcmV0dXJuOwogICAgICBpZiAoclggPiAwKSB7CiAgICAgICAgclggPSAwOwogICAgICB9CiAgICAgIGlmIChyWSA+IDApIHsKICAgICAgICByWSA9IDA7CiAgICAgIH0KICAgICAgaWYgKHJYIDwgc2ltLndpZHRoIC0gc2NhbGUud2lkdGgpIHsKICAgICAgICByWCA9IHNpbS53aWR0aCAtIHNjYWxlLndpZHRoOwogICAgICB9CiAgICAgIGlmIChyWSA8IHNpbS5oZWlnaHQgLSBzY2FsZS5oZWlnaHQpIHsKICAgICAgICByWSA9IHNpbS5oZWlnaHQgLSBzY2FsZS5oZWlnaHQ7CiAgICAgIH0KICAgICAgc2NhbGUueCA9IHJYOwogICAgICBzY2FsZS55ID0gclk7CiAgICB9LAogICAgLy8g6aG65pe26ZKI5peL6L2s5Zu+54mHCiAgICByb3RhdGVJbWcoZSkgewogICAgICBsZXQgewogICAgICAgICAgc291cmNlSW1nLAogICAgICAgICAgc2NhbGU6IHsKICAgICAgICAgICAgbmF0dXJhbFdpZHRoLAogICAgICAgICAgICBuYXR1cmFsSGVpZ2h0CiAgICAgICAgICB9CiAgICAgICAgfSA9IHRoaXMsCiAgICAgICAgd2lkdGggPSBuYXR1cmFsSGVpZ2h0LAogICAgICAgIGhlaWdodCA9IG5hdHVyYWxXaWR0aCwKICAgICAgICBjYW52YXMgPSB0aGlzLiRyZWZzLmNhbnZhcywKICAgICAgICBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgY2FudmFzLndpZHRoID0gd2lkdGg7CiAgICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7CiAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7CiAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgwLDAsMCwwKSc7CiAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTsKICAgICAgY3R4LnRyYW5zbGF0ZSh3aWR0aCwgMCk7CiAgICAgIGN0eC5yb3RhdGUoTWF0aC5QSSAqIDkwIC8gMTgwKTsKICAgICAgY3R4LmRyYXdJbWFnZShzb3VyY2VJbWcsIDAsIDAsIG5hdHVyYWxXaWR0aCwgbmF0dXJhbEhlaWdodCk7CiAgICAgIGxldCBpbWdVcmwgPSBjYW52YXMudG9EYXRhVVJMKF9taW1lcy5kZWZhdWx0WydwbmcnXSk7CiAgICAgIHRoaXMuc291cmNlSW1nVXJsID0gaW1nVXJsOwogICAgICB0aGlzLnN0YXJ0Q3JvcCgpOwogICAgfSwKICAgIC8vIOaMiemSruaMieS4i+W8gOWni+aUvuWkpwogICAgc3RhcnRab29tQWRkKGUpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzLAogICAgICAgIHsKICAgICAgICAgIHNjYWxlCiAgICAgICAgfSA9IHRoYXQ7CiAgICAgIHNjYWxlLnpvb21BZGRPbiA9IHRydWU7CiAgICAgIGZ1bmN0aW9uIHpvb20oKSB7CiAgICAgICAgaWYgKHNjYWxlLnpvb21BZGRPbikgewogICAgICAgICAgbGV0IHJhbmdlID0gc2NhbGUucmFuZ2UgPj0gMTAwID8gMTAwIDogKytzY2FsZS5yYW5nZTsKICAgICAgICAgIHRoYXQuem9vbUltZyhyYW5nZSk7CiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgem9vbSgpOwogICAgICAgICAgfSwgNjApOwogICAgICAgIH0KICAgICAgfQogICAgICB6b29tKCk7CiAgICB9LAogICAgLy8g5oyJ6ZKu5p2+5byA5oiW56e75byA5Y+W5raI5pS+5aSnCiAgICBlbmRab29tQWRkKGUpIHsKICAgICAgdGhpcy5zY2FsZS56b29tQWRkT24gPSBmYWxzZTsKICAgIH0sCiAgICAvLyDmjInpkq7mjInkuIvlvIDlp4vnvKnlsI8KICAgIHN0YXJ0Wm9vbVN1YihlKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpcywKICAgICAgICB7CiAgICAgICAgICBzY2FsZQogICAgICAgIH0gPSB0aGF0OwogICAgICBzY2FsZS56b29tU3ViT24gPSB0cnVlOwogICAgICBmdW5jdGlvbiB6b29tKCkgewogICAgICAgIGlmIChzY2FsZS56b29tU3ViT24pIHsKICAgICAgICAgIGxldCByYW5nZSA9IHNjYWxlLnJhbmdlIDw9IDAgPyAwIDogLS1zY2FsZS5yYW5nZTsKICAgICAgICAgIHRoYXQuem9vbUltZyhyYW5nZSk7CiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgem9vbSgpOwogICAgICAgICAgfSwgNjApOwogICAgICAgIH0KICAgICAgfQogICAgICB6b29tKCk7CiAgICB9LAogICAgLy8g5oyJ6ZKu5p2+5byA5oiW56e75byA5Y+W5raI57yp5bCPCiAgICBlbmRab29tU3ViKGUpIHsKICAgICAgbGV0IHsKICAgICAgICBzY2FsZQogICAgICB9ID0gdGhpczsKICAgICAgc2NhbGUuem9vbVN1Yk9uID0gZmFsc2U7CiAgICB9LAogICAgem9vbUNoYW5nZShlKSB7CiAgICAgIHRoaXMuem9vbUltZyhlLnRhcmdldC52YWx1ZSk7CiAgICB9LAogICAgLy8g57yp5pS+5Y6f5Zu+CiAgICB6b29tSW1nKG5ld1JhbmdlKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpcywKICAgICAgICB7CiAgICAgICAgICBzb3VyY2VJbWdNYXNraW5nLAogICAgICAgICAgc291cmNlSW1nTW91c2VEb3duLAogICAgICAgICAgc2NhbGUKICAgICAgICB9ID0gdGhpcywKICAgICAgICB7CiAgICAgICAgICBtYXhXaWR0aCwKICAgICAgICAgIG1heEhlaWdodCwKICAgICAgICAgIG1pbldpZHRoLAogICAgICAgICAgbWluSGVpZ2h0LAogICAgICAgICAgd2lkdGgsCiAgICAgICAgICBoZWlnaHQsCiAgICAgICAgICB4LAogICAgICAgICAgeSwKICAgICAgICAgIHJhbmdlCiAgICAgICAgfSA9IHNjYWxlLAogICAgICAgIHNpbSA9IHNvdXJjZUltZ01hc2tpbmcsCiAgICAgICAgLy8g6JKZ54mI5a696auYCiAgICAgICAgc1dpZHRoID0gc2ltLndpZHRoLAogICAgICAgIHNIZWlnaHQgPSBzaW0uaGVpZ2h0LAogICAgICAgIC8vIOaWsOWuvemrmAogICAgICAgIG5XaWR0aCA9IG1pbldpZHRoICsgKG1heFdpZHRoIC0gbWluV2lkdGgpICogbmV3UmFuZ2UgLyAxMDAsCiAgICAgICAgbkhlaWdodCA9IG1pbkhlaWdodCArIChtYXhIZWlnaHQgLSBtaW5IZWlnaHQpICogbmV3UmFuZ2UgLyAxMDAsCiAgICAgICAgLy8g5paw5Z2Q5qCH77yI5qC55o2u6JKZ54mI5Lit5b+D54K557yp5pS+77yJCiAgICAgICAgblggPSBzV2lkdGggLyAyIC0gbldpZHRoIC8gd2lkdGggKiAoc1dpZHRoIC8gMiAtIHgpLAogICAgICAgIG5ZID0gc0hlaWdodCAvIDIgLSBuSGVpZ2h0IC8gaGVpZ2h0ICogKHNIZWlnaHQgLyAyIC0geSk7CgogICAgICAvLyDliKTmlq3mlrDlnZDmoIfmmK/lkKbotoXov4fokpnniYjpmZDliLYKICAgICAgaWYgKG5YID4gMCkgewogICAgICAgIG5YID0gMDsKICAgICAgfQogICAgICBpZiAoblkgPiAwKSB7CiAgICAgICAgblkgPSAwOwogICAgICB9CiAgICAgIGlmIChuWCA8IHNXaWR0aCAtIG5XaWR0aCkgewogICAgICAgIG5YID0gc1dpZHRoIC0gbldpZHRoOwogICAgICB9CiAgICAgIGlmIChuWSA8IHNIZWlnaHQgLSBuSGVpZ2h0KSB7CiAgICAgICAgblkgPSBzSGVpZ2h0IC0gbkhlaWdodDsKICAgICAgfQoKICAgICAgLy8g6LWL5YC85aSE55CGCiAgICAgIHNjYWxlLnggPSBuWDsKICAgICAgc2NhbGUueSA9IG5ZOwogICAgICBzY2FsZS53aWR0aCA9IG5XaWR0aDsKICAgICAgc2NhbGUuaGVpZ2h0ID0gbkhlaWdodDsKICAgICAgc2NhbGUucmFuZ2UgPSBuZXdSYW5nZTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHNjYWxlLnJhbmdlID09IG5ld1JhbmdlKSB7CiAgICAgICAgICB0aGF0LmNyZWF0ZUltZygpOwogICAgICAgIH0KICAgICAgfSwgMzAwKTsKICAgIH0sCiAgICAvLyDnlJ/miJDpnIDmsYLlm77niYcKICAgIGNyZWF0ZUltZyhlKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpcywKICAgICAgICB7CiAgICAgICAgICBpbWdGb3JtYXQsCiAgICAgICAgICBpbWdCZ2MsCiAgICAgICAgICBtaW1lLAogICAgICAgICAgc291cmNlSW1nLAogICAgICAgICAgc2NhbGU6IHsKICAgICAgICAgICAgeCwKICAgICAgICAgICAgeSwKICAgICAgICAgICAgd2lkdGgsCiAgICAgICAgICAgIGhlaWdodAogICAgICAgICAgfSwKICAgICAgICAgIHNvdXJjZUltZ01hc2tpbmc6IHsKICAgICAgICAgICAgc2NhbGUKICAgICAgICAgIH0KICAgICAgICB9ID0gdGhhdCwKICAgICAgICBjYW52YXMgPSB0aGF0LiRyZWZzLmNhbnZhcywKICAgICAgICBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgaWYgKGUpIHsKICAgICAgICAvLyDlj5bmtojpvKDmoIfmjInkuIvnp7vliqjnirbmgIEKICAgICAgICB0aGF0LnNvdXJjZUltZ01vdXNlRG93bi5vbiA9IGZhbHNlOwogICAgICB9CiAgICAgIGNhbnZhcy53aWR0aCA9IHRoYXQud2lkdGg7CiAgICAgIGNhbnZhcy5oZWlnaHQgPSB0aGF0LmhlaWdodDsKICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGF0LndpZHRoLCB0aGF0LmhlaWdodCk7CiAgICAgIGlmIChpbWdGb3JtYXQgPT0gJ3BuZycpIHsKICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwwLDAsMCknOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOWmguaenGpwZyDkuLrpgI/mmI7ljLrln5/orr7nva7og4zmma/vvIzpu5jorqTnmb3oibIKICAgICAgICBjdHguZmlsbFN0eWxlID0gaW1nQmdjOwogICAgICB9CiAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCB0aGF0LndpZHRoLCB0aGF0LmhlaWdodCk7CiAgICAgIGN0eC5kcmF3SW1hZ2Uoc291cmNlSW1nLCB4IC8gc2NhbGUsIHkgLyBzY2FsZSwgd2lkdGggLyBzY2FsZSwgaGVpZ2h0IC8gc2NhbGUpOwogICAgICB0aGF0LmNyZWF0ZUltZ1VybCA9IGNhbnZhcy50b0RhdGFVUkwobWltZSk7CiAgICB9LAogICAgcHJlcGFyZVVwbG9hZCgpIHsKICAgICAgbGV0IHsKICAgICAgICB1cmwsCiAgICAgICAgY3JlYXRlSW1nVXJsLAogICAgICAgIGZpZWxkLAogICAgICAgIGtpCiAgICAgIH0gPSB0aGlzOwogICAgICB0aGlzLiRlbWl0KCdjcm9wLXN1Y2Nlc3MnLCBjcmVhdGVJbWdVcmwsIGZpZWxkLCBraSk7CiAgICAgIGlmICh0eXBlb2YgdXJsID09ICdzdHJpbmcnICYmIHVybCkgewogICAgICAgIHRoaXMudXBsb2FkKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5vZmYoKTsKICAgICAgfQogICAgfSwKICAgIC8vIOS4iuS8oOWbvueJhwogICAgdXBsb2FkKCkgewogICAgICBsZXQgdGhhdCA9IHRoaXMsCiAgICAgICAgewogICAgICAgICAgbGFuZywKICAgICAgICAgIGltZ0Zvcm1hdCwKICAgICAgICAgIG1pbWUsCiAgICAgICAgICB1cmwsCiAgICAgICAgICBwYXJhbXMsCiAgICAgICAgICBoZWFkZXJzLAogICAgICAgICAgZmllbGQsCiAgICAgICAgICBraSwKICAgICAgICAgIGNyZWF0ZUltZ1VybCwKICAgICAgICAgIHdpdGhDcmVkZW50aWFscywKICAgICAgICAgIG1ldGhvZAogICAgICAgIH0gPSB0aGlzLAogICAgICAgIGZtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBmbURhdGEuYXBwZW5kKGZpZWxkLCAoMCwgX2RhdGEyYmxvYi5kZWZhdWx0KShjcmVhdGVJbWdVcmwsIG1pbWUpLCBmaWVsZCArICcuJyArIGltZ0Zvcm1hdCk7CgogICAgICAvLyDmt7vliqDlhbbku5blj4LmlbAKICAgICAgaWYgKHR5cGVvZiBwYXJhbXMgPT0gJ29iamVjdCcgJiYgcGFyYW1zKSB7CiAgICAgICAgT2JqZWN0LmtleXMocGFyYW1zKS5mb3JFYWNoKGsgPT4gewogICAgICAgICAgZm1EYXRhLmFwcGVuZChrLCBwYXJhbXNba10pOwogICAgICAgIH0pOwogICAgICB9CgogICAgICAvLyDnm5HlkKzov5vluqblm57osIMKICAgICAgY29uc3QgdXBsb2FkUHJvZ3Jlc3MgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICBpZiAoZXZlbnQubGVuZ3RoQ29tcHV0YWJsZSkgewogICAgICAgICAgdGhhdC5wcm9ncmVzcyA9IDEwMCAqIE1hdGgucm91bmQoZXZlbnQubG9hZGVkKSAvIGV2ZW50LnRvdGFsOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIC8vIOS4iuS8oOaWh+S7tgogICAgICB0aGF0LnJlc2V0KCk7CiAgICAgIHRoYXQubG9hZGluZyA9IDE7CiAgICAgIHRoYXQuc2V0U3RlcCgzKTsKICAgICAgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGxldCBjbGllbnQgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICBjbGllbnQub3BlbihtZXRob2QsIHVybCwgdHJ1ZSk7CiAgICAgICAgY2xpZW50LndpdGhDcmVkZW50aWFscyA9IHdpdGhDcmVkZW50aWFsczsKICAgICAgICBjbGllbnQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSAhPT0gNCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCB8fCB0aGlzLnN0YXR1cyA9PT0gMjAxKSB7CiAgICAgICAgICAgIHJlc29sdmUoSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlVGV4dCkpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVqZWN0KHRoaXMuc3RhdHVzKTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIGNsaWVudC51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcigicHJvZ3Jlc3MiLCB1cGxvYWRQcm9ncmVzcywgZmFsc2UpOyAvL+ebkeWQrOi/m+W6pgogICAgICAgIC8vIOiuvue9rmhlYWRlcgogICAgICAgIGlmICh0eXBlb2YgaGVhZGVycyA9PSAnb2JqZWN0JyAmJiBoZWFkZXJzKSB7CiAgICAgICAgICBPYmplY3Qua2V5cyhoZWFkZXJzKS5mb3JFYWNoKGsgPT4gewogICAgICAgICAgICBjbGllbnQuc2V0UmVxdWVzdEhlYWRlcihrLCBoZWFkZXJzW2tdKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBjbGllbnQuc2VuZChmbURhdGEpOwogICAgICB9KS50aGVuKAogICAgICAvLyDkuIrkvKDmiJDlip8KICAgICAgZnVuY3Rpb24gKHJlc0RhdGEpIHsKICAgICAgICBpZiAodGhhdC52YWx1ZSkgewogICAgICAgICAgdGhhdC5sb2FkaW5nID0gMjsKICAgICAgICAgIHRoYXQuJGVtaXQoJ2Nyb3AtdXBsb2FkLXN1Y2Nlc3MnLCByZXNEYXRhLCBmaWVsZCwga2kpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgLy8g5LiK5Lyg5aSx6LSlCiAgICAgIGZ1bmN0aW9uIChzdHMpIHsKICAgICAgICBpZiAodGhhdC52YWx1ZSkgewogICAgICAgICAgdGhhdC5sb2FkaW5nID0gMzsKICAgICAgICAgIHRoYXQuaGFzRXJyb3IgPSB0cnVlOwogICAgICAgICAgdGhhdC5lcnJvck1zZyA9IGxhbmcuZmFpbDsKICAgICAgICAgIHRoYXQuJGVtaXQoJ2Nyb3AtdXBsb2FkLWZhaWwnLCBzdHMsIGZpZWxkLCBraSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICAvLyDnu5HlrprmjInplK5lc2PpmpDol4/mraTmj5Lku7bkuovku7YKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZSA9PiB7CiAgICAgIGlmICh0aGlzLnZhbHVlICYmIChlLmtleSA9PSAnRXNjYXBlJyB8fCBlLmtleUNvZGUgPT0gMjcpKSB7CiAgICAgICAgdGhpcy5vZmYoKTsKICAgICAgfQogICAgfSk7CiAgfQp9OwpleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDs="},{"version":3,"mappings":"AAwGA;;AAAA;AAAA;EAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA,eAEA;EACAA;IACA;IACAC;MACAC;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACAH;MACA;IACA;IACA;IACAI;MACAJ;MACA;IACA;IACA;IACAK;MACAL;MACA;IACA;IACA;IACAM;MACAN;MACAO;IACA;IACA;IACAC;MACAR;MACAO;IACA;IACA;IACAE;MACAT;MACAO;IACA;IACA;IACAG;MACAV;MACAO;IACA;IACA;IACAI;MACAX;MACAO;IACA;IACA;IACAK;MACAZ;MACA;IACA;IACA;IACAa;MACAb;MACA;IACA;IACA;IACAc;MACAd;MACA;IACA;IACA;IACAe;MACAf;MACA;IACA;IACA;IACAgB;MACAhB;MACA;IACA;IACA;IACAiB;MACAjB;MACA;IACA;IACAkB;MACAlB;MACA;IACA;EACA;EACAmB;IACA;MACA;QACAJ;QACAF;QACAC;QACAR;QACAE;MACA;MACAY;MACAC,kBACA,OACA,MACA;MACAC;MACAC;MACAC;IACA;IACAC;IAEA;MACAC;IACA;IACA;MACAN;IACA;IACA;MACA;MACAI;MAEA;MACAD;MAEA;MACAH;MACA;MACAO;MAEA;MACAC;MAAA;;MAEA;MACAC;MAAA;MACAC;MAEA;MACAC;MACAC;MAEA;MACAC;MAEA;MACAC;MACAC;MACAC;MAEA;MACAC;QACAC;QACAC;QAAA;QACAC;QACAC;QAAA;QACAC;MACA;MAEA;MACAC;QACArC;QACAE;MACA;MAEA;MACAoC;QAAA;QACAtC;QACAE;MACA;;MAEA;MACAqC;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;;QAEAP;QACAC;QACApC;QACAE;QACAyC;QACAC;QACAC;QAAA;QACAC;QACAC;QAAA;QACAC;MACA;IACA;EACA;EACAC;IACA;IACAC;MACA;QACA1B;MACA;MACA;QACAxB;MACA;IACA;IACA;IACAmD;MACA;UACAZ;UACAa;QACA;QACAC;QACAC;MACA;QACAD;QACAC;QACAtD;QACAE;MACA;IACA;;IACA;IACAkD;MACA;UACApD;UACAE;UACAyB;UACAW;QACA;QACAiB;QACAC;QAAA;QACArB;QACAC;QACAqB;QACAC;QACAnB;MACA;QACAA;QACAkB;QACAtB;MACA;MACA;QACAI;QACAmB;QACAtB;MACA;MACA;QACAG;QAAA;QACAJ;QACAC;QACApC;QACAE;MACA;IACA;IACA;IACAyD;MACA;UACAP;UACAd;QACA;QACAiB;QACAK;QACAH;QACAC;MACA;QACA1D;QACAE;MACA;IACA;IACA2D;MACA;UACA7D;UACAE;UACAyB;UACAU;QACA;QACAyB;QACAL;QACAC;QACAK;MACA;QACAN;MACA;MACA;QACAC;MACA;MACA;QACA1D;QACAE;MACA;IACA;EACA;EACA8D;IACApE;MACA;QACA;MACA;IACA;EACA;EACAqE;IACA;IACAC;MACA;IACA;IACA;IACAC;MACAC;QACA;QACA;UACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACAD;QACA;MACA;IACA;IAEA;AACA;IACAE;MACAC;MACA;IACA;IACAC;MACA;QACA;UACAD;UACA;YACA;UACA;QACA;MACA;IACA;IACAE;MACAF;MACA;QACA;QACA;QACA;UACA;QACA;MACA;IACA;IACA;;IAEA;IACAG;MACA;QACA;UACAzD;UACAX;QACA;MACA;MACA;QACAa;QACAA;QACA;MACA;;MAEA;MACA;QACAA;QACAA;QACA;MACA;MACA;IACA;IACA;IACAwD;MACA;MACAxD;MACAA;MACAA;MACAA;IACA;IACA;IACAyD;MACA;MACA;QACAC;MACAA;QACA1D;QACAA;MACA;MACA0D;IACA;IACA;IACAC;MACA;QACA;UACA9E;UACAE;UACAyB;UACAY;UACAV;UACAuB;UACAnC;QACA;QACA2C;QACAmB;MACAA;MACAA;QACA;UACAC;UACAC;UACAxB;UACAC;UACAvB;UACAC;QACA;QACA;UACAjB;UACAA;UACA;QACA;QACA;UACAuC;UACAtB;QACA;QACA;UACAqB;UACAtB;QACA;QACAI;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;QACApB;QACAA;QACAA;MACA;IACA;IACA;IACA+D;MACAX;MACA;MACA;QACA;MACA;MACA;QACA;UACAxC;UACAQ;QACA;QACA4C;MACAA;MACAA;MACAA;MACAA;MACAA;IACA;IACA;IACAC;MACAb;MACA;MACA;QACA;MACA;MACA;QACA;UACAxC;YACAC;YACAC;YACAC;YACAC;YACAC;UACA;UACAG;UACAa;QACA;QACAQ;QACAyB;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACA;QACAD;MACA;MACA;QACAC;MACA;MACA;QACAD;MACA;MACA;QACAC;MACA;MACAnD;MACAA;IACA;IACA;IACAoD;MACA;UACA/D;UACAW;YACAQ;YACAC;UACA;QACA;QACAhD;QACAE;QACA0F;QACAC;MACAD;MACAA;MACAC;MAEAA;MACAA;MAEAA;MACAA;MAEAA;MACA;MAEA;MACA;IACA;IAEA;IACAC;MACA;QACA;UACAvD;QACA;MACAA;MAEA;QACA;UACA;UACApB;UACAiD;YACA2B;UACA;QACA;MACA;MACAA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;QACA;UACA1D;QACA;MACAA;MAEA;QACA;UACA;UACApB;UACAiD;YACA2B;UACA;QACA;MACA;MACAA;IACA;IACA;IACAG;MACA;QACA3D;MACA;MACAA;IACA;IACA4D;MACA;IACA;IACA;IACAC;MACA;QACA;UACAhD;UACArB;UACAQ;QACA;QACA;UACAI;UACAC;UACAC;UACAC;UACA9C;UACAE;UACAiC;UACAC;UACAM;QACA;QACAkB;QACA;QACAyC;QACAC;QACA;QACAC;QACAvB;QACA;QACAK;QACAC;;MAEA;MACA;QACAD;MACA;MACA;QACAC;MACA;MACA;QACAD;MACA;MACA;QACAC;MACA;;MAEA;MACA/C;MACAA;MACAA;MACAA;MACAA;MACA6B;QACA;UACAjD;QACA;MACA;IACA;IACA;IACAqF;MACA;QACA;UACA/F;UACAC;UACAQ;UACAU;UACAW;YACAJ;YACAC;YACApC;YACAE;UACA;UACAkD;YACAb;UACA;QACA;QACAqD;QACAC;MACA;QACA;QACA1E;MACA;MACAyE;MACAA;MACAC;MAEA;QACAA;MACA;QACA;QACAA;MACA;MACAA;MAEAA;MACA1E;IACA;IACAsF;MACA;QACA5G;QACAiC;QACArC;QACAE;MACA;MACA;MACA;QACA;MACA;QACA;MACA;IACA;IACA;IACA+G;MACA;QACA;UACAzF;UACAR;UACAS;UACArB;UACAC;UACAC;UACAN;UACAE;UACAmC;UACAnB;UACAC;QACA;QACA+F;MACAA;;MAEA;MACA;QACAvF;UACAuF;QACA;MACA;;MAEA;MACA;QACA;UACAxF;QACA;MACA;;MAEA;MACAA;MACAA;MACAA;MACA;QACA;QACAyF;QACAA;QACAA;UACA;YACA;UACA;UACA;YACAC;UACA;YACAC;UACA;QACA;QACAF;QACA;QACA;UACAxF;YACAwF;UACA;QACA;QACAA;MACA;MACA;MACA;QACA;UACAzF;UACAA;QACA;MACA;MACA;MACA;QACA;UACAA;UACAA;UACAA;UACAA;QACA;MACA,EACA;IACA;EACA;EACA4F;IACA;IACAC;MACA;QACA;MACA;IACA;EACA;AACA;AAAA","names":["props","field","type","ki","value","url","params","headers","width","default","height","noRotate","noCircle","noSquare","maxSize","langType","langExt","imgFormat","imgBgc","withCredentials","method","data","isSupported","allowImgFormat","tempImgFormat","lang","mime","that","Object","isSupportTouch","step","loading","progress","hasError","errorMsg","ratio","sourceImg","sourceImgUrl","createImgUrl","sourceImgMouseDown","on","mX","mY","x","y","previewContainer","sourceImgContainer","scale","zoomAddOn","zoomSubOn","range","maxWidth","maxHeight","minWidth","minHeight","naturalWidth","naturalHeight","computed","progressStyle","sourceImgStyle","sourceImgMasking","top","left","sic","sicRatio","w","h","sourceImgShadeStyle","sim","previewStyle","pc","pcRatio","watch","methods","ripple","off","setTimeout","setStep","preventDefault","e","handleClick","handleChange","checkFile","reset","setSourceImg","fr","startCrop","img","nHeight","nRatio","imgStartMove","simd","imgMove","nX","nY","dX","dY","rX","rY","rotateImg","canvas","ctx","startZoomAdd","zoom","endZoomAdd","startZoomSub","endZoomSub","zoomChange","zoomImg","sWidth","sHeight","nWidth","createImg","prepareUpload","upload","fmData","client","resolve","reject","created","document"],"sourceRoot":"node_modules/vue-image-crop-upload","sources":["upload-2.vue"],"sourcesContent":["<template>\r\n<div class=\"vue-image-crop-upload\" v-show=\"value\">\r\n\t<div class=\"vicp-wrap\">\r\n\t\t<div class=\"vicp-close\" @click=\"off\">\r\n\t\t\t<i class=\"vicp-icon4\"></i>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"vicp-step1\" v-show=\"step == 1\">\r\n\t\t\t<div class=\"vicp-drop-area\" @dragleave=\"preventDefault\" @dragover=\"preventDefault\" @dragenter=\"preventDefault\" @click=\"handleClick\" @drop=\"handleChange\">\r\n\t\t\t\t<i class=\"vicp-icon1\" v-show=\"loading != 1\">\r\n\t\t\t\t<i class=\"vicp-icon1-arrow\"></i>\r\n\t\t\t\t<i class=\"vicp-icon1-body\"></i>\r\n\t\t\t\t<i class=\"vicp-icon1-bottom\"></i>\r\n\t\t\t\t</i>\r\n\t\t\t\t<span class=\"vicp-hint\" v-show=\"loading !== 1\">{{ lang.hint }}</span>\r\n\t\t\t\t<span class=\"vicp-no-supported-hint\" v-show=\"!isSupported\">{{ lang.noSupported }}</span>\r\n\t\t\t\t<input type=\"file\" v-show=\"false\" v-if=\"step == 1\" @change=\"handleChange\" ref=\"fileinput\">\r\n\t\t\t</div>\r\n\t\t\t<div class=\"vicp-error\" v-show=\"hasError\">\r\n\t\t\t\t<i class=\"vicp-icon2\"></i> {{ errorMsg }}\r\n\t\t\t</div>\r\n\t\t\t<div class=\"vicp-operate\">\r\n\t\t\t\t<a @click=\"off\" @mousedown=\"ripple\">{{ lang.btn.off }}</a>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"vicp-step2\" v-if=\"step == 2\">\r\n\t\t\t<div class=\"vicp-crop\">\r\n\t\t\t\t<div class=\"vicp-crop-left\" v-show=\"true\">\r\n\t\t\t\t\t<div class=\"vicp-img-container\">\r\n\t\t\t\t\t\t<img :src=\"sourceImgUrl\" :style=\"sourceImgStyle\" class=\"vicp-img\" draggable=\"false\"\r\n\t\t\t\t\t\t\t@drag=\"preventDefault\"\r\n\t\t\t\t\t\t\t@dragstart=\"preventDefault\"\r\n\t\t\t\t\t\t\t@dragend=\"preventDefault\"\r\n\t\t\t\t\t\t\t@dragleave=\"preventDefault\"\r\n\t\t\t\t\t\t\t@dragover=\"preventDefault\"\r\n\t\t\t\t\t\t\t@dragenter=\"preventDefault\"\r\n\t\t\t\t\t\t\t@drop=\"preventDefault\"\r\n\t\t\t\t\t\t\t@touchstart=\"imgStartMove\"\r\n\t\t\t\t\t\t\t@touchmove=\"imgMove\"\r\n\t\t\t\t\t\t\t@touchend=\"createImg\"\r\n\t\t\t\t\t\t\t@touchcancel=\"createImg\"\r\n\t\t\t\t\t\t\t@mousedown=\"imgStartMove\"\r\n\t\t\t\t\t\t\t@mousemove=\"imgMove\"\r\n\t\t\t\t\t\t\t@mouseup=\"createImg\"\r\n\t\t\t\t\t\t\t@mouseout=\"createImg\"\r\n\t\t\t\t\t\t\tref=\"img\">\r\n\t\t\t\t\t\t<div class=\"vicp-img-shade vicp-img-shade-1\" :style=\"sourceImgShadeStyle\"></div>\r\n\t\t\t\t\t\t<div class=\"vicp-img-shade vicp-img-shade-2\" :style=\"sourceImgShadeStyle\"></div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"vicp-range\">\r\n\t\t\t\t\t\t<input type=\"range\" :value=\"scale.range\" step=\"1\" min=\"0\" max=\"100\" @mousemove=\"zoomChange\">\r\n\t\t\t\t\t\t<i @mousedown=\"startZoomSub\" @mouseout=\"endZoomSub\" @mouseup=\"endZoomSub\" class=\"vicp-icon5\"></i>\r\n\t\t\t\t\t\t<i @mousedown=\"startZoomAdd\" @mouseout=\"endZoomAdd\" @mouseup=\"endZoomAdd\" class=\"vicp-icon6\"></i>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"vicp-rotate\" v-if=\"!noRotate\">\r\n                        <i @click=\"rotateImg\">↻</i>\r\n                    </div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"vicp-crop-right\" v-show=\"true\">\r\n\t\t\t\t\t<div class=\"vicp-preview\">\r\n\t\t\t\t\t\t<div class=\"vicp-preview-item\" v-if=\"!noSquare\">\r\n\t\t\t\t\t\t\t<img :src=\"createImgUrl\" :style=\"previewStyle\">\r\n\t\t\t\t\t\t\t<span>{{ lang.preview }}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"vicp-preview-item vicp-preview-item-circle\" v-if=\"!noCircle\">\r\n\t\t\t\t\t\t\t<img :src=\"createImgUrl\" :style=\"previewStyle\">\r\n\t\t\t\t\t\t\t<span>{{ lang.preview }}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"vicp-operate\">\r\n\t\t\t\t<a @click=\"setStep(1)\" @mousedown=\"ripple\">{{ lang.btn.back }}</a>\r\n\t\t\t\t<a class=\"vicp-operate-btn\" @click=\"prepareUpload\" @mousedown=\"ripple\">{{ lang.btn.save }}</a>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"vicp-step3\" v-if=\"step == 3\">\r\n\t\t\t<div class=\"vicp-upload\">\r\n\t\t\t\t<span class=\"vicp-loading\" v-show=\"loading === 1\">{{ lang.loading }}</span>\r\n\t\t\t\t<div class=\"vicp-progress-wrap\">\r\n\t\t\t\t\t<span class=\"vicp-progress\" v-show=\"loading === 1\" :style=\"progressStyle\"></span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"vicp-error\" v-show=\"hasError\">\r\n\t\t\t\t\t<i class=\"vicp-icon2\"></i> {{ errorMsg }}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"vicp-success\" v-show=\"loading === 2\">\r\n\t\t\t\t\t<i class=\"vicp-icon3\"></i> {{ lang.success }}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"vicp-operate\">\r\n\t\t\t\t<a @click=\"setStep(2)\" @mousedown=\"ripple\">{{ lang.btn.back }}</a>\r\n\t\t\t\t<a @click=\"off\" @mousedown=\"ripple\">{{ lang.btn.close }}</a>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<canvas v-show=\"false\" :width=\"width\" :height=\"height\" ref=\"canvas\"></canvas>\r\n\t</div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\n'use strict';\r\nimport language from './utils/language.js';\r\nimport mimes from './utils/mimes.js';\r\nimport data2blob from './utils/data2blob.js';\r\nimport effectRipple from './utils/effectRipple.js';\r\n\r\nexport default {\r\n\tprops: {\r\n\t\t// 域，上传文件name，触发事件会带上（如果一个页面多个图片上传控件，可以做区分\r\n\t\tfield: {\r\n\t\t\ttype: String,\r\n\t\t\t'default': 'avatar'\r\n\t\t},\r\n\t\t// 原名key，类似于id，触发事件会带上（如果一个页面多个图片上传控件，可以做区分\r\n\t\tki: {\r\n\t\t\t'default': 0\r\n\t\t},\r\n\t\t// 显示该控件与否\r\n\t\tvalue: {\r\n\t\t\t'default': true\r\n\t\t},\r\n\t\t// 上传地址\r\n\t\turl: {\r\n\t\t\ttype: String,\r\n\t\t\t'default': ''\r\n\t\t},\r\n\t\t// 其他要上传文件附带的数据，对象格式\r\n\t\tparams: {\r\n\t\t\ttype: Object,\r\n\t\t\t'default': null\r\n\t\t},\r\n\t\t//Add custom headers\r\n\t\theaders: {\r\n\t\t\ttype: Object,\r\n\t\t\t'default': null\r\n\t\t},\r\n\t\t// 剪裁图片的宽\r\n\t\twidth: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 200\r\n\t\t},\r\n\t\t// 剪裁图片的高\r\n\t\theight: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 200\r\n\t\t},\r\n\t\t// 不显示旋转功能\r\n\t\tnoRotate: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\t// 不预览圆形图片\r\n\t\tnoCircle: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\t// 不预览方形图片\r\n\t\tnoSquare: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\t// 单文件大小限制\r\n\t\tmaxSize: {\r\n\t\t\ttype: Number,\r\n\t\t\t'default': 10240\r\n\t\t},\r\n\t\t// 语言类型\r\n\t\tlangType: {\r\n\t\t\ttype: String,\r\n\t\t\t'default': 'zh'\r\n\t\t},\r\n\t\t// 语言包\r\n\t\tlangExt: {\r\n\t\t\ttype: Object,\r\n\t\t\t'default': null\r\n\t\t},\r\n\t\t// 图片上传格式\r\n\t\timgFormat: {\r\n\t\t\ttype: String,\r\n\t\t\t'default': 'png'\r\n\t\t},\r\n\t\t// 图片背景 jpg情况下生效\r\n\t\timgBgc: {\r\n\t\t\ttype: String,\r\n\t\t\t'default': '#fff'\r\n\t\t},\r\n\t\t// 是否支持跨域\r\n\t\twithCredentials: {\r\n\t\t\ttype: Boolean,\r\n\t\t\t'default': false\r\n\t\t},\r\n\t\tmethod: {\r\n\t\t\ttype: String,\r\n\t\t\t'default': 'POST'\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\tlet that = this,\r\n\t\t\t{\r\n\t\t\t\timgFormat,\r\n\t\t\t\tlangType,\r\n\t\t\t\tlangExt,\r\n\t\t\t\twidth,\r\n\t\t\t\theight\r\n\t\t\t} = that,\r\n\t\t\tisSupported = true,\r\n\t\t\tallowImgFormat = [\r\n\t\t\t\t'jpg',\r\n\t\t\t\t'png'\r\n\t\t\t],\r\n\t\t\ttempImgFormat = allowImgFormat.indexOf(imgFormat) === -1 ? 'jpg' : imgFormat,\r\n\t\t\tlang = language[langType] ? language[langType] : language['en'],\r\n\t\t\tmime = mimes[tempImgFormat];\r\n\t\t// 规范图片格式\r\n\t\tthat.imgFormat = tempImgFormat;\r\n\r\n\t\tif (langExt) {\r\n\t\t\tObject.assign(lang, langExt);\r\n\t\t}\r\n\t\tif (typeof FormData != 'function') {\r\n\t\t\tisSupported = false;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\t// 图片的mime\r\n\t\t\tmime,\r\n\r\n\t\t\t// 语言包\r\n\t\t\tlang,\r\n\r\n\t\t\t// 浏览器是否支持该控件\r\n\t\t\tisSupported,\r\n\t\t\t// 浏览器是否支持触屏事件\r\n\t\t\tisSupportTouch: document.hasOwnProperty(\"ontouchstart\"),\r\n\r\n\t\t\t// 步骤\r\n\t\t\tstep: 1, //1选择文件 2剪裁 3上传\r\n\r\n\t\t\t// 上传状态及进度\r\n\t\t\tloading: 0, //0未开始 1正在 2成功 3错误\r\n\t\t\tprogress: 0,\r\n\r\n\t\t\t// 是否有错误及错误信息\r\n\t\t\thasError: false,\r\n\t\t\terrorMsg: '',\r\n\r\n\t\t\t// 需求图宽高比\r\n\t\t\tratio: width / height,\r\n\r\n\t\t\t// 原图地址、生成图片地址\r\n\t\t\tsourceImg: null,\r\n\t\t\tsourceImgUrl: '',\r\n\t\t\tcreateImgUrl: '',\r\n\r\n\t\t\t// 原图片拖动事件初始值\r\n\t\t\tsourceImgMouseDown: {\r\n\t\t\t\ton: false,\r\n\t\t\t\tmX: 0, //鼠标按下的坐标\r\n\t\t\t\tmY: 0,\r\n\t\t\t\tx: 0, //scale原图坐标\r\n\t\t\t\ty: 0\r\n\t\t\t},\r\n\r\n\t\t\t// 生成图片预览的容器大小\r\n\t\t\tpreviewContainer: {\r\n\t\t\t\twidth: 100,\r\n\t\t\t\theight: 100\r\n\t\t\t},\r\n\r\n\t\t\t// 原图容器宽高\r\n\t\t\tsourceImgContainer: { // sic\r\n\t\t\t\twidth: 240,\r\n\t\t\t\theight: 184 // 如果生成图比例与此一致会出现bug，先改成特殊的格式吧，哈哈哈\r\n\t\t\t},\r\n\r\n\t\t\t// 原图展示属性\r\n\t\t\tscale: {\r\n\t\t\t\tzoomAddOn: false, //按钮缩放事件开启\r\n\t\t\t\tzoomSubOn: false, //按钮缩放事件开启\r\n\t\t\t\trange: 1, //最大100\r\n\r\n\t\t\t\tx: 0,\r\n\t\t\t\ty: 0,\r\n\t\t\t\twidth: 0,\r\n\t\t\t\theight: 0,\r\n\t\t\t\tmaxWidth: 0,\r\n\t\t\t\tmaxHeight: 0,\r\n\t\t\t\tminWidth: 0, //最宽\r\n\t\t\t\tminHeight: 0,\r\n\t\t\t\tnaturalWidth: 0, //原宽\r\n\t\t\t\tnaturalHeight: 0\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t// 进度条样式\r\n\t\tprogressStyle() {\r\n\t\t\tlet {\r\n\t\t\t\tprogress\r\n\t\t\t} = this;\r\n\t\t\treturn {\r\n\t\t\t\twidth: progress + '%'\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 原图样式\r\n\t\tsourceImgStyle() {\r\n\t\t\tlet {\r\n\t\t\t\t\tscale,\r\n\t\t\t\t\tsourceImgMasking\r\n\t\t\t\t} = this,\r\n\t\t\t\ttop = scale.y + sourceImgMasking.y + 'px',\r\n\t\t\t\tleft = scale.x + sourceImgMasking.x + 'px';\r\n\t\t\treturn {\r\n\t\t\t\ttop,\r\n\t\t\t\tleft,\r\n\t\t\t\twidth: scale.width + 'px',\r\n\t\t\t\theight: scale.height + 'px',// 兼容 Opera\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 原图蒙版属性\r\n\t\tsourceImgMasking() {\r\n\t\t\tlet {\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\theight,\r\n\t\t\t\t\tratio,\r\n\t\t\t\t\tsourceImgContainer\r\n\t\t\t\t} = this,\r\n\t\t\t\tsic = sourceImgContainer,\r\n\t\t\t\tsicRatio = sic.width / sic.height, // 原图容器宽高比\r\n\t\t\t\tx = 0,\r\n\t\t\t\ty = 0,\r\n\t\t\t\tw = sic.width,\r\n\t\t\t\th = sic.height,\r\n\t\t\t\tscale = 1;\r\n\t\t\tif (ratio < sicRatio) {\r\n\t\t\t\tscale = sic.height / height;\r\n\t\t\t\tw = sic.height * ratio;\r\n\t\t\t\tx = (sic.width - w) / 2;\r\n\t\t\t}\r\n\t\t\tif (ratio > sicRatio) {\r\n\t\t\t\tscale = sic.width / width;\r\n\t\t\t\th = sic.width / ratio;\r\n\t\t\t\ty = (sic.height - h) / 2;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tscale, // 蒙版相对需求宽高的缩放\r\n\t\t\t\tx,\r\n\t\t\t\ty,\r\n\t\t\t\twidth: w,\r\n\t\t\t\theight: h\r\n\t\t\t};\r\n\t\t},\r\n\t\t// 原图遮罩样式\r\n\t\tsourceImgShadeStyle() {\r\n\t\t\tlet {\r\n\t\t\t\t\tsourceImgMasking,\r\n\t\t\t\t\tsourceImgContainer\r\n\t\t\t\t} = this,\r\n\t\t\t\tsic = sourceImgContainer,\r\n\t\t\t\tsim = sourceImgMasking,\r\n\t\t\t\tw = sim.width == sic.width ? sim.width : (sic.width - sim.width) / 2,\r\n\t\t\t\th = sim.height == sic.height ? sim.height : (sic.height - sim.height) / 2;\r\n\t\t\treturn {\r\n\t\t\t\twidth: w + 'px',\r\n\t\t\t\theight: h + 'px'\r\n\t\t\t};\r\n\t\t},\r\n\t\tpreviewStyle() {\r\n\t\t\tlet {\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\theight,\r\n\t\t\t\t\tratio,\r\n\t\t\t\t\tpreviewContainer\r\n\t\t\t\t} = this,\r\n\t\t\t\tpc = previewContainer,\r\n\t\t\t\tw = pc.width,\r\n\t\t\t\th = pc.height,\r\n\t\t\t\tpcRatio = w / h;\r\n\t\t\tif (ratio < pcRatio) {\r\n\t\t\t\tw = pc.height * ratio;\r\n\t\t\t}\r\n\t\t\tif (ratio > pcRatio) {\r\n\t\t\t\th = pc.width / ratio;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\twidth: w + 'px',\r\n\t\t\t\theight: h + 'px'\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tvalue(newValue) {\r\n\t\t\tif (newValue && this.loading != 1) {\r\n\t\t\t\tthis.reset();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t// 点击波纹效果\r\n\t\tripple(e) {\r\n\t\t\teffectRipple(e);\r\n\t\t},\r\n\t\t// 关闭控件\r\n\t\toff() {\r\n\t\t\tsetTimeout(()=> {\r\n\t\t\t\tthis.$emit('input', false);\r\n\t\t\t\tif(this.step == 3 && this.loading == 2){\r\n\t\t\t\t\tthis.setStep(1);\r\n\t\t\t\t}\r\n\t\t\t}, 200);\r\n\t\t},\r\n\t\t// 设置步骤\r\n\t\tsetStep(no) {\r\n\t\t\t// 延时是为了显示动画效果呢，哈哈哈\r\n\t\t\tsetTimeout(()=> {\r\n\t\t\t\tthis.step = no;\r\n\t\t\t}, 200);\r\n\t\t},\r\n\r\n\t\t/* 图片选择区域函数绑定\r\n\t\t ---------------------------------------------------------------*/\r\n\t\tpreventDefault(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\thandleClick(e) {\r\n\t\t\tif (this.loading !== 1) {\r\n\t\t\t\tif (e.target !== this.$refs.fileinput) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tif (document.activeElement !== this.$refs) {\r\n\t\t\t\t\t\tthis.$refs.fileinput.click();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\thandleChange(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\tif (this.loading !== 1) {\r\n\t\t\t\tlet files = e.target.files || e.dataTransfer.files;\r\n\t\t\t\tthis.reset();\r\n\t\t\t\tif (this.checkFile(files[0])) {\r\n\t\t\t\t\tthis.setSourceImg(files[0]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/* ---------------------------------------------------------------*/\r\n\r\n\t\t// 检测选择的文件是否合适\r\n\t\tcheckFile(file) {\r\n\t\t\tlet that = this,\r\n\t\t\t\t{\r\n\t\t\t\t\tlang,\r\n\t\t\t\t\tmaxSize\r\n\t\t\t\t} = that;\r\n\t\t\t// 仅限图片\r\n\t\t\tif (file.type.indexOf('image') === -1) {\r\n\t\t\t\tthat.hasError = true;\r\n\t\t\t\tthat.errorMsg = lang.error.onlyImg;\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t// 超出大小\r\n\t\t\tif (file.size / 1024 > maxSize) {\r\n\t\t\t\tthat.hasError = true;\r\n\t\t\t\tthat.errorMsg = lang.error.outOfSize + maxSize + 'kb';\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t// 重置控件\r\n\t\treset() {\r\n\t\t\tlet that = this;\r\n\t\t\tthat.loading = 0;\r\n\t\t\tthat.hasError = false;\r\n\t\t\tthat.errorMsg = '';\r\n\t\t\tthat.progress = 0;\r\n\t\t},\r\n\t\t// 设置图片源\r\n\t\tsetSourceImg(file) {\r\n\t\t\tthis.$emit('src-file-set', file.name, file.type, file.size);\r\n\t\t\tlet that = this,\r\n\t\t\t\tfr = new FileReader();\r\n\t\t\tfr.onload = function(e) {\r\n\t\t\t\tthat.sourceImgUrl = fr.result;\r\n\t\t\t\tthat.startCrop();\r\n\t\t\t}\r\n\t\t\tfr.readAsDataURL(file);\r\n\t\t},\r\n\t\t// 剪裁前准备工作\r\n\t\tstartCrop() {\r\n\t\t\tlet that = this,\r\n\t\t\t\t{\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\theight,\r\n\t\t\t\t\tratio,\r\n\t\t\t\t\tscale,\r\n\t\t\t\t\tsourceImgUrl,\r\n\t\t\t\t\tsourceImgMasking,\r\n\t\t\t\t\tlang\r\n\t\t\t\t} = that,\r\n\t\t\t\tsim = sourceImgMasking,\r\n\t\t\t\timg = new Image();\r\n\t\t\timg.src = sourceImgUrl;\r\n\t\t\timg.onload = function() {\r\n\t\t\t\tlet nWidth = img.naturalWidth,\r\n\t\t\t\t\tnHeight = img.naturalHeight,\r\n\t\t\t\t\tnRatio = nWidth / nHeight,\r\n\t\t\t\t\tw = sim.width,\r\n\t\t\t\t\th = sim.height,\r\n\t\t\t\t\tx = 0,\r\n\t\t\t\t\ty = 0;\r\n\t\t\t\t// 图片像素不达标\r\n\t\t\t\tif (nWidth < width || nHeight < height) {\r\n\t\t\t\t\tthat.hasError = true;\r\n\t\t\t\t\tthat.errorMsg = lang.error.lowestPx + width + '*' + height;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (ratio > nRatio) {\r\n\t\t\t\t\th = w / nRatio;\r\n\t\t\t\t\ty = (sim.height - h) / 2;\r\n\t\t\t\t}\r\n\t\t\t\tif (ratio < nRatio) {\r\n\t\t\t\t\tw = h * nRatio;\r\n\t\t\t\t\tx = (sim.width - w) / 2;\r\n\t\t\t\t}\r\n\t\t\t\tscale.range = 0;\r\n\t\t\t\tscale.x = x;\r\n\t\t\t\tscale.y = y;\r\n\t\t\t\tscale.width = w;\r\n\t\t\t\tscale.height = h;\r\n\t\t\t\tscale.minWidth = w;\r\n\t\t\t\tscale.minHeight = h;\r\n\t\t\t\tscale.maxWidth = nWidth * sim.scale;\r\n\t\t\t\tscale.maxHeight = nHeight * sim.scale;\r\n\t\t\t\tscale.naturalWidth = nWidth;\r\n\t\t\t\tscale.naturalHeight = nHeight;\r\n\t\t\t\tthat.sourceImg = img;\r\n\t\t\t\tthat.createImg();\r\n\t\t\t\tthat.setStep(2);\r\n\t\t\t};\r\n\t\t},\r\n\t\t// 鼠标按下图片准备移动\r\n\t\timgStartMove(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\t// 支持触摸事件，则鼠标事件无效\r\n\t\t\tif(this.isSupportTouch && !e.targetTouches){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tlet et = e.targetTouches ? e.targetTouches[0] : e,\r\n\t\t\t\t{\r\n\t\t\t\t\tsourceImgMouseDown,\r\n\t\t\t\t\tscale\r\n\t\t\t\t} = this,\r\n\t\t\t\tsimd = sourceImgMouseDown;\r\n\t\t\tsimd.mX = et.screenX;\r\n\t\t\tsimd.mY = et.screenY;\r\n\t\t\tsimd.x = scale.x;\r\n\t\t\tsimd.y = scale.y;\r\n\t\t\tsimd.on = true;\r\n\t\t},\r\n\t\t// 鼠标按下状态下移动，图片移动\r\n\t\timgMove(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\t// 支持触摸事件，则鼠标事件无效\r\n\t\t\tif(this.isSupportTouch && !e.targetTouches){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tlet et = e.targetTouches ? e.targetTouches[0] : e,\r\n\t\t\t\t{\r\n\t\t\t\t\tsourceImgMouseDown: {\r\n\t\t\t\t\t\ton,\r\n\t\t\t\t\t\tmX,\r\n\t\t\t\t\t\tmY,\r\n\t\t\t\t\t\tx,\r\n\t\t\t\t\t\ty\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscale,\r\n\t\t\t\t\tsourceImgMasking\r\n\t\t\t\t} = this,\r\n\t\t\t\tsim = sourceImgMasking,\r\n\t\t\t\tnX = et.screenX,\r\n\t\t\t\tnY = et.screenY,\r\n\t\t\t\tdX = nX - mX,\r\n\t\t\t\tdY = nY - mY,\r\n\t\t\t\trX = x + dX,\r\n\t\t\t\trY = y + dY;\r\n\t\t\tif (!on) return;\r\n\t\t\tif (rX > 0) {\r\n\t\t\t\trX = 0;\r\n\t\t\t}\r\n\t\t\tif (rY > 0) {\r\n\t\t\t\trY = 0;\r\n\t\t\t}\r\n\t\t\tif (rX < sim.width - scale.width) {\r\n\t\t\t\trX = sim.width - scale.width;\r\n\t\t\t}\r\n\t\t\tif (rY < sim.height - scale.height) {\r\n\t\t\t\trY = sim.height - scale.height;\r\n\t\t\t}\r\n\t\t\tscale.x = rX;\r\n\t\t\tscale.y = rY;\r\n\t\t},\r\n\t\t// 顺时针旋转图片\r\n        rotateImg(e) {\r\n\t\t\tlet {\r\n\t\t\t\t\tsourceImg,\r\n                    scale: {\r\n\t\t\t\t\t\tnaturalWidth,\r\n\t\t\t\t\t\tnaturalHeight,\r\n                    }\r\n                } = this,\r\n\t\t\t\twidth = naturalHeight,\r\n\t\t\t\theight = naturalWidth,\r\n                canvas = this.$refs.canvas,\r\n                ctx = canvas.getContext('2d');\r\n\t\t\tcanvas.width = width;\r\n            canvas.height = height;\r\n            ctx.clearRect(0, 0, width, height);\r\n\r\n\t\t\tctx.fillStyle = 'rgba(0,0,0,0)';\r\n\t\t\tctx.fillRect(0, 0, width, height);\r\n\r\n\t\t\tctx.translate(width, 0);\r\n            ctx.rotate(Math.PI * 90 / 180);\r\n\r\n            ctx.drawImage(sourceImg, 0, 0, naturalWidth, naturalHeight);\r\n            let imgUrl = canvas.toDataURL(mimes['png']);\r\n\r\n\t\t\tthis.sourceImgUrl = imgUrl;\r\n\t\t\tthis.startCrop();\r\n        },\r\n\r\n\t\t// 按钮按下开始放大\r\n\t\tstartZoomAdd(e) {\r\n\t\t\tlet that = this,\r\n\t\t\t\t{\r\n\t\t\t\t\tscale\r\n\t\t\t\t} = that;\r\n\t\t\tscale.zoomAddOn = true;\r\n\r\n\t\t\tfunction zoom() {\r\n\t\t\t\tif (scale.zoomAddOn) {\r\n\t\t\t\t\tlet range = scale.range >= 100 ? 100 : ++scale.range;\r\n\t\t\t\t\tthat.zoomImg(range);\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tzoom();\r\n\t\t\t\t\t}, 60);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tzoom();\r\n\t\t},\r\n\t\t// 按钮松开或移开取消放大\r\n\t\tendZoomAdd(e) {\r\n\t\t\tthis.scale.zoomAddOn = false;\r\n\t\t},\r\n\t\t// 按钮按下开始缩小\r\n\t\tstartZoomSub(e) {\r\n\t\t\tlet that = this,\r\n\t\t\t\t{\r\n\t\t\t\t\tscale\r\n\t\t\t\t} = that;\r\n\t\t\tscale.zoomSubOn = true;\r\n\r\n\t\t\tfunction zoom() {\r\n\t\t\t\tif (scale.zoomSubOn) {\r\n\t\t\t\t\tlet range = scale.range <= 0 ? 0 : --scale.range;\r\n\t\t\t\t\tthat.zoomImg(range);\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tzoom();\r\n\t\t\t\t\t}, 60);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tzoom();\r\n\t\t},\r\n\t\t// 按钮松开或移开取消缩小\r\n\t\tendZoomSub(e) {\r\n\t\t\tlet {\r\n\t\t\t\tscale\r\n\t\t\t} = this;\r\n\t\t\tscale.zoomSubOn = false;\r\n\t\t},\r\n\t\tzoomChange(e) {\r\n\t\t\tthis.zoomImg(e.target.value);\r\n\t\t},\r\n\t\t// 缩放原图\r\n\t\tzoomImg(newRange) {\r\n\t\t\tlet that = this,\r\n\t\t\t\t{\r\n\t\t\t\t\tsourceImgMasking,\r\n\t\t\t\t\tsourceImgMouseDown,\r\n\t\t\t\t\tscale\r\n\t\t\t\t} = this,\r\n\t\t\t\t{\r\n\t\t\t\t\tmaxWidth,\r\n\t\t\t\t\tmaxHeight,\r\n\t\t\t\t\tminWidth,\r\n\t\t\t\t\tminHeight,\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\theight,\r\n\t\t\t\t\tx,\r\n\t\t\t\t\ty,\r\n\t\t\t\t\trange\r\n\t\t\t\t} = scale,\r\n\t\t\t\tsim = sourceImgMasking,\r\n\t\t\t\t// 蒙版宽高\r\n\t\t\t\tsWidth = sim.width,\r\n\t\t\t\tsHeight = sim.height,\r\n\t\t\t\t// 新宽高\r\n\t\t\t\tnWidth = minWidth + (maxWidth - minWidth) * newRange / 100,\r\n\t\t\t\tnHeight = minHeight + (maxHeight - minHeight) * newRange / 100,\r\n\t\t\t\t// 新坐标（根据蒙版中心点缩放）\r\n\t\t\t\tnX = sWidth / 2 - (nWidth / width) * (sWidth / 2 - x),\r\n\t\t\t\tnY = sHeight / 2 - (nHeight / height) * (sHeight / 2 - y);\r\n\r\n\t\t\t// 判断新坐标是否超过蒙版限制\r\n\t\t\tif (nX > 0) {\r\n\t\t\t\tnX = 0;\r\n\t\t\t}\r\n\t\t\tif (nY > 0) {\r\n\t\t\t\tnY = 0;\r\n\t\t\t}\r\n\t\t\tif (nX < sWidth - nWidth) {\r\n\t\t\t\tnX = sWidth - nWidth;\r\n\t\t\t}\r\n\t\t\tif (nY < sHeight - nHeight) {\r\n\t\t\t\tnY = sHeight - nHeight;\r\n\t\t\t}\r\n\r\n\t\t\t// 赋值处理\r\n\t\t\tscale.x = nX;\r\n\t\t\tscale.y = nY;\r\n\t\t\tscale.width = nWidth;\r\n\t\t\tscale.height = nHeight;\r\n\t\t\tscale.range = newRange;\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tif (scale.range == newRange) {\r\n\t\t\t\t\tthat.createImg();\r\n\t\t\t\t}\r\n\t\t\t}, 300);\r\n\t\t},\r\n\t\t // 生成需求图片\r\n        createImg(e) {\r\n            let that = this,\r\n                {\r\n\t\t\t\t\timgFormat,\r\n\t\t\t\t\timgBgc,\r\n                    mime,\r\n                    sourceImg,\r\n                    scale: {\r\n                        x,\r\n                        y,\r\n                        width,\r\n                        height,\r\n                    },\r\n                    sourceImgMasking: {\r\n                        scale\r\n                    }\r\n                } = that,\r\n                canvas = that.$refs.canvas,\r\n                ctx = canvas.getContext('2d');\r\n            if (e) {\r\n                // 取消鼠标按下移动状态\r\n                that.sourceImgMouseDown.on = false;\r\n            }\r\n\t\t\tcanvas.width = that.width;\r\n            canvas.height = that.height;\r\n            ctx.clearRect(0, 0, that.width, that.height);\r\n\r\n\t\t\tif(imgFormat == 'png'){\r\n\t\t\t\tctx.fillStyle = 'rgba(0,0,0,0)';\r\n\t\t\t} else{\r\n\t\t\t\t// 如果jpg 为透明区域设置背景，默认白色\r\n\t\t\t\tctx.fillStyle = imgBgc;\r\n\t\t\t}\r\n\t\t\tctx.fillRect(0, 0, that.width, that.height);\r\n\r\n            ctx.drawImage(sourceImg, x / scale, y / scale, width / scale, height / scale);\r\n            that.createImgUrl = canvas.toDataURL(mime);\r\n        },\r\n\t\tprepareUpload(){\r\n\t\t\tlet {\r\n\t\t\t\turl,\r\n\t\t\t\tcreateImgUrl,\r\n\t\t\t\tfield,\r\n\t\t\t\tki\r\n\t\t\t} = this;\r\n\t\t\tthis.$emit('crop-success', createImgUrl, field, ki);\r\n\t\t\tif(typeof url == 'string' && url){\r\n\t\t\t\tthis.upload();\r\n\t\t\t}else{\r\n\t\t\t\tthis.off();\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 上传图片\r\n\t\tupload() {\r\n\t\t\tlet that = this,\r\n\t\t\t\t{\r\n\t\t\t\t\tlang,\r\n\t\t\t\t\timgFormat,\r\n\t\t\t\t\tmime,\r\n\t\t\t\t\turl,\r\n\t\t\t\t\tparams,\r\n\t\t\t\t\theaders,\r\n\t\t\t\t\tfield,\r\n\t\t\t\t\tki,\r\n\t\t\t\t\tcreateImgUrl,\r\n\t\t\t\t\twithCredentials,\r\n\t\t\t\t\tmethod\r\n\t\t\t\t} = this,\r\n\t\t\t\tfmData = new FormData();\r\n\t\t\tfmData.append(field, data2blob(createImgUrl, mime), field + '.' + imgFormat);\r\n\r\n\t\t\t// 添加其他参数\r\n\t\t\tif (typeof params == 'object' && params) {\r\n\t\t\t\tObject.keys(params).forEach((k) => {\r\n\t\t\t\t\tfmData.append(k, params[k]);\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\t// 监听进度回调\r\n\t\t\tconst uploadProgress = function(event) {\r\n\t\t\t\tif (event.lengthComputable) {\r\n\t\t\t\t\tthat.progress = 100 * Math.round(event.loaded) / event.total;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t// 上传文件\r\n\t\t\tthat.reset();\r\n\t\t\tthat.loading = 1;\r\n\t\t\tthat.setStep(3);\r\n\t\t\tnew Promise(function(resolve, reject) {\r\n\t\t\t\tlet client = new XMLHttpRequest();\r\n\t\t\t\tclient.open(method, url, true);\r\n\t\t\t\tclient.withCredentials = withCredentials;\r\n\t\t\t\tclient.onreadystatechange = function() {\r\n\t\t\t\t\tif (this.readyState !== 4) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.status === 200 || this.status === 201) {\r\n\t\t\t\t\t\tresolve(JSON.parse(this.responseText));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treject(this.status);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tclient.upload.addEventListener(\"progress\", uploadProgress, false); //监听进度\r\n\t\t\t\t// 设置header\r\n\t\t\t\tif (typeof headers == 'object' && headers) {\r\n\t\t\t\t\tObject.keys(headers).forEach((k) => {\r\n\t\t\t\t\t\tclient.setRequestHeader(k, headers[k]);\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tclient.send(fmData);\r\n\t\t\t}).then(\r\n\t\t\t\t// 上传成功\r\n\t\t\t\tfunction(resData) {\r\n\t\t\t\t\tif (that.value) {\r\n\t\t\t\t\t\tthat.loading = 2;\r\n\t\t\t\t\t\tthat.$emit('crop-upload-success', resData, field, ki);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t// 上传失败\r\n\t\t\t\tfunction(sts) {\r\n\t\t\t\t\tif (that.value) {\r\n\t\t\t\t\t\tthat.loading = 3;\r\n\t\t\t\t\t\tthat.hasError = true;\r\n\t\t\t\t\t\tthat.errorMsg = lang.fail;\r\n\t\t\t\t\t\tthat.$emit('crop-upload-fail', sts, field, ki);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t},\r\n\tcreated(){\r\n\t\t// 绑定按键esc隐藏此插件事件\r\n\t\tdocument.addEventListener('keyup', (e)=>{\r\n\t\t\tif(this.value && (e.key == 'Escape' || e.keyCode == 27)){\r\n\t\t\t\tthis.off();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n\r\n</script>\r\n\r\n<!--\r\n<style lang='sass' src=\"./scss/upload.scss\">\r\n</style> -->\r\n\r\n<style>\r\n@charset \"UTF-8\";\r\n@-webkit-keyframes vicp_progress {\r\n  0% {\r\n    background-position-y: 0; }\r\n  100% {\r\n    background-position-y: 40px; } }\r\n@keyframes vicp_progress {\r\n  0% {\r\n    background-position-y: 0; }\r\n  100% {\r\n    background-position-y: 40px; } }\r\n\r\n@-webkit-keyframes vicp {\r\n  0% {\r\n    opacity: 0;\r\n    -webkit-transform: scale(0) translatey(-60px);\r\n            transform: scale(0) translatey(-60px); }\r\n  100% {\r\n    opacity: 1;\r\n    -webkit-transform: scale(1) translatey(0);\r\n            transform: scale(1) translatey(0); } }\r\n\r\n@keyframes vicp {\r\n  0% {\r\n    opacity: 0;\r\n    -webkit-transform: scale(0) translatey(-60px);\r\n            transform: scale(0) translatey(-60px); }\r\n  100% {\r\n    opacity: 1;\r\n    -webkit-transform: scale(1) translatey(0);\r\n            transform: scale(1) translatey(0); } }\r\n\r\n.vue-image-crop-upload {\r\n  position: fixed;\r\n  display: block;\r\n  -webkit-box-sizing: border-box;\r\n          box-sizing: border-box;\r\n  z-index: 10000;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(0, 0, 0, 0.65);\r\n  -webkit-tap-highlight-color: transparent;\r\n  -moz-tap-highlight-color: transparent; }\r\n  .vue-image-crop-upload .vicp-wrap {\r\n    -webkit-box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.23);\r\n            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.23);\r\n    position: fixed;\r\n    display: block;\r\n    -webkit-box-sizing: border-box;\r\n            box-sizing: border-box;\r\n    z-index: 10000;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    margin: auto;\r\n    width: 600px;\r\n    height: 330px;\r\n    padding: 25px;\r\n    background-color: #fff;\r\n    border-radius: 2px;\r\n    -webkit-animation: vicp 0.12s ease-in;\r\n            animation: vicp 0.12s ease-in; }\r\n    .vue-image-crop-upload .vicp-wrap .vicp-close {\r\n      position: absolute;\r\n      right: -30px;\r\n      top: -30px; }\r\n      .vue-image-crop-upload .vicp-wrap .vicp-close .vicp-icon4 {\r\n        position: relative;\r\n        display: block;\r\n        width: 30px;\r\n        height: 30px;\r\n        cursor: pointer;\r\n        -webkit-transition: -webkit-transform 0.18s;\r\n        transition: -webkit-transform 0.18s;\r\n        transition: transform 0.18s;\r\n        transition: transform 0.18s, -webkit-transform 0.18s;\r\n        -webkit-transform: rotate(0);\r\n            -ms-transform: rotate(0);\r\n                transform: rotate(0); }\r\n        .vue-image-crop-upload .vicp-wrap .vicp-close .vicp-icon4::after, .vue-image-crop-upload .vicp-wrap .vicp-close .vicp-icon4::before {\r\n          -webkit-box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.23);\r\n                  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.23);\r\n          content: '';\r\n          position: absolute;\r\n          top: 12px;\r\n          left: 4px;\r\n          width: 20px;\r\n          height: 3px;\r\n          -webkit-transform: rotate(45deg);\r\n              -ms-transform: rotate(45deg);\r\n                  transform: rotate(45deg);\r\n          background-color: #fff; }\r\n        .vue-image-crop-upload .vicp-wrap .vicp-close .vicp-icon4::after {\r\n          -webkit-transform: rotate(-45deg);\r\n              -ms-transform: rotate(-45deg);\r\n                  transform: rotate(-45deg); }\r\n        .vue-image-crop-upload .vicp-wrap .vicp-close .vicp-icon4:hover {\r\n          -webkit-transform: rotate(90deg);\r\n              -ms-transform: rotate(90deg);\r\n                  transform: rotate(90deg); }\r\n    .vue-image-crop-upload .vicp-wrap .vicp-step1 .vicp-drop-area {\r\n      position: relative;\r\n      -webkit-box-sizing: border-box;\r\n              box-sizing: border-box;\r\n      padding: 35px;\r\n      height: 170px;\r\n      background-color: rgba(0, 0, 0, 0.03);\r\n      text-align: center;\r\n      border: 1px dashed rgba(0, 0, 0, 0.08);\r\n      overflow: hidden; }\r\n      .vue-image-crop-upload .vicp-wrap .vicp-step1 .vicp-drop-area .vicp-icon1 {\r\n        display: block;\r\n        margin: 0 auto 6px;\r\n        width: 42px;\r\n        height: 42px;\r\n        overflow: hidden; }\r\n        .vue-image-crop-upload .vicp-wrap .vicp-step1 .vicp-drop-area .vicp-icon1 .vicp-icon1-arrow {\r\n          display: block;\r\n          margin: 0 auto;\r\n          width: 0;\r\n          height: 0;\r\n          border-bottom: 14.7px solid rgba(0, 0, 0, 0.3);\r\n          border-left: 14.7px solid transparent;\r\n          border-right: 14.7px solid transparent; }\r\n        .vue-image-crop-upload .vicp-wrap .vicp-step1 .vicp-drop-area .vicp-icon1 .vicp-icon1-body {\r\n          display: block;\r\n          width: 12.6px;\r\n          height: 14.7px;\r\n          margin: 0 auto;\r\n          background-color: rgba(0, 0, 0, 0.3); }\r\n        .vue-image-crop-upload .vicp-wrap .vicp-step1 .vicp-drop-area .vicp-icon1 .vicp-icon1-bottom {\r\n          -webkit-box-sizing: border-box;\r\n                  box-sizing: border-box;\r\n          display: block;\r\n          height: 12.6px;\r\n          border: 6px solid rgba(0, 0, 0, 0.3);\r\n          border-top: none; }\r\n      .vue-image-crop-upload .vicp-wrap .vicp-step1 .vicp-drop-area .vicp-hint {\r\n        display: block;\r\n        padding: 15px;\r\n        font-size: 14px;\r\n        color: #666;\r\n        line-height: 30px; }\r\n      .vue-image-crop-upload .vicp-wrap .vicp-step1 .vicp-drop-area .vicp-no-supported-hint {\r\n        display: block;\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        padding: 30px;\r\n        width: 100%;\r\n        height: 60px;\r\n        line-height: 30px;\r\n        background-color: #eee;\r\n        text-align: center;\r\n        color: #666;\r\n        font-size: 14px; }\r\n      .vue-image-crop-upload .vicp-wrap .vicp-step1 .vicp-drop-area:hover {\r\n        cursor: pointer;\r\n        border-color: rgba(0, 0, 0, 0.1);\r\n        background-color: rgba(0, 0, 0, 0.05); }\r\n    .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop {\r\n      overflow: hidden; }\r\n      .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left {\r\n        float: left; }\r\n        .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-img-container {\r\n          position: relative;\r\n          display: block;\r\n          width: 240px;\r\n          height: 180px;\r\n          background-color: #e5e5e0;\r\n          overflow: hidden; }\r\n          .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-img-container .vicp-img {\r\n            position: absolute;\r\n            display: block;\r\n            cursor: move;\r\n            -webkit-user-select: none;\r\n               -moz-user-select: none;\r\n                -ms-user-select: none;\r\n                    user-select: none; }\r\n          .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-img-container .vicp-img-shade {\r\n            -webkit-box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.18);\r\n                    box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.18);\r\n            position: absolute;\r\n            background-color: rgba(241, 242, 243, 0.8); }\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-img-container .vicp-img-shade.vicp-img-shade-1 {\r\n              top: 0;\r\n              left: 0; }\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-img-container .vicp-img-shade.vicp-img-shade-2 {\r\n              bottom: 0;\r\n              right: 0; }\r\n        .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-rotate {\r\n          position: relative;\r\n          width: 240px;\r\n          height: 18px; }\r\n          .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-rotate i {\r\n            display: block;\r\n            width: 18px;\r\n            height: 18px;\r\n            border-radius: 100%;\r\n            line-height: 18px;\r\n            text-align: center;\r\n            font-size: 12px;\r\n            font-weight: bold;\r\n            background-color: rgba(0, 0, 0, 0.08);\r\n            color: #fff;\r\n            overflow: hidden; }\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-rotate i:hover {\r\n              -webkit-box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.12);\r\n                      box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.12);\r\n              cursor: pointer;\r\n              background-color: rgba(0, 0, 0, 0.14); }\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-rotate i:first-child {\r\n              float: left; }\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-rotate i:last-child {\r\n              float: right; }\r\n        .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range {\r\n          position: relative;\r\n          margin: 30px 0 10px 0;\r\n          width: 240px;\r\n          height: 18px; }\r\n          .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range .vicp-icon5,\r\n          .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range .vicp-icon6 {\r\n            position: absolute;\r\n            top: 0;\r\n            width: 18px;\r\n            height: 18px;\r\n            border-radius: 100%;\r\n            background-color: rgba(0, 0, 0, 0.08); }\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range .vicp-icon5:hover,\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range .vicp-icon6:hover {\r\n              -webkit-box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.12);\r\n                      box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.12);\r\n              cursor: pointer;\r\n              background-color: rgba(0, 0, 0, 0.14); }\r\n          .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range .vicp-icon5 {\r\n            left: 0; }\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range .vicp-icon5::before {\r\n              position: absolute;\r\n              content: '';\r\n              display: block;\r\n              left: 3px;\r\n              top: 8px;\r\n              width: 12px;\r\n              height: 2px;\r\n              background-color: #fff; }\r\n          .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range .vicp-icon6 {\r\n            right: 0; }\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range .vicp-icon6::before {\r\n              position: absolute;\r\n              content: '';\r\n              display: block;\r\n              left: 3px;\r\n              top: 8px;\r\n              width: 12px;\r\n              height: 2px;\r\n              background-color: #fff; }\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range .vicp-icon6::after {\r\n              position: absolute;\r\n              content: '';\r\n              display: block;\r\n              top: 3px;\r\n              left: 8px;\r\n              width: 2px;\r\n              height: 12px;\r\n              background-color: #fff; }\r\n          .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range] {\r\n            display: block;\r\n            padding-top: 5px;\r\n            margin: 0 auto;\r\n            width: 180px;\r\n            height: 8px;\r\n            vertical-align: top;\r\n            background: transparent;\r\n            -webkit-appearance: none;\r\n               -moz-appearance: none;\r\n                    appearance: none;\r\n            cursor: pointer;\r\n            /* 滑块\r\n\t\t\t\t\t\t\t ---------------------------------------------------------------*/\r\n            /* 轨道\r\n\t\t\t\t\t\t\t ---------------------------------------------------------------*/ }\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]:focus {\r\n              outline: none; }\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]::-webkit-slider-thumb {\r\n              -webkit-box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.18);\r\n                      box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.18);\r\n              -webkit-appearance: none;\r\n                      appearance: none;\r\n              margin-top: -3px;\r\n              width: 12px;\r\n              height: 12px;\r\n              background-color: #61c091;\r\n              border-radius: 100%;\r\n              border: none;\r\n              -webkit-transition: 0.2s;\r\n              transition: 0.2s; }\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]::-moz-range-thumb {\r\n              box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.18);\r\n              -moz-appearance: none;\r\n                   appearance: none;\r\n              width: 12px;\r\n              height: 12px;\r\n              background-color: #61c091;\r\n              border-radius: 100%;\r\n              border: none;\r\n              -webkit-transition: 0.2s;\r\n              transition: 0.2s; }\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]::-ms-thumb {\r\n              box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.18);\r\n              appearance: none;\r\n              width: 12px;\r\n              height: 12px;\r\n              background-color: #61c091;\r\n              border: none;\r\n              border-radius: 100%;\r\n              -webkit-transition: 0.2s;\r\n              transition: 0.2s; }\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]:active::-moz-range-thumb {\r\n              box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.23);\r\n              width: 14px;\r\n              height: 14px; }\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]:active::-ms-thumb {\r\n              box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.23);\r\n              width: 14px;\r\n              height: 14px; }\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]:active::-webkit-slider-thumb {\r\n              -webkit-box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.23);\r\n                      box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.23);\r\n              margin-top: -4px;\r\n              width: 14px;\r\n              height: 14px; }\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]::-webkit-slider-runnable-track {\r\n              -webkit-box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.12);\r\n                      box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.12);\r\n              width: 100%;\r\n              height: 6px;\r\n              cursor: pointer;\r\n              border-radius: 2px;\r\n              border: none;\r\n              background-color: rgba(68, 170, 119, 0.3); }\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]::-moz-range-track {\r\n              box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.12);\r\n              width: 100%;\r\n              height: 6px;\r\n              cursor: pointer;\r\n              border-radius: 2px;\r\n              border: none;\r\n              background-color: rgba(68, 170, 119, 0.3); }\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]::-ms-track {\r\n              box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.12);\r\n              width: 100%;\r\n              cursor: pointer;\r\n              background: transparent;\r\n              border-color: transparent;\r\n              color: transparent;\r\n              height: 6px;\r\n              border-radius: 2px;\r\n              border: none; }\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]::-ms-fill-lower {\r\n              background-color: rgba(68, 170, 119, 0.3); }\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]::-ms-fill-upper {\r\n              background-color: rgba(68, 170, 119, 0.15); }\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]:focus::-webkit-slider-runnable-track {\r\n              background-color: rgba(68, 170, 119, 0.5); }\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]:focus::-moz-range-track {\r\n              background-color: rgba(68, 170, 119, 0.5); }\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]:focus::-ms-fill-lower {\r\n              background-color: rgba(68, 170, 119, 0.45); }\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]:focus::-ms-fill-upper {\r\n              background-color: rgba(68, 170, 119, 0.25); }\r\n      .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-right {\r\n        float: right; }\r\n        .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-right .vicp-preview {\r\n          height: 150px;\r\n          overflow: hidden; }\r\n          .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-right .vicp-preview .vicp-preview-item {\r\n            position: relative;\r\n            padding: 5px;\r\n            width: 100px;\r\n            height: 100px;\r\n            float: left;\r\n            margin-right: 16px; }\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-right .vicp-preview .vicp-preview-item span {\r\n              position: absolute;\r\n              bottom: -30px;\r\n              width: 100%;\r\n              font-size: 14px;\r\n              color: #bbb;\r\n              display: block;\r\n              text-align: center; }\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-right .vicp-preview .vicp-preview-item img {\r\n              position: absolute;\r\n              display: block;\r\n              top: 0;\r\n              bottom: 0;\r\n              left: 0;\r\n              right: 0;\r\n              margin: auto;\r\n              padding: 3px;\r\n              background-color: #fff;\r\n              border: 1px solid rgba(0, 0, 0, 0.15);\r\n              overflow: hidden;\r\n              -webkit-user-select: none;\r\n                 -moz-user-select: none;\r\n                  -ms-user-select: none;\r\n                      user-select: none; }\r\n            .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-right .vicp-preview .vicp-preview-item.vicp-preview-item-circle {\r\n              margin-right: 0; }\r\n              .vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-right .vicp-preview .vicp-preview-item.vicp-preview-item-circle img {\r\n                border-radius: 100%; }\r\n    .vue-image-crop-upload .vicp-wrap .vicp-step3 .vicp-upload {\r\n      position: relative;\r\n      -webkit-box-sizing: border-box;\r\n              box-sizing: border-box;\r\n      padding: 35px;\r\n      height: 170px;\r\n      background-color: rgba(0, 0, 0, 0.03);\r\n      text-align: center;\r\n      border: 1px dashed #ddd; }\r\n      .vue-image-crop-upload .vicp-wrap .vicp-step3 .vicp-upload .vicp-loading {\r\n        display: block;\r\n        padding: 15px;\r\n        font-size: 16px;\r\n        color: #999;\r\n        line-height: 30px; }\r\n      .vue-image-crop-upload .vicp-wrap .vicp-step3 .vicp-upload .vicp-progress-wrap {\r\n        margin-top: 12px;\r\n        background-color: rgba(0, 0, 0, 0.08);\r\n        border-radius: 3px; }\r\n        .vue-image-crop-upload .vicp-wrap .vicp-step3 .vicp-upload .vicp-progress-wrap .vicp-progress {\r\n          position: relative;\r\n          display: block;\r\n          height: 5px;\r\n          border-radius: 3px;\r\n          background-color: #4a7;\r\n          -webkit-box-shadow: 0 2px 6px 0 rgba(68, 170, 119, 0.3);\r\n                  box-shadow: 0 2px 6px 0 rgba(68, 170, 119, 0.3);\r\n          -webkit-transition: width 0.15s linear;\r\n          transition: width 0.15s linear;\r\n          background-image: -webkit-linear-gradient(135deg, rgba(255, 255, 255, 0.2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.2) 75%, transparent 75%, transparent);\r\n          background-image: linear-gradient(-45deg, rgba(255, 255, 255, 0.2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.2) 75%, transparent 75%, transparent);\r\n          background-size: 40px 40px;\r\n          -webkit-animation: vicp_progress 0.5s linear infinite;\r\n                  animation: vicp_progress 0.5s linear infinite; }\r\n          .vue-image-crop-upload .vicp-wrap .vicp-step3 .vicp-upload .vicp-progress-wrap .vicp-progress::after {\r\n            content: '';\r\n            position: absolute;\r\n            display: block;\r\n            top: -3px;\r\n            right: -3px;\r\n            width: 9px;\r\n            height: 9px;\r\n            border: 1px solid rgba(245, 246, 247, 0.7);\r\n            -webkit-box-shadow: 0 1px 4px 0 rgba(68, 170, 119, 0.7);\r\n                    box-shadow: 0 1px 4px 0 rgba(68, 170, 119, 0.7);\r\n            border-radius: 100%;\r\n            background-color: #4a7; }\r\n      .vue-image-crop-upload .vicp-wrap .vicp-step3 .vicp-upload .vicp-error,\r\n      .vue-image-crop-upload .vicp-wrap .vicp-step3 .vicp-upload .vicp-success {\r\n        height: 100px;\r\n        line-height: 100px; }\r\n    .vue-image-crop-upload .vicp-wrap .vicp-operate {\r\n      position: absolute;\r\n      right: 20px;\r\n      bottom: 20px; }\r\n      .vue-image-crop-upload .vicp-wrap .vicp-operate a {\r\n        position: relative;\r\n        float: left;\r\n        display: block;\r\n        margin-left: 10px;\r\n        width: 100px;\r\n        height: 36px;\r\n        line-height: 36px;\r\n        text-align: center;\r\n        cursor: pointer;\r\n        font-size: 14px;\r\n        color: #4a7;\r\n        border-radius: 2px;\r\n        overflow: hidden;\r\n        -webkit-user-select: none;\r\n           -moz-user-select: none;\r\n            -ms-user-select: none;\r\n                user-select: none; }\r\n        .vue-image-crop-upload .vicp-wrap .vicp-operate a:hover {\r\n          background-color: rgba(0, 0, 0, 0.03); }\r\n    .vue-image-crop-upload .vicp-wrap .vicp-error,\r\n    .vue-image-crop-upload .vicp-wrap .vicp-success {\r\n      display: block;\r\n      font-size: 14px;\r\n      line-height: 24px;\r\n      height: 24px;\r\n      color: #d10;\r\n      text-align: center;\r\n      vertical-align: top; }\r\n    .vue-image-crop-upload .vicp-wrap .vicp-success {\r\n      color: #4a7; }\r\n    .vue-image-crop-upload .vicp-wrap .vicp-icon3 {\r\n      position: relative;\r\n      display: inline-block;\r\n      width: 20px;\r\n      height: 20px;\r\n      top: 4px; }\r\n      .vue-image-crop-upload .vicp-wrap .vicp-icon3::after {\r\n        position: absolute;\r\n        top: 3px;\r\n        left: 6px;\r\n        width: 6px;\r\n        height: 10px;\r\n        border-width: 0 2px 2px 0;\r\n        border-color: #4a7;\r\n        border-style: solid;\r\n        -webkit-transform: rotate(45deg);\r\n            -ms-transform: rotate(45deg);\r\n                transform: rotate(45deg);\r\n        content: ''; }\r\n    .vue-image-crop-upload .vicp-wrap .vicp-icon2 {\r\n      position: relative;\r\n      display: inline-block;\r\n      width: 20px;\r\n      height: 20px;\r\n      top: 4px; }\r\n      .vue-image-crop-upload .vicp-wrap .vicp-icon2::after, .vue-image-crop-upload .vicp-wrap .vicp-icon2::before {\r\n        content: '';\r\n        position: absolute;\r\n        top: 9px;\r\n        left: 4px;\r\n        width: 13px;\r\n        height: 2px;\r\n        background-color: #d10;\r\n        -webkit-transform: rotate(45deg);\r\n            -ms-transform: rotate(45deg);\r\n                transform: rotate(45deg); }\r\n      .vue-image-crop-upload .vicp-wrap .vicp-icon2::after {\r\n        -webkit-transform: rotate(-45deg);\r\n            -ms-transform: rotate(-45deg);\r\n                transform: rotate(-45deg); }\r\n\r\n.e-ripple {\r\n  position: absolute;\r\n  border-radius: 100%;\r\n  background-color: rgba(0, 0, 0, 0.15);\r\n  background-clip: padding-box;\r\n  pointer-events: none;\r\n  -webkit-user-select: none;\r\n     -moz-user-select: none;\r\n      -ms-user-select: none;\r\n          user-select: none;\r\n  -webkit-transform: scale(0);\r\n      -ms-transform: scale(0);\r\n          transform: scale(0);\r\n  opacity: 1; }\r\n  .e-ripple.z-active {\r\n    opacity: 0;\r\n    -webkit-transform: scale(2);\r\n        -ms-transform: scale(2);\r\n            transform: scale(2);\r\n    -webkit-transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;\r\n    transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;\r\n    transition: opacity 1.2s ease-out, transform 0.6s ease-out;\r\n    transition: opacity 1.2s ease-out, transform 0.6s ease-out, -webkit-transform 0.6s ease-out; }\r\n\r\n</style>\r\n"]}]}