{"remainingRequest":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/algoocean/Desktop/AOT-Project/myvarni-admin/src/layout/components/TagsView/ScrollPane.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/src/layout/components/TagsView/ScrollPane.vue","mtime":1668754947370},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/cache-loader/dist/cjs.js","mtime":1655274288430},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/babel-loader/lib/index.js","mtime":1668596430903},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/ts-loader/index.js","mtime":1650280622125},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/cache-loader/dist/cjs.js","mtime":1655274288430},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/vue-loader/lib/index.js","mtime":1668596436320}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IENvbXBvbmVudCwgVnVlIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcicKCmNvbnN0IHRhZ1NwYWNpbmcgPSA0CgpAQ29tcG9uZW50KHsKICBuYW1lOiAnU2Nyb2xsUGFuZScKfSkKZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBWdWUgewogIHByaXZhdGUgaGFuZGxlU2Nyb2xsKGU6IE1vdXNlV2hlZWxFdmVudCkgewogICAgY29uc3QgZXZlbnREZWx0YSA9IChlIGFzIGFueSkud2hlZWxEZWx0YSB8fCAtZS5kZWx0YVkgKiA0MAogICAgY29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gdGhpcy4kcmVmcy5zY3JvbGxDb250YWluZXIgYXMgVnVlCiAgICBjb25zdCBzY3JvbGxXcmFwcGVyID0gc2Nyb2xsQ29udGFpbmVyLiRyZWZzLndyYXAgYXMgSFRNTEVsZW1lbnQKICAgIHNjcm9sbFdyYXBwZXIuc2Nyb2xsTGVmdCA9IHNjcm9sbFdyYXBwZXIuc2Nyb2xsTGVmdCArIGV2ZW50RGVsdGEgLyA0CiAgfQoKICBwdWJsaWMgbW92ZVRvVGFyZ2V0KGN1cnJlbnRUYWc6IEhUTUxFbGVtZW50KSB7CiAgICBjb25zdCBzY3JvbGxDb250YWluZXIgPSB0aGlzLiRyZWZzLnNjcm9sbENvbnRhaW5lciBhcyBWdWUKICAgIGNvbnN0IGNvbnRhaW5lciA9IHNjcm9sbENvbnRhaW5lci4kZWwgYXMgSFRNTEVsZW1lbnQKICAgIGNvbnN0IGNvbnRhaW5lcldpZHRoID0gY29udGFpbmVyLm9mZnNldFdpZHRoCiAgICBjb25zdCBzY3JvbGxXcmFwcGVyID0gc2Nyb2xsQ29udGFpbmVyLiRyZWZzLndyYXAgYXMgSFRNTEVsZW1lbnQKICAgIGNvbnN0IHRhZ0xpc3QgPSB0aGlzLiRwYXJlbnQ/LiRyZWZzLnRhZyBhcyBhbnlbXQoKICAgIGxldCBmaXJzdFRhZyA9IG51bGwKICAgIGxldCBsYXN0VGFnID0gbnVsbAoKICAgIC8vIGZpbmQgZmlyc3QgdGFnIGFuZCBsYXN0IHRhZwogICAgaWYgKHRhZ0xpc3QubGVuZ3RoID4gMCkgewogICAgICBmaXJzdFRhZyA9IHRhZ0xpc3RbMF0KICAgICAgbGFzdFRhZyA9IHRhZ0xpc3RbdGFnTGlzdC5sZW5ndGggLSAxXQogICAgfQoKICAgIGlmIChmaXJzdFRhZyA9PT0gY3VycmVudFRhZykgewogICAgICBzY3JvbGxXcmFwcGVyLnNjcm9sbExlZnQgPSAwCiAgICB9IGVsc2UgaWYgKGxhc3RUYWcgPT09IGN1cnJlbnRUYWcpIHsKICAgICAgc2Nyb2xsV3JhcHBlci5zY3JvbGxMZWZ0ID0gc2Nyb2xsV3JhcHBlci5zY3JvbGxXaWR0aCAtIGNvbnRhaW5lcldpZHRoCiAgICB9IGVsc2UgewogICAgICAvLyBmaW5kIHByZVRhZyBhbmQgbmV4dFRhZwogICAgICBjb25zdCBjdXJyZW50SW5kZXggPSB0YWdMaXN0LmZpbmRJbmRleChpdGVtID0+IGl0ZW0gPT09IGN1cnJlbnRUYWcpCiAgICAgIGNvbnN0IHByZXZUYWcgPSB0YWdMaXN0W2N1cnJlbnRJbmRleCAtIDFdCiAgICAgIGNvbnN0IG5leHRUYWcgPSB0YWdMaXN0W2N1cnJlbnRJbmRleCArIDFdCiAgICAgIC8vIHRoZSB0YWcncyBvZmZzZXRMZWZ0IGFmdGVyIG9mIG5leHRUYWcKICAgICAgY29uc3QgYWZ0ZXJOZXh0VGFnT2Zmc2V0TGVmdCA9IG5leHRUYWcuJGVsLm9mZnNldExlZnQgKyBuZXh0VGFnLiRlbC5vZmZzZXRXaWR0aCArIHRhZ1NwYWNpbmcKICAgICAgLy8gdGhlIHRhZydzIG9mZnNldExlZnQgYmVmb3JlIG9mIHByZXZUYWcKICAgICAgY29uc3QgYmVmb3JlUHJldlRhZ09mZnNldExlZnQgPSBwcmV2VGFnLiRlbC5vZmZzZXRMZWZ0IC0gdGFnU3BhY2luZwoKICAgICAgaWYgKGFmdGVyTmV4dFRhZ09mZnNldExlZnQgPiBzY3JvbGxXcmFwcGVyLnNjcm9sbExlZnQgKyBjb250YWluZXJXaWR0aCkgewogICAgICAgIHNjcm9sbFdyYXBwZXIuc2Nyb2xsTGVmdCA9IGFmdGVyTmV4dFRhZ09mZnNldExlZnQgLSBjb250YWluZXJXaWR0aAogICAgICB9IGVsc2UgaWYgKGJlZm9yZVByZXZUYWdPZmZzZXRMZWZ0IDwgc2Nyb2xsV3JhcHBlci5zY3JvbGxMZWZ0KSB7CiAgICAgICAgc2Nyb2xsV3JhcHBlci5zY3JvbGxMZWZ0ID0gYmVmb3JlUHJldlRhZ09mZnNldExlZnQKICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["ScrollPane.vue"],"names":[],"mappings":";AAYA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ScrollPane.vue","sourceRoot":"src/layout/components/TagsView","sourcesContent":["<template>\n  <el-scrollbar\n    ref=\"scrollContainer\"\n    :vertical=\"false\"\n    class=\"scroll-container\"\n    @wheel.native.prevent=\"handleScroll\"\n  >\n    <slot />\n  </el-scrollbar>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Vue } from 'vue-property-decorator'\n\nconst tagSpacing = 4\n\n@Component({\n  name: 'ScrollPane'\n})\nexport default class extends Vue {\n  private handleScroll(e: MouseWheelEvent) {\n    const eventDelta = (e as any).wheelDelta || -e.deltaY * 40\n    const scrollContainer = this.$refs.scrollContainer as Vue\n    const scrollWrapper = scrollContainer.$refs.wrap as HTMLElement\n    scrollWrapper.scrollLeft = scrollWrapper.scrollLeft + eventDelta / 4\n  }\n\n  public moveToTarget(currentTag: HTMLElement) {\n    const scrollContainer = this.$refs.scrollContainer as Vue\n    const container = scrollContainer.$el as HTMLElement\n    const containerWidth = container.offsetWidth\n    const scrollWrapper = scrollContainer.$refs.wrap as HTMLElement\n    const tagList = this.$parent?.$refs.tag as any[]\n\n    let firstTag = null\n    let lastTag = null\n\n    // find first tag and last tag\n    if (tagList.length > 0) {\n      firstTag = tagList[0]\n      lastTag = tagList[tagList.length - 1]\n    }\n\n    if (firstTag === currentTag) {\n      scrollWrapper.scrollLeft = 0\n    } else if (lastTag === currentTag) {\n      scrollWrapper.scrollLeft = scrollWrapper.scrollWidth - containerWidth\n    } else {\n      // find preTag and nextTag\n      const currentIndex = tagList.findIndex(item => item === currentTag)\n      const prevTag = tagList[currentIndex - 1]\n      const nextTag = tagList[currentIndex + 1]\n      // the tag's offsetLeft after of nextTag\n      const afterNextTagOffsetLeft = nextTag.$el.offsetLeft + nextTag.$el.offsetWidth + tagSpacing\n      // the tag's offsetLeft before of prevTag\n      const beforePrevTagOffsetLeft = prevTag.$el.offsetLeft - tagSpacing\n\n      if (afterNextTagOffsetLeft > scrollWrapper.scrollLeft + containerWidth) {\n        scrollWrapper.scrollLeft = afterNextTagOffsetLeft - containerWidth\n      } else if (beforePrevTagOffsetLeft < scrollWrapper.scrollLeft) {\n        scrollWrapper.scrollLeft = beforePrevTagOffsetLeft\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.scroll-container {\n  .el-scrollbar__bar {\n    bottom: 0px;\n  }\n\n  .el-scrollbar__wrap {\n    height: 49px;\n  }\n}\n</style>\n\n<style lang=\"scss\" scoped>\n.scroll-container {\n  white-space: nowrap;\n  position: relative;\n  overflow: hidden;\n  width: 100%;\n}\n</style>\n"]}]}