{"remainingRequest":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/algoocean/Desktop/AOT-Project/myvarni-admin/src/components/UploadImage/index.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/src/components/UploadImage/index.vue","mtime":1668754947358},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/cache-loader/dist/cjs.js","mtime":1655274288430},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/babel-loader/lib/index.js","mtime":1668596430903},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/ts-loader/index.js","mtime":1650280622125},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/cache-loader/dist/cjs.js","mtime":1655274288430},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/vue-loader/lib/index.js","mtime":1668596436320}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IHVwbG9hZEZpbGUgfSBmcm9tICJAL2FwaS9jb21tb24iOwppbXBvcnQgeyBDb21wb25lbnQsIFByb3AsIFZ1ZSB9IGZyb20gInZ1ZS1wcm9wZXJ0eS1kZWNvcmF0b3IiOwoKCkBDb21wb25lbnQoewogIG5hbWU6ICJVcGxvYWRJbWFnZSIsCn0pCmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgVnVlIHsKICBAUHJvcCh7IGRlZmF1bHQ6ICIiIH0pIHByaXZhdGUgdmFsdWUhOiBzdHJpbmc7CiAgQFByb3AoeyByZXF1aXJlZDogdHJ1ZSB9KSBwcml2YXRlIGZvcm1GaWVsZCE6IHN0cmluZwogIEBQcm9wKCkgcHJpdmF0ZSBoZWlnaHQhOiBzdHJpbmcKICBAUHJvcCgpIHByaXZhdGUgd2lkdGghOiBzdHJpbmcKCiAgZGlhbG9nSW1hZ2VVcmwgPSAiIjsKICBkaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgZmlsZUxpc3Q6YW55PVtdOwoKICBjcmVhdGVkICgpIHsKICAgIGlmKHRoaXMuZm9ybUZpZWxkICE9IG51bGwgJiYgdGhpcy5mb3JtRmllbGQgIT0gIiIpewogICAgICB0aGlzLmZpbGVMaXN0LnB1c2goe25hbWU6ICcnLCB1cmw6IHRoaXMuZm9ybUZpZWxkfSkKICAgIH0KICAgIAogIH0KCnByaXZhdGUgYXN5bmMgdXBsb2FkSW1hZ2UoZmlsZXM6YW55KXsKICAgIGNvbnN0IGRhdGEgPSBuZXcgRm9ybURhdGEoKQogICAgZGF0YS5hcHBlbmQoJ2ZpbGUnLCBmaWxlcy5maWxlKQogICAgYXdhaXQgdXBsb2FkRmlsZShkYXRhLCAoZXZlbnQ6IFByb2dyZXNzRXZlbnQpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGV2ZW50KTsKICAgICAgICB9KS50aGVuKChyZXM6IGFueSkgPT4gewogICAgICAgICAgdGhpcy5mb3JtRmllbGQgPSByZXM7CiAgICAgICAgICAgdGhpcy4kZW1pdCgnaGFuZGxlLXVwbG9hZCcsIHJlcykKICAgICAgICB9KTsKfQoKICAgb25CZWZvcmVVcGxvYWQoZmlsZTphbnkpCiAgICB7CiAgICAgIGNvbnN0IGlzSU1BR0UgPSBmaWxlLnR5cGUgPT0gJ2ltYWdlL2pwZWcnfHxmaWxlLnR5cGU9PSdpbWFnZS9naWYnfHxmaWxlLnR5cGU9PSdpbWFnZS9wbmcnP3RydWU6ZmFsc2UKICAgICAgaWYgKCFpc0lNQUdFKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcignVXBsb2FkIGZpbGUgY2FuIG9ubHkgYmUgaW4gcGljdHVyZSBmb3JtYXQhJyk7CiAgICAgIH0KICAgICAgcmV0dXJuIGlzSU1BR0UgOwogICAgfQoKb25MaW1pdEV4Y2VlZCgpewogIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ0xpbWl0IGV4Y2VkZWVkJykKfQoKICBoYW5kbGVSZW1vdmUoZmlsZTogYW55LCBmaWxlTGlzdDogYW55KSB7CiAgICB0aGlzLmZpbGVMaXN0ID0gW107CiAgICB0aGlzLiRlbWl0KCdoYW5kbGUtcmVtb3ZlJykKICB9CiAgaGFuZGxlUGljdHVyZUNhcmRQcmV2aWV3KGZpbGU6IGFueSkgewogICAgdGhpcy5kaWFsb2dJbWFnZVVybCA9IGZpbGUudXJsOwogICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAyBA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/UploadImage","sourcesContent":["<template>\n  <div>\n    <el-upload\n      action=\"https://jsonplaceholder.typicode.com/posts/\"\n      list-type=\"picture-card\"\n      :on-preview=\"handlePictureCardPreview\"\n      :on-remove=\"handleRemove\"\n      :http-request=\"uploadImage\"\n      :file-list=\"fileList\"\n      :before-upload=\"onBeforeUpload\"\n      :limit=\"1\"\n      :on-exceed=\"onLimitExceed\"\n      accept=\"image/x-png,image/gif,image/jpeg\"\n    >\n      <i class=\"el-icon-plus\"></i>\n    </el-upload>\n    <span v-if=\"(height && width != null)\" class=\"dimensionText\">*Only Image of dimension {{height+' * '+ width}} is accepted</span>\n    <el-dialog :visible.sync=\"dialogVisible\">\n      <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\" />\n    </el-dialog>\n\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { uploadFile } from \"@/api/common\";\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\n\n@Component({\n  name: \"UploadImage\",\n})\nexport default class extends Vue {\n  @Prop({ default: \"\" }) private value!: string;\n  @Prop({ required: true }) private formField!: string\n  @Prop() private height!: string\n  @Prop() private width!: string\n\n  dialogImageUrl = \"\";\n  dialogVisible = false;\n  fileList:any=[];\n\n  created () {\n    if(this.formField != null && this.formField != \"\"){\n      this.fileList.push({name: '', url: this.formField})\n    }\n    \n  }\n\nprivate async uploadImage(files:any){\n    const data = new FormData()\n    data.append('file', files.file)\n    await uploadFile(data, (event: ProgressEvent) => {\n          console.log(event);\n        }).then((res: any) => {\n          this.formField = res;\n           this.$emit('handle-upload', res)\n        });\n}\n\n   onBeforeUpload(file:any)\n    {\n      const isIMAGE = file.type == 'image/jpeg'||file.type=='image/gif'||file.type=='image/png'?true:false\n      if (!isIMAGE) {\n        this.$message.error('Upload file can only be in picture format!');\n      }\n      return isIMAGE ;\n    }\n\nonLimitExceed(){\n  this.$message.error('Limit excedeed')\n}\n\n  handleRemove(file: any, fileList: any) {\n    this.fileList = [];\n    this.$emit('handle-remove')\n  }\n  handlePictureCardPreview(file: any) {\n    this.dialogImageUrl = file.url;\n    this.dialogVisible = true;\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dimensionText{\n  color: red;\n}\n.upload-container {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  width: 50%;\n  .el-upload {\n    width: 50%;\n  }\n}\n</style>\n"]}]}