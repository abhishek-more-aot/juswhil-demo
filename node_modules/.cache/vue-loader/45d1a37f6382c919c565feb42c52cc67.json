{"remainingRequest":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/algoocean/Desktop/AOT-Project/myvarni-admin/src/views/order/list.vue?vue&type=style&index=0&id=96626e4e&lang=scss&scoped=true&","dependencies":[{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/src/views/order/list.vue","mtime":1668754947378},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/css-loader/dist/cjs.js","mtime":1653481241427},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1668596436320},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/postcss-loader/src/index.js","mtime":1655274298318},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/sass-loader/dist/cjs.js","mtime":1655274300161},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/style-resources-loader/lib/index.js","mtime":1655274300173},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/cache-loader/dist/cjs.js","mtime":1655274288430},{"path":"/home/algoocean/Desktop/AOT-Project/myvarni-admin/node_modules/vue-loader/lib/index.js","mtime":1668596436320}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5lZGl0LWlucHV0IHsKICBwYWRkaW5nLXJpZ2h0OiAxMDBweDsKfQoKLmNhbmNlbC1idG4gewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICByaWdodDogMTVweDsKICB0b3A6IDEwcHg7Cn0K"},{"version":3,"sources":["list.vue"],"names":[],"mappings":";AA++BA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views/order","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <div class=\"filter-container\">\n      <el-input\n        v-model=\"listQuery['user.fullName']\"\n        placeholder=\"Name\"\n        style=\"width: 160px\"\n        class=\"filter-item\"\n        @input=\"handleFilter\"\n      />\n      <el-date-picker\n        v-model=\"listQuery.createdTimestamp\"\n        type=\"date\"\n        class=\"filter-item\"\n        format=\"yyyy-MM-dd\"\n        name=\"taxInvoiceDate\"\n        style=\"width: 160px\"\n        clearable=\"true\"\n        placeholder=\"From\"\n        @change=\"fromUtc\"\n      />\n      <el-date-picker\n        v-model=\"listQuery.createdTimestamp_1\"\n        type=\"date\"\n        class=\"filter-item\"\n        format=\"yyyy-MM-dd\"\n        style=\"width: 160px\"\n        name=\"taxInvoiceDate\"\n        clearable=\"true\"\n        placeholder=\"To\"\n        @change=\"toUtc\"\n      />\n      <el-select\n        v-model=\"listQuery.status\"\n        style=\"width: 160px\"\n        class=\"filter-item\"\n        placeholder=\"Status\"\n        clearable=\"true\"\n        @change=\"handleFilter\"\n      >\n        <el-option\n          v-for=\"item in statusList\"\n          :key=\"item.value\"\n          :label=\"item.label\"\n          :value=\"item.value\"\n        />\n      </el-select>\n      <el-select\n        v-model=\"listQuery.sort\"\n        style=\"width: 160px\"\n        class=\"filter-item\"\n        @change=\"handleFilter\"\n      >\n        <el-option\n          v-for=\"item in sortOptions\"\n          :key=\"item.key\"\n          :label=\"item.label\"\n          :value=\"item.key\"\n        />\n      </el-select>\n      <el-button\n        v-waves\n        class=\"filter-item\"\n        type=\"primary\"\n        icon=\"el-icon-search\"\n        @click=\"handleFilter\"\n      >\n        {{ $t(\"table.search\") }}\n      </el-button>\n      <el-button\n        :disabled=\"multipleSelection.length <= 0\"\n        type=\"danger\"\n        icon=\"el-icon-delete\"\n        round\n        @click=\"handleMultipleDelete\"\n      >\n        Delete\n      </el-button>\n      <el-checkbox\n        v-model=\"showCreatedDate\"\n        class=\"filter-item\"\n        style=\"margin-left: 15px\"\n        @change=\"tableKey = tableKey + 1\"\n      >\n        {{ $t(\"table.createdDate\") }}\n      </el-checkbox>\n    </div>\n    <el-dialog\n      title=\"Reason\"\n      :visible.sync=\"dialogVisible\"\n      width=\"30%\"\n    >\n      <span>\n        <el-select\n          v-model=\"reason\"\n          placeholder=\"Select\"\n        >\n          <el-option\n            v-for=\"item in reasonList\"\n            :key=\"item.reason\"\n            :label=\"item.reason\"\n            :value=\"item.reason\"\n          /> </el-select></span>\n      <span\n        slot=\"footer\"\n        class=\"dialog-footer\"\n      >\n        <el-button @click=\"dialogVisible = false\">Cancel</el-button>\n        <el-button\n          v-loading=\"dialogLoading\"\n          type=\"success\"\n          @click=\"updateReason()\"\n        >Confirm</el-button>\n      </span>\n    </el-dialog>\n\n    <el-dialog\n      title=\"Status\"\n      :visible.sync=\"statusDialogVisible\"\n      width=\"30%\"\n    >\n      <span>\n        <el-select\n          v-model=\"statusData.status\"\n          placeholder=\"Status\"\n          class=\"filter-item\"\n          style=\"width: 100%\"\n        >\n          <el-option\n            v-for=\"item in statusList\"\n            :key=\"item.value\"\n            :label=\"item.label\"\n            :value=\"item.value\"\n          />\n        </el-select>\n        <br><br>\n        <div v-if=\"statusData.status== 4\">\n          <el-select\n            v-model=\"statusData.reason\"\n            placeholder=\"Reason\"\n            style=\"width: 100%\"\n          >\n            <el-option\n              v-for=\"item in reasonList\"\n              :key=\"item.reason\"\n              :label=\"item.reason\"\n              :value=\"item.reason\"\n            /> </el-select>\n\n        </div>\n      </span>\n      <span\n        slot=\"footer\"\n        class=\"dialog-footer\"\n      >\n        <el-button @click=\"statusDialogVisible = false\">Cancel</el-button>\n        <el-button\n          v-loading=\"statusDialogLoading\"\n          type=\"success\"\n          @click=\"updateStatus()\"\n        >Confirm</el-button>\n      </span>\n    </el-dialog>\n\n    <el-table\n      :key=\"tableKey\"\n      v-loading=\"listLoading\"\n      :data=\"list\"\n      border\n      fit\n      highlight-current-row\n      style=\"width: 100%\"\n      @selection-change=\"handleSelectionChange\"\n      @sort-change=\"sortChange\"\n    >\n      <el-table-column\n        type=\"selection\"\n        width=\"55\"\n      />\n      <!-- <el-table-column\n        sortable=\"custom\"\n        width=\"100\"\n        align=\"center\"\n        :label=\"$t('table.id')\"\n        prop=\"id\"\n        :class-name=\"getSortClass('id')\"\n      /> -->\n      <el-table-column\n        style=\"width: 200px\"\n        align=\"center\"\n        label=\"Order Details\"\n        prop=\"contact\"\n      >\n        <template slot-scope=\"scope\">\n          <span v-if=\"scope.row.isEdited\"><el-tag type=\"warning\">Edited</el-tag></span><br>\n          <span>{{ scope.row.user.fullName }}</span><br>\n          <span>{{ scope.row.user.email }}</span><br>\n          <span>{{ scope.row.createdTimestamp | moment('DD-MM-YYYY') }}</span><br>\n        </template>\n      </el-table-column>\n\n      <el-table-column\n        \n        align=\"center\"\n        label=\"Status\"\n        style=\"width: 200px\"\n      >\n        <template slot-scope=\"scope\">\n          <span v-if=\"scope.row.status==4\">On hold</span>\n          <span\n            v-else-if=\"scope.row.status==0 \"\n            style=\"color:orange\"\n          >Pending</span>\n          <span\n            v-else-if=\"scope.row.status==1\"\n            style=\"color:green\"\n          >Accepted</span>\n          <span\n            v-else-if=\"scope.row.status==2\"\n            style=\"color:darkgreen\"\n          >Dispatched</span>\n          <span\n            v-else-if=\"scope.row.status==3\"\n            style=\"color:red\"\n          >Cancelled</span><br>\n          <!-- <span v-if=\"this.myRole =='superadmin'\"> -->\n            <el-button\n            v-if=\"myRole =='superadmin'\"\n            v-waves\n            class=\"filter-item\"\n            type=\"primary\"\n            \n            style=\"margin-left:10px\"\n            @click=\"OpenStatus(scope.row)\"\n          >\n            Update Status\n          </el-button>\n          <!-- </span> -->\n          <!-- <el-button\n           v-if=\"myRole =='ASM' || myRole =='Zonal Head' || myRole =='RSM'\"\n            v-waves\n            class=\"filter-item\"\n            type=\"primary\"\n            style=\"margin-left:10px\"\n            @click=\"OpenStatus(scope.row)\"\n          >\n           Update Status\n          </el-button> -->\n          <!-- <el-button\n           v-if=\"myRole =='Zonal Head' && scope.row.status != 2 && scope.row.status != 3 && scope.row.status != 4\"\n            v-waves\n            class=\"filter-item\"\n            type=\"primary\"\n            style=\"margin-left:10px\"\n            @click=\"OpenStatus(scope.row)\"\n          >\n           Update Status\n          </el-button> -->\n         \n          <!-- <el-button\n           v-if=\"myRole =='RSM' && scope.row.status != 2 && scope.row.status != 3 && scope.row.status != 4\"\n            v-waves\n            class=\"filter-item\"\n            type=\"primary\"\n            style=\"margin-left:10px\"\n            @click=\"OpenStatus(scope.row)\"\n          >\n           Update Status\n          </el-button> -->\n        </template>\n      </el-table-column>\n\n      <el-table-column\n        align=\"center\"\n        label=\"Invoice\"\n        style=\"width: 200px\"\n      >\n        <template slot-scope=\"scope\">\n          <router-link :to=\"'/order/orderPdf/'+scope.row.id\">\n            <svg-icon\n              name=\"documentation\"\n              style=\"font-size: 32px; color: blue;cursor: pointer;\"\n            />\n          </router-link>\n        </template>\n      </el-table-column>\n      <el-table-column\n        align=\"center\"\n        label=\"Excel\"\n        style=\"width: 200px\"\n      >\n        <template slot-scope=\"scope\">\n          <svg-icon\n            name=\"documentation\"\n            style=\"font-size: 32px; color: green;cursor: pointer;\"\n            @click=\"handleDownload(scope.row)\"\n          />\n        </template>\n      </el-table-column>\n      <!-- <el-table-column\n        align=\"center\"\n        label=\"Document\"\n        style=\"width: 200px\"\n      >\n        <template slot-scope=\"scope\">\n          <div\n            v-for=\"doc in scope.row.document\"\n            :key=\"doc\"\n          >\n            <el-tooltip\n              :content=\"doc\"\n              placement=\"left\"\n            >\n              <a\n                :href=\"doc\"\n                target=\"_blank\"\n              >\n                <svg-icon\n                  name=\"documentation\"\n                  style=\"font-size: 32px; color: orange;cursor: pointer;\"\n                />\n              </a>\n            </el-tooltip>\n          </div>\n        </template>\n      </el-table-column> -->\n      <el-table-column\n        v-if=\"showCreatedDate\"\n        :label=\"$t('table.createdDate')\"\n        width=\"150\"\n        align=\"center\"\n      >\n        <template slot-scope=\"scope\">\n          <span style=\"color: red\">{{\n            scope.row.createdTimestamp | moment(\"from\")\n          }}</span><br>\n        </template>\n      </el-table-column>\n\n      <el-table-column\n        align=\"center\"\n        :label=\"$t('table.actions')\"\n        width=\"150\"\n        class-name=\"fixed-width\"\n      >\n        <template slot-scope=\"scope\">\n          <el-dialog\n            title=\"Document\"\n            :visible.sync=\"dialog\"\n            width=\"30%\"\n          >\n            <span>\n              <el-upload\n                class=\"upload-demo\"\n                action=\"https://api.rdmobiles.com/common/upload\"\n                :on-change=\"handleChange\"\n                multiple\n                :file-list=\"fileList\"\n              >\n                <el-button\n                  size=\"small\"\n                  type=\"primary\"\n                >Click to upload</el-button>\n              </el-upload>\n              <br>\n            </span>\n            <span\n              slot=\"footer\"\n              class=\"dialog-footer\"\n            >\n              <el-button @click=\"closeDialog\">Cancel</el-button>\n              <el-button\n                v-loading=\"dialogLoading\"\n                type=\"success\"\n                @click=\"updateDocument()\"\n              >Save</el-button>\n            </span>\n          </el-dialog>\n          <router-link\n           :to=\"'/documents/list/' + scope.row.id\"\n          >\n          <el-button\n            size=\"small\"\n            type=\"primary\"\n            \n            \n          >\n            Upload Document\n          </el-button>\n          </router-link>\n          <br><br>\n          <router-link\n            v-if=\"scope.row.addToCart.length>0\"\n            :to=\"'/order/edit/'+scope.row.id\"\n          >\n            <el-button\n              type=\"warning\"\n              size=\"small\"\n              icon=\"el-icon-edit\"\n            />\n          </router-link>&nbsp;\n          <!-- <el-button\n            size=\"small\"\n            type=\"danger\"\n            icon=\"el-icon-delete\"\n            @click=\"handleDelete(scope.row)\"\n          /> -->\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <pagination\n      v-show=\"total > 0\"\n      :total=\"total\"\n      :page.sync=\"listQuery.page\"\n      :limit.sync=\"listQuery.limit\"\n      @pagination=\"getList\"\n    />\n    <div\n      id=\"orderBill\"\n      hidden\n    >\n      <el-table\n        :key=\"tableKey\"\n        v-loading=\"listLoading\"\n        :data=\"orderList\"\n        border\n        show-summary\n        class=\"table\"\n        fit\n        highlight-current-row\n        style=\"max-width:2480px;width:100%;\"\n        @sort-change=\"sortChange\"\n      >\n        <el-table-column\n          style=\" width:200px;\"\n          align=\"left\"\n          label=\"Description of goods\"\n          prop=\"contact\"\n        >\n          <template slot-scope=\"scope\">\n            {{ scope.row.product.name }}<br>\n          </template>\n        </el-table-column>\n\n        <el-table-column\n          style=\" width:auto;overflow: hidden;word-wrap: break-word;\"\n          align=\"left\"\n          label=\"Quantity\"\n          prop=\"\"\n        >\n          <template slot-scope=\"scope\">\n            {{ scope.row.quantity+\" \" }} Pcs<br>\n          </template>\n        </el-table-column>\n        <el-table-column\n          style=\" width: auto;overflow: hidden;word-wrap: break-word;\"\n          align=\"left\"\n          label=\"Rate\"\n          prop=\"\"\n        />\n\n        <el-table-column\n          style=\" width: auto;overflow: hidden;word-wrap: break-word;\"\n          align=\"left\"\n          label=\"Per\"\n          prop=\"\"\n        />\n        <el-table-column\n          style=\" width: auto;overflow: hidden;word-wrap: break-word;\"\n          align=\"left\"\n          label=\"Amount\"\n          prop=\"\"\n        />\n      </el-table>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Vue } from 'vue-property-decorator'\nimport { getOrders, deleteOrder, updateOrder, getOrderById, defaultOrderData, updateStatus } from '@/api/order'\nimport { getCartById } from '@/api/cart'\nimport { IEventData, IOrderData } from '@/api/types'\nimport Pagination from '@/components/Pagination/index.vue'\nimport { getQuery, formatJson } from '@/utils/index'\nimport { htmlToPaper } from 'vue-html-to-paper'\nimport { exportJson2Excel } from '@/utils/excel'\nimport Sortable, { get } from 'sortablejs'\nimport Enabled from '@/components/Enabled/index.vue'\nimport Axios from 'axios'\nimport { getReasons } from '@/api/reason'\nimport moment from 'moment'\nimport { keys, merge } from 'lodash'\nimport { uploadFile } from '@/api/common'\nimport { AdminModule } from '@/store/modules/admin'\n\n@Component({\n  name: 'orderList',\n  components: {\n    Pagination,\n    Enabled\n  }\n})\nexport default class extends Vue {\n  private tableKey = 0;\n  private total = 0;\n  private list: IOrderData[] = [];\n  private order:any\n  private document:any = []\n  private reason:any='';\n  private status:any= 0;\n  private limitnum=1;\n  private fileList:any=[]\n  private orderList: any[] = [];\n  private listLoading = true;\n  private downloadLoading = false;\n  private statusData:IOrderData = Object.assign({}, defaultOrderData) ;\n  private dialogVisible = false;\n  private dialog = false;\n  private dialogLoading=false;\n  private statusDialogVisible = false;\n  private statusDialogLoading=false;\n  private fullscreenLoading=false\n  \n  newList: any = [];\n  oldList: any = [];\n  private showSortingOption: boolean = false;\n  private renderComponent: boolean = true;\n  currentPage = 0; // pdf file page number\n  pageCount = 0; // total number of pages in pdf file\n  fileType = 'pdf'; // file type\n  private myRole = AdminModule.roles[0];\n  private multipleSelection:any=[]\n  private showCreatedDate=false\n\n  private listQuery = this.myRole == 'superadmin'? {\n    page: 1,\n    limit: 10,\n    'user.fullName': '',\n    createdTimestamp: '',\n    createdTimestamp_1: '',\n    isDeleted: false,\n    sort: 'id,DESC',\n    filter: {\n      'user.fullName': '$contL',\n      createdTimestamp: 'gte',\n      createdTimestamp_1: 'lte',\n      status: 'eq',\n      isDeleted: 'eq'\n    }\n  }:this.myRole == 'ASM'?\n  {\n    page: 1,\n    limit: 10,\n    'user.fullName': '',\n    createdTimestamp: '',\n    createdTimestamp_1: '',\n    isDeleted: false,\n    asmId:AdminModule.id,\n    sort: 'id,DESC',\n    filter: {\n      asmId:'eq',\n      'user.fullName': '$contL',\n      createdTimestamp: 'gte',\n      createdTimestamp_1: 'lte',\n      status: 'eq',\n      isDeleted: 'eq'\n    }\n  }:this.myRole =='RSM'?\n  {\n    page: 1,\n    limit: 10,\n    'user.fullName': '',\n    createdTimestamp: '',\n    createdTimestamp_1: '',\n    isDeleted: false,\n    rsmId:AdminModule.id,\n    sort: 'id,DESC',\n    filter: {\n      rsmId:'eq',\n      'user.fullName': '$contL',\n      createdTimestamp: 'gte',\n      createdTimestamp_1: 'lte',\n      status: 'eq',\n      isDeleted: 'eq'\n    }\n  }:\n  {\n    page: 1,\n    limit: 10,\n    'user.fullName': '',\n    createdTimestamp: '',\n    createdTimestamp_1: '',\n    isDeleted: false,\n    zoneHeadId:AdminModule.id,\n    sort: 'id,DESC',\n    filter: {\n      zoneHeadId:'eq',\n      'user.fullName': '$contL',\n      createdTimestamp: 'gte',\n      createdTimestamp_1: 'lte',\n      status: 'eq',\n      isDeleted: 'eq'\n    }\n  };\n\n  private print() {\n    // Pass the element id here\n\n    htmlToPaper('orderBill')\n  }\n\n  private sortOptions = [\n    { label: 'ID Ascending', key: 'id,ASC' },\n    { label: 'ID Descending', key: 'id,DESC' }\n  ];\n\n   private statusList  = [\n    { label: 'Pending', value: 0 },\n    { label: 'Accepted', value: 1},\n    { label: 'Dispatched', value: 2 },\n    { label: 'Cancelled', value: 3 },\n    { label: 'On hold', value: 4 }\n  ];\n \n\n\n  private reasonList = [];\n\n  private enableTypeOptions = [\n    { key: true, value: 'Enable' },\n    { key: false, value: 'Disabled' }\n  ];\n\n  sortable: any;\n\n  created() {\n    this.fetchReasons()\n    this.getList()\n  }\n\n  private uploadDoc(data:any) {\n    this.order = data\n    this.dialog = true\n  }\n\n  private handleChange(field:any) {\n    if (field.response) {\n      this.document.push(field.response)\n    }\n  }\n\n  private async updateDocument() {\n    try {\n      this.order.document = this.document\n      await updateOrder(this.order.id, this.order)\n      this.$message({\n        message: 'Status Updated.',\n        type: 'success'\n      })\n      this.dialog = false\n      this.fileList = []\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  private async getList() {\n    try {\n      this.listLoading = true\n      const data: any = await getOrders(getQuery(this.listQuery))\n      this.list = data.data\n      this.total = data.total\n      this.listLoading = false\n    } catch (error) {\n      this.listLoading = false\n    }\n  }\n\n  private handleSelectionChange(val:any) {\n    this.multipleSelection = val\n  }\n\n  private async fetchReasons() {\n    try {\n      const data:any = await getReasons(getQuery({ filter: {} }))\n      this.reasonList = data\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  private OpenStatus(row:any) {\n    this.statusData = row\n    this.statusDialogVisible = true\n  }\n\n  private async handleMultipleDelete() {\n    const callList:any = []\n    this.multipleSelection.forEach((order:any) => {\n      order.isDeleted = true\n      callList.push(updateOrder(order.id, order))\n      \n    })\n    this.$confirm('This will permanently delete the file. Continue?', 'Warning', {\n      confirmButtonText: 'OK',\n      cancelButtonText: 'Cancel',\n      type: 'warning'\n    }).then(() => {\n      Axios.all(callList).then((data: any) => {\n        \n        if (data.length > 0) {\n          this.$message({\n            message: 'Deleted Successfully.',\n            type: 'success'\n          })\n          this.getList()\n        } else {\n          this.getList()\n          this.$message.error('Orders not deleted.')\n        }\n      })\n    }).catch(() => {\n      this.$message({\n        type: 'info',\n        message: 'Delete canceled'\n      })\n    })\n  }\n\n  private closeDialog() {\n    this.dialog = false\n    this.fileList = []\n  }\n\n  private async getOrders(row:any) {\n    this.orderList = []\n    var callList:any = []\n    this.fullscreenLoading = true\n\n    await row.addToCartIds.forEach(async(cartId:any) => {\n      callList.push(getCartById(cartId))\n    }\n    )\n\n    await Axios.all(callList).then((data: any) => {\n      data.forEach((response: any, index: any) => {\n        this.orderList.push(response)\n      })\n    })\n\n    // this.$htmlToPaper('orderBill');\n    // this.fullscreenLoading=false\n\n    var printWindow:any = window.open('', '', 'height=800,width=1000')\n    printWindow.document.write('<html><head><link rel=\"stylesheet\" href=\"https://unpkg.com/element-ui/lib/theme-chalk/index.css\" type=\"text/css\" media=\"all\" title=\"no title\" charset=\"utf-8\"/><title>Table Contents</title>')\n    printWindow.document.write('<body>')\n    var divContents:any = document.getElementById('orderBill')\n    divContents = divContents.innerHTML\n\n    printWindow.document.write(divContents)\n    printWindow.document.write('</body>')\n    printWindow.document.write('</html>')\n    printWindow.document.close()\n    this.fullscreenLoading = false\n    setTimeout(function() { printWindow.print() }, 1000)\n\n    // this.print()\n  }\n\n  private toggleVisibility() {\n    this.dialogVisible = true\n  }\n\n  private async updateStatus() {\n    this.statusData.isEdited = false\n    const data:any = this.statusData\n    if (data.status != 4) {\n      data.reason = null\n    }\n\n    await updateStatus(data).then(() => {\n      this.$message({\n        message: 'Status Updated.',\n        type: 'success'\n      })\n\n      this.statusDialogVisible = false\n    }).catch((error) => { console.log(error) })\n  }\n\n  private updateReason() {\n    try {\n      this.statusData.status = 4\n      this.statusData.reason = this.reason\n\n      updateOrder(this.statusData.id, this.statusData).then(() => {\n        this.dialogVisible = false\n        this.statusData.reason = ''\n        this.$message({\n          message: 'Status Updated.',\n          type: 'success'\n        })\n      })\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  fromUtc(field: any) {\n    \n    if (field == null) {\n      this.listQuery.createdTimestamp = ''\n      this.handleFilter()\n    } else {\n      this.listQuery.createdTimestamp = field.toISOString()\n      this.handleFilter()\n    }\n  }\n\n  toUtc(field: any) {\n    if (field == null) {\n      this.listQuery.createdTimestamp_1 = ''\n      this.handleFilter()\n    } else {\n      this.listQuery.createdTimestamp_1 = moment(field).endOf('day').hour(23).toISOString()\n      this.handleFilter()\n    }\n  }\n\n  private handleFilter() {\n    this.listQuery.page = 1\n    if (this.listQuery.createdTimestamp == null) {\n      this.listQuery.createdTimestamp = ''\n    }\n    if (this.listQuery.createdTimestamp_1 == null) {\n      this.listQuery.createdTimestamp_1 = ''\n    }\n    this.getList()\n  }\n\n  private getSortClass(key: string) {\n    const sort = this.listQuery.sort\n    return sort === `${key},ASC`\n      ? 'ascending'\n      : sort === `${key},DESC`\n        ? 'descending'\n        : ''\n  }\n\n  private sortChange(data: any) {\n    const { prop, order } = data\n    if (prop) {\n      this.listQuery.sort =\n        `${prop},` + (order === 'ascending' ? 'ASC' : 'DESC')\n      this.handleFilter()\n    }\n  }\n\n  private handleDelete(data: any) {\n    if (data) {\n      this.$confirm(\n        this.$tc('table.deleteConfirmation', undefined, { name: data.name }),\n        this.$tc('table.delete'),\n        {\n          confirmButtonText: this.$tc('table.delete'),\n          confirmButtonClass: 'el-button--danger',\n          cancelButtonText: 'Cancel',\n          type: 'error'\n        }\n      )\n        .then(() => {\n          deleteOrder(data.id).then((deleted) => {\n          })\n          this.getList()\n        })\n        .catch(() => {\n          this.$message({\n            type: 'info',\n            message: this.$tc('table.deleteCanceled')\n          })\n        })\n    }\n  }\n\n  async fetchProducts(ids:any) {\n    const products:any = []\n    const callList:any = []\n    await ids.forEach(async(id:any) => {\n      callList.push(getCartById(id))\n    })\n    Axios.all(callList).then((data: any) => {\n      data.forEach((response: any) => {\n        products.push(response)\n      })\n    })\n    return products\n  }\n\n  private async handleDownload(row: any) {\n    this.downloadLoading = true\n\n    let orderData: any = row;\n    // orderData.state=orderData.user.state.name;\n    // orderData.address=orderData.user.address;\n    // let statename:any = orderData.user.state.name\n    const products:any = []\n    const callList:any = []\n\n    await orderData.addToCartIds.forEach(async(id:any) => {\n      await callList.push(getCartById(id))\n    })\n\n\n    await Axios.all(callList).then((data: any) => {\n      data.forEach(async(response: any) => {\n        await products.push(response)\n      })\n    })\n    const user:any = orderData.user\n\n    products.forEach((product:any,index:any) => {\n      var options = '';\n      var subTotal=product.amount * product.quantity;\n      // var amount=product.amount;\n      for (var key in product.options) {\n        options = options.concat(((key + ':' + product.options[key]).toString() + ' ,'))\n      }\n      if (options.length < 1) {\n        options = 'NA'\n      }\n      product.optionsName = options\n      if(index==0){\n        \n        product.user.address!=null? product.address =product.user.address : product.address='';\n        product.user.stateId!=null ? product.state=product.user.state.name : product.state='';\n        product.user.companyName != null ? product.companyName = product.user.companyName:product.companyName =\"\";\n        product.order.createdTimestamp != null ? product.createdTimestamp = product.order.createdTimestamp: product.createdTimestamp =\"\"\n      }else{\n          product.address =''\n          product.state=''\n          product.companyName=''\n          product.createdTimestamp=null\n      }\n      product.createdTimestamp=product.order.createdTimestamp\n      product.subTotal=subTotal\n      product.name=product.product.name;\n      product.description=product.product.description;\n      product.mrpPrice = product.product.mrpPrice;\n      product.gstId= product.product.gstId;\n    })\n    console.log(products);\n    //  let userData:any= row;\n    //  userData.state=userData.user.state.name;\n    // userData.address=userData.user.address;\n    //  user.address = user.address;\n    // user.state = user.state.name;\n    const tHeader = [\n      'Invoice No',\n      'Invoice Date',\n      'Party Name',\n      'Address',\n      'State',\n      \"GSTIN No\",\n      'Stock Item Name',\n      'Stock Item Code',\n      'Item Description',\n      'Qty',\n      'Rate',\n      'Amount',\n      'CGST Amount',\n      'SGST Amount',\n      'IGST Amount',\n      'Invoice Amount'\n    ]\n    // const merges = ['A1:F1']\n    // const multiHeader = [[user.fullName + '   (' + user.companyName + ')','', '','','','']]\n    const filterVal = [\n      'createdTimestamp',\n      'createdTimestamp',\n      'companyName',\n      'address',\n      'state',\n      'product.gstId',\n      'name',\n      'product.modelNumber',\n      'product.description',\n      'quantity',\n      'product.mrpPrice',\n      'amount',\n      'amount',\n      'quantity',\n      'optionsName',\n      'subTotal'\n    ]\n    const data = formatJson(filterVal, products)\n    const heading:any = []\n\n    exportJson2Excel(tHeader, data, (this.$tc(user.companyName + '_' + moment(orderData.createdTimestamp).format('DD-MM-YYYY'))))\n    //exportJson2Excel(tHeader,data, this.$tc(user.companyName + '_' + moment(orderData.createdTimestamp).format('DD-MM-YYYY')),multiHeader, merges)\n    this.downloadLoading = false\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.edit-input {\n  padding-right: 100px;\n}\n\n.cancel-btn {\n  position: absolute;\n  right: 15px;\n  top: 10px;\n}\n</style>\n"]}]}